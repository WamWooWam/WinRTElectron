Jx.delayDefine(Mail,"AppBar",function(){"use strict";var t=Mail.AppBar=function(n,t){this._currentReduce=false;this._element=n;this._appBar=new WinJS.UI.AppBar(n,t);this._hooks=new Mail.Disposer(new Mail.EventHook(this._appBar,"afterhide",function(){n.style.display="none";this._completeReduce()},this,false),new Mail.EventHook(this._appBar,"MSPointerDown",function(n){n.button===2&&n.preventDefault()}),new Mail.EventHook(this._appBar,"contextmenu",function(n){n.preventDefault();this._appBar.hide()},this,false),new Mail.EventHook(this._appBar,"MSHoldVisual",function(n){n.preventDefault()},this,false));var i=this._appBar._endAnimateCommands;this._appBar._endAnimateCommands=this._getEndAnimateCommands(i);this.showOnlyCommands=this._appBar.showOnlyCommands.bind(this._appBar);this.showCommands=this._appBar.showCommands.bind(this._appBar);this.hideCommands=this._appBar.hideCommands.bind(this._appBar);this.getCommandById=this._appBar.getCommandById.bind(this._appBar);this.addEventListener=this._appBar.addEventListener.bind(this._appBar);this.removeEventListener=this._appBar.removeEventListener.bind(this._appBar)},n=t.prototype;n._getEndAnimateCommands=function(n){return function(){n.apply(this._appBar,arguments);this._completeReduce()}.bind(this)};n._setVisibility=function(n){n===this._appBar.hidden&&(n?this._appBar.show():this._appBar.hide())};n._setVisibilityAsync=function(n){var i=n?"aftershow":"afterhide",t=this._appBar,r=n?t.show:t.hide;return t.hidden!==n?WinJS.Promise.as():Jx.Promise.schedule(null,Mail.Priority.showAppBar,null).then(function(){if(t.hidden===n)return r.call(t),Mail.Promises.waitForEvent(t,i)})};n.showAsync=function(){return this._setVisibilityAsync(true)};n.hideAsync=function(){return this._setVisibilityAsync(false)};n.show=function(){this._setVisibility(true)};n.hide=function(){this._setVisibility(false)};n.toggleVisibility=function(){this._setVisibility(this._appBar.hidden)};n.setEnabled=function(n){this._appBar.disabled=!n};n.focus=function(){WinJS.UI.AppBar._ElementWithFocusPreviousToAppBar=document.activeElement;this._appBar._focusOnFirstFocusableElementOrThis()};n._completeReduce=function(){this._element.winAnimating||(this.reduce=this._currentReduce)};Object.defineProperty(n,"reduce",{enumerable:true,set:function(n){this._currentReduce=n;this._element.winAnimating||(this._currentReduce?(this._appBar._appBarTotalKnownWidth=null,this._appBar._scaleAppBarHelper=function(){return 1},this._element.classList.add("win-reduced")):(this._appBar._appBarTotalKnownWidth=null,this._appBar._scaleAppBarHelper=function(){return Number.POSITIVE_INFINITY},this._element.classList.remove("win-reduced")))}});Object.defineProperty(n,"hidden",{enumerable:true,get:function(){return this._appBar.hidden}});Object.defineProperty(n,"offsetHeight",{enumerable:true,get:function(){return this._element.offsetHeight}});Object.defineProperty(n,"winAnimating",{enumerable:true,get:function(){return this._element.winAnimating}})})
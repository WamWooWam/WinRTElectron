Jx.delayDefine(Mail,"moveWithConfirmation",function(){"use strict";function t(n,t,i){Mail.writeProfilerMark("MoveConfirmDialog_onCreateRule",Mail.LogEvent.start);var r=n.view;t.forEach(function(n){Mail.SweepRules.runMoveAllRule(n.emailAddress,r,i,Mail.SweepRules.sweepType.moveAllFuture)});Mail.writeProfilerMark("MoveConfirmDialog_onCreateRule",Mail.LogEvent.stop)}function i(i,r,u){var e=Mail.SweepRules.getSenders(i,u),o;if(e.length===0){i.moveItemsTo(r,u);return}var h=i.messages.length===1?"mailMoveConfirmMoveButtonSingular":"mailMoveConfirmMoveButtonPlural",c=e.length===1?"mailMoveConfirmDialogTitleSingleSender":"mailMoveConfirmDialogTitleMultipleSenders",l=new n(i,r,e),f=new People.Dialog(Jx.res.getString(c),l),s=new People.DialogButton("idMoveConfirmMove",Jx.res.getString(h),"button");s.addListener("click",function(){f.close();i.moveItemsTo(r,u)});f.buttons.push(s);o=new People.DialogButton("idMoveConfirmCreateRule",Jx.res.getString("mailMoveConfirmCreateRuleButton"),"button");o.addListener("click",function(){f.close();t(i,e,r)});f.buttons.push(o);f.show(false)}var n=function(n,t,i){Mail.writeProfilerMark("MoveConfirmDialogContent_constructor",Mail.LogEvent.start);this._selection=n;this._destination=t;this._senders=i;this.initComponent();Mail.writeProfilerMark("MoveConfirmDialogContent_constructor",Mail.LogEvent.stop)};Jx.augment(n,Jx.Component);n.prototype.getUI=function(n){var r="<span class='moveConfirmViewName'>"+Jx.escapeHtmlToSingleLine(this._destination.name)+"<\/span>",t=null,i;this._senders.length===1?(i=this._senders[0],t=Jx.res.loadCompoundString("mailMoveConfirmDialogMessageSingular",Jx.escapeHtmlToSingleLine(i.calculatedUIName),Jx.escapeHtmlToSingleLine(i.emailAddress),r)):t=Jx.res.loadCompoundString("mailMoveConfirmDialogMessagePlural",r);n.html="<div id='moveConfirmDialogRoot'><div id='dlgDescription' class='moveConfirmDescription' role='heading'>"+t+"<\/div><\/div>"};n.prototype.activateUI=function(){Mail.writeProfilerMark("MoveConfirmDialogContent_activateUI",Mail.LogEvent.start);var n=document.getElementById("idMoveConfirmMove");Jx.safeSetActive(n);Jx.Component.prototype.activateUI.call(this);Mail.writeProfilerMark("MoveConfirmDialogContent_activateUI",Mail.LogEvent.stop)};n.prototype.deactivateUI=function(){Mail.writeProfilerMark("MoveConfirmDialogContent_deactivateUI",Mail.LogEvent.start);Jx.Component.prototype.deactivateUI.call(this);Mail.writeProfilerMark("MoveConfirmDialogContent_deactivateUI",Mail.LogEvent.stop)};Mail.moveWithConfirmation=function(n,t,r){Mail.writeProfilerMark("MoveConfirmDialog_moveWithConfirmation",Mail.LogEvent.start);var u=Mail.ViewCapabilities.requiresMoveConfirmationDialog;u(n.view)||u(t)?i(n,t,r):(n.moveItemsTo(t,r),Jx.EventManager.fireDirect(null,"exitSelectionMode"));Mail.writeProfilerMark("MoveConfirmDialog_moveWithConfirmation",Mail.LogEvent.stop)}})
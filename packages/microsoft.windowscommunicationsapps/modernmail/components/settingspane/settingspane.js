Jx.delayDefine(Mail,"CompSettingsPane",function(){"use strict";function t(n){Jx.mark("SettingsPane."+n+",StartTA,SettingsPane")}function i(n){Jx.mark("SettingsPane."+n+",StopTA,SettingsPane")}Mail.CompSettingsPane=function(){this.initComponent();this._optionsFlyout=null;this._settingsProviders=null;this._disposer=new Mail.Disposer};Jx.augment(Mail.CompSettingsPane,Jx.Component);var n=Mail.CompSettingsPane.prototype;n._getCommandCtor=function(){return Windows.UI.ApplicationSettings.SettingsCommand};n.appendCommands=function(n){var t,i;if(n.length!==0){Jx.log.info("Mail.CompSettingsPane.appendCommands - ignoring since commands are already appended");return}t=this._getCommandCtor();n.append(new t("settings.accounts",Jx.res.getString("/accountsStrings/actSettingEntryPoint"),this._onAccounts.bind(this)));n.append(new t("settings.options",Jx.res.getString("/Jx/Options"),this._onOptions.bind(this)));n.append(new t("settings.help",Jx.res.getString("/Jx/Help"),this._onHelp.bind(this)));n.append(new t("settings.about",Jx.res.getString("/Jx/About"),this._onAbout.bind(this)));!!window.SasManager&&SasManager.addSettingsEntry()&&(i=SasManager.getSettingsCommand(),n.append(i))};n.activateUI=function(n){this._disposer.add(new Mail.EventHook(n,"commandsrequested",this._onCommandsRequested,this))};n.deactivateUI=function(){this._disposer.dispose();this._optionsFlyout=null;this._settingsProviders=null};n._onAbout=function(){Jx.SettingsFlyout.showAbout(document.title)};n._onOptions=function(){var n,r,u;t("onOptions");this._optionsFlyout||(this._optionsFlyout=new Jx.SettingsFlyout(Jx.res.getString("/Jx/Options")),n=this._optionsFlyout.getContentElement(),r=this._settingsProviders=[this._disposer.add(new Mail.MessageListSettings(n)),this._disposer.add(new Mail.FontSettings(n)),this._disposer.add(new Mail.ReadingDirectionSetting(n))],u="",r.forEach(function(n){u+=n.getHTML()}),n.innerHTML=u,r.forEach(function(n){n.populateControls()}));this._optionsFlyout.show();this._settingsProviders.forEach(function(n){n.update()});i("onOptions")};n._onAccounts=function(){var n=People.Accounts,t=Mail.Globals.platform;n.showAccountSettingsPage(t,Microsoft.WindowsLive.Platform.ApplicationScenario.mail,n.AccountSettingsPage.connectedAccounts)};n._onHelp=function(){Jx.help("mail")};n._onCommandsRequested=function(n){this.appendCommands(n.request.applicationCommands)}})
Jx.delayDefine(Mail,"SelectAllCheckBox",function(){"use strict";var n,t,i;Mail.SelectAllCheckBox=function(n,t,i){this._selectionHandler=t;this._model=t.model;this._collection=i;this._host=n;this._update();this._disposer=new Mail.Disposer(new Mail.EventHook(this._host,"click",this._onCheckboxClicked,this),new Mail.EventHook(this._collection,"endChanges",this._update,this),new Mail.EventHook(this._model,"selectionchanged",this._update,this))};n=Mail.SelectAllCheckBox.prototype;n._onCheckboxClicked=function(){Mail.writeProfilerMark("Mail.SelectAllCheckBox._onCheckboxClicked",Mail.LogEvent.start);this._host.checked?(this._selectionHandler.startSelectionMode(),this._model.selectAll()):this._selectionHandler.exitSelectionMode();this._updateToolTip();Mail.writeProfilerMark("Mail.SelectAllCheckBox._onCheckboxClicked",Mail.LogEvent.stop)};n.updateSelectionMode=function(){this._collection.count===1&&(this._host.checked=this._selectionHandler.isSelectionMode,this._updateToolTip())};n._update=function(){Mail.writeProfilerMark("Mail.SelectAllCheckBox._update",Mail.LogEvent.start);var i=this._model.selection().length,n=this._collection.count,t=n===0;Jx.setClass(this._host,"invisible",t);t||(this._host.checked=n===1?this._selectionHandler.isSelectionMode:i===n,this._updateToolTip());Mail.writeProfilerMark("Mail.SelectAllCheckBox._update",Mail.LogEvent.stop)};t=null;i=null;n._updateToolTip=function(){t||(t=Jx.res.getString("mailSelectAllCheckboxTooltipSelectAll"),i=Jx.res.getString("mailSelectAllCheckboxTooltipSelectNone"));this._host.title=this._host.checked?i:t};n.dispose=function(){Mail.writeProfilerMark("Mail.SelectAllCheckBox.dispose",Mail.LogEvent.start);Jx.dispose(this._disposer);this._disposer=null;this._collection=null;this._selectionHandler=null;this._model=null;this._host=null;Mail.writeProfilerMark("Mail.SelectAllCheckBox.dispose",Mail.LogEvent.stop)}})
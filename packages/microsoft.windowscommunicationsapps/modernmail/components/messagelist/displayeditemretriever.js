Jx.delayDefine(Mail,"DisplayedItemRetriever",function(){"use strict";function t(n){this._node=n}t.prototype={findMessage:function(){return{offset:0,item:this._node}}};Mail.DisplayedItemRetriever=function(n,t){this._view=n;this._node=t};var n=Mail.DisplayedItemRetriever.prototype;Mail.DisplayedItemRetriever.create=function(n,i){return i.type==="conversation"?new Mail.DisplayedItemRetriever(n,i):new t(i)};n.findMessage=function(n){var t=this._getDisplayedIndex(n),i=t===-1?-1:t+1,r=t===-1?null:this._node.item(t);return{offset:i,item:r}};n._getDisplayedIndex=function(n){var t=-1;return Jx.isNonEmptyString(n)&&(t=this._node.findIndexById(n)),t===-1&&(t=this._findIndexForDefaultItem()),t===-1&&this._node.children.count>=1&&(t=0),t};n._findIndexForDefaultItem=function(){return Mail.Collection.findIndex(this._node.children,function(n){return!n.pendingRemoval&&Mail.ViewCustomizations.shouldBeDefaultSelection(this._node.data,n.data,this._view)},this)}})
Jx.delayDefine(Mail,"SelectionHelper",function(){"use strict";Mail.SelectionHelper={};Mail.SelectionHelper.EventTypes={itemAdded:"itemAdded",itemRemoved:"itemRemoved",itemMoved:"itemMoved"};Mail.SelectionHelper.filterUnselectableItems=function(n,t){return t.getIndices().forEach(function(i){var r=n.item(i);r.selectable||t.remove(i)}),t};Mail.SelectionHelper.hasSelectableItems=function(n){var i,t,u,r;for(Mail.writeProfilerMark("Mail.SelectionHelper.hasSelectableItems",Mail.LogEvent.start),i=false,t=0,u=n.count;t<u;t++)if(r=n.item(t),r.selectable&&!r.pendingRemoval){i=true;break}return Mail.writeProfilerMark("Mail.SelectionHelper.hasSelectableItems",Mail.LogEvent.stop),i};Mail.SelectionHelper.preventEmptySelectionChanging=function(n,t){var i=t.detail.newSelection;return(Mail.SelectionHelper.filterUnselectableItems(n,i),i.count()===0&&Mail.SelectionHelper.hasSelectableItems(n))?(t.preventDefault(),true):false};var n={},t=Mail.SelectionHelper.EventTypes,i=Microsoft.WindowsLive.Platform.CollectionChangeType;n[i.itemAdded]=t.itemAdded;n[i.itemRemoved]=t.itemRemoved;n[i.itemChanged]=t.itemMoved;Mail.SelectionHelper.getEventType=function(i){return n[i]};Mail.SelectionHelper.getUpdatedIndex=function(n,t,i){var r;if(r=Mail.SelectionHelper.EventTypes,i!==-1)switch(n){case r.itemAdded:if(i>=t.index)return i+1;break;case r.itemRemoved:if(i>t.index)return i-1;break;case r.itemMoved:if(i===t.previousIndex)return t.index;var o=t.index<i,u=t.previousIndex<i,s=t.index>i,f=t.previousIndex>i,e=t.index===i;if(o&&f||f&&e)return i+1;if(u&&s||u&&e)return i-1}return i}})
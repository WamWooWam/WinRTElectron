Jx.delayDefine(Mail,"MessageListDataSource",function(){"use strict";Mail.MessageListDataSource=function(n){this._collection=n};Mail.MessageListDataSource.prototype.dispose=function(){this._collection=null};Mail.MessageListDataSource.prototype._fetchData=function(n,t,i){var r,u,o;Mail.log("MessageListDataSource_fetchData",Mail.LogEvent.start);var f=[],e=Math.max(0,n-t),s=Math.min(this._collection.count,n+i+1);for(r=e;r<s;r++)u=this._collection.item(r),f.push({key:u.objectId,data:u});return o=n-e,Mail.log("MessageListDataSource_fetchData",Mail.LogEvent.stop),{results:f,offset:o}};Mail.MessageListDataSource.maxCount=27e3;Mail.MessageListDataSource.prototype.itemsFromIndex=function(n,t,i){var r,u,f;return Mail.log("MessageListDataSource_itemsFromIndex",Mail.LogEvent.start),r=null,u=Math.min(this._collection.count,Mail.MessageListDataSource.maxCount),n>=u?r=WinJS.Promise.wrapError(new WinJS.ErrorFromName(WinJS.UI.FetchError.doesNotExist)):(f=this._fetchData(n,t,i),r=WinJS.Promise.wrap({items:f.results,offset:f.offset,totalCount:u,absoluteIndex:n})),Mail.log("MessageListDataSource_itemsFromIndex",Mail.LogEvent.stop),r};Mail.MessageListDataSource.prototype.getCount=function(){Mail.log("MessageListDataSource_count",Mail.LogEvent.start);var n=WinJS.Promise.wrap(this._collection.count);return Mail.log("MessageListDataSource_count",Mail.LogEvent.stop),n}})
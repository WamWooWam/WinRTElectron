Jx.delayDefine(Mail,"ViewFlyout",function(){"use strict";function t(n){Jx.mark("Mail.ViewFlyout."+n+",StartTA,Mail")}function i(n){Jx.mark("Mail.ViewFlyout."+n+",StopTA,Mail")}var u={folders:function(n,t,i){return new Mail.FolderFlyout(n,t,i)},people:function(n,t,i){return new Mail.PeopleFlyout(n,t,i)}},r=Mail.ViewFlyout=function(n,r,f,e){t("ctor");this.initComponent();this._switcher=n;this._account=r;this._createFlyout=e;this._type=f;this._content=null;this._flyout=null;this._element=null;this._jobSet=Jx.scheduler.createJobSet();this._jobSet.visible=false;Jx.scheduler.addJob(this._jobSet,Mail.Priority.viewFlyout,null,this._ensureFlyout,this);i("ctor")},n;Jx.augment(r,Jx.Component);Jx.augment(r,Jx.Events);n=r.prototype;n.dispose=function(){this._jobSet.cancelJobs();Jx.scheduler.addJob(null,Mail.Priority.viewFlyout,null,this._lazyDispose,this)};n._lazyDispose=function(){Jx.dispose(this._flyout);Jx.dispose(this._jobSet)};n._ensureFlyout=function(){this._flyout||(t("ensureFlyout"),this._flyout=this._createFlyout(this,this._type),Jx.scheduler.addJob(this._jobSet,Mail.Priority.viewFlyout,null,this._ensureContent,this),i("ensureFlyout"))};n.getUI=function(n){n.html="<div id='"+this._id+"' class='viewFlyoutContainer'><\/div>"};n.activateUI=function(){this._element=document.getElementById(this._id);Jx.Component.prototype.activateUI.call(this)};n._ensureContent=function(){var n,r;this._content||(t("ensureContent"),t("ensureContent:create"),n=this._content=u[this._type](this._switcher,this._account,this._jobSet,this),this.appendChild(n),i("ensureContent:create"),t("ensureContent:getUI"),r=Jx.getUI(n).html,i("ensureContent:getUI"),t("ensureContent:innerHTML"),this._element.innerHTML=r,i("ensureContent:innerHTML"),t("ensureContent:activateUI"),n.activateUI(),i("ensureContent:activateUI"),i("ensureContent"))};n.show=function(n){t("show");this._ensureFlyout();this._ensureContent();var r=this._flyout.show(n);return i("show"),r};n.hide=function(){var n=this._flyout;return n?n.hide():WinJS.Promise.as()};n.setEntryPoint=function(n){var t=this._flyout;t&&t.setEntryPoint(n)};Object.defineProperty(n,"isVisible",{get:function(){var n=this._flyout;return n&&n.isVisible}});n.beforeShow=function(){this._jobSet.visible=true;this._content.beforeShow();this.raiseEvent("beforeShow",{target:this})};n.afterHide=function(){this._jobSet.visible=false;this._content.afterHide();this.raiseEvent("afterHide",{target:this})}})
Jx.delayDefine(Mail,"ViewSwitcher",function(){"use strict";function t(n){Jx.mark("Mail.ViewSwitcher."+n+",StartTA,Mail")}function i(n){Jx.mark("Mail.ViewSwitcher."+n+",StopTA,Mail")}var u=Mail.UIDataModel.MailView,r=Mail.ViewSwitcher=function(n,r,u,f,e){t("ctor");this.initComponent();this._host=r;this._selection=u;var o=u.account,s=u.view,h=f.getLocalAccountSettings(u.account);this._accountViews=new Mail.AccountViews(o,this,h,e);this.appendChild(this._accountViews);this._hooks=new Mail.Disposer(new Mail.EventHook(u,"navChanged",this._onNavigation,this));this._onViewSelected(s);i("ctor")},n;Jx.augment(r,Jx.Component);n=r.prototype;n.shutdownComponent=function(){Jx.dispose(this._hooks);Jx.Component.prototype.shutdownComponent.call(this)};n.getUI=function(n){t("getUI");n.html=Jx.getUI(this._accountViews).html;i("getUI")};n.activateUI=function(){t("activateUI");Jx.Component.prototype.activateUI.call(this);i("activateUI")};n.selectViewAsync=function(n){t("selectViewAsync");this._host.selectViewAsync(n);i("selectViewAsync")};n._selectDefaultView=function(){t("selectDefaultView");var n=this._selection.account.inboxView;n&&this.selectViewAsync(n);i("selectDefaultView")};n._onNavigation=function(n){this._onViewSelected(n.target.view)};n._onViewSelected=function(n){this._accountViews.onViewSelected(n);this._deleteListener=this._hooks.replace(this._deleteListener,new Mail.EventHook(n,"deleted",this._onSelectedViewDeleted,this));this._changedListener=this._hooks.replace(this._changedListener,new Mail.EventHook(n,"changed",this._onSelectedViewChanged,this))};n._onSelectedViewDeleted=function(){this._selectDefaultView()};n._onSelectedViewChanged=function(n){var t=n.target,i=t.sourceObject;(Mail.Validators.hasPropertyChanged(n,"isEnabled")&&!t.isEnabled||Mail.Validators.hasPropertyChanged(n,"parentFolder")&&i&&i.underDeletedItems)&&this._selectDefaultView()};n.getFlyout=function(n){return this._accountViews.getFlyout(n)};Object.defineProperty(n,"isWide",{get:function(){return this._host.isWide}});n.addListener=function(n,t,i){return this._host.addListener(n,t,i)};n.removeListener=function(n,t,i){return this._host.removeListener(n,t,i)}})
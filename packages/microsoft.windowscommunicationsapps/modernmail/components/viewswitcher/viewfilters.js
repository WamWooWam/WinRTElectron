Jx.delayDefine(Mail,"ViewFilters",function(){"use strict";function s(n,t){this._includedTypes=n;this._excludedTypes=t}function h(n){for(var u=n.objectType,e=n.type,r,t=0,f=i.length;t<f;++t)if(r=i[t],u===r.objectType&&(u!=="MailView"||e===r.viewType))return t}function c(){}function t(n){this._callback=null;this._context=null;this._properties=n}function r(){t.call(this,["isPinnedToNavPane","canChangePinState"])}function u(){t.call(this,["isEnabled"])}function e(){t.call(this,["type","name"])}function o(n){this._lastFirst=n.peopleManager.nameSortOrder;t.call(this,["sortName"])}var l=Microsoft.WindowsLive.Platform,n=l.MailViewType,i=[{objectType:"MailView",viewType:n.inbox},{objectType:"MailView",viewType:n.newsletter},{objectType:"MailView",viewType:n.social},{objectType:"FoldersIcon"},{objectType:"MailView",viewType:n.allPinnedPeople},{objectType:"MailView",viewType:n.flagged},],a=Mail.ViewFilters={topLevel:i.filter(function(n){return n.objectType==="MailView"}).map(function(n){return n.viewType}),people:[n.allPinnedPeople,n.person],categories:[n.newsletter,n.social],folders:[n.inbox,n.draft,n.sentItems,n.outbox,n.junkMail,n.deletedItems,n.userGeneratedFolder],filterByType:function(n,t,i){return new Mail.FilteredCollection(new s(t,i),n)},filterPinned:function(n){return new Mail.FilteredCollection(new r,n)},filterEnabled:function(n){return new Mail.FilteredCollection(new u,n)},topLevelSort:function(n){return new Mail.SortedCollection(new c,n)},sortFolders:function(n){return new Mail.SortedCollection(new e,n)},sortPeople:function(n,t){return new Mail.SortedCollection(new o(t),n)}},f;s.prototype={matches:function(n){var r=false,t,i;return n&&(t=n.type,i=this._excludedTypes,r=this._includedTypes.indexOf(t)!==-1&&(!i||i.indexOf(t)===-1)),r},setCallback:Jx.fnEmpty,hook:Jx.fnEmpty,unhook:Jx.fnEmpty};c.prototype={compare:function(n,t){return h(n)-h(t)},setCallback:Jx.fnEmpty,hook:Jx.fnEmpty,unhook:Jx.fnEmpty};t.prototype={setCallback:function(n,t){this._callback=n;this._context=t},hook:function(n){n.addListener("changed",this._changed,this)},unhook:function(n){n.removeListener("changed",this._changed,this)},_changed:function(n){Mail.Validators.havePropertiesChanged(n,this._properties)&&this._callback.call(this._context,n.target)}};Jx.inherit(r,t);r.prototype.matches=function(n){return n.isPinnedToNavPane&&n.canChangePinState};Jx.inherit(u,t);u.prototype.matches=function(n){return n.isEnabled};f=a.folders;Jx.inherit(e,t);e.prototype.compare=function(n,t){return f.indexOf(n.type)-f.indexOf(t.type)||n.name.localeCompare(t.name)};Jx.inherit(o,t);o.prototype.compare=function(n,t){var i=this._lastFirst,r=n.getSortName(i),u=t.getSortName(i);return r.localeCompare(u)}})
Jx.delayDefine(Mail,"ImageDownloadStatus",function(){"use strict";var n,i,r,u,t;Mail.ImageDownloadStatus=function(){this._host=null};n=Mail.ImageDownloadStatus.prototype;n.initialize=function(n){this._host=n;this._downloadInProgressText=Jx.escapeHtml(Jx.res.getString("messageImageDownloadInProgress"));this._downloadErrorText=Jx.escapeHtml(Jx.res.getString("messageImageDownloadError"));n.innerHTML='<progress class="mailReadingPaneImageDownloadStatusProgressLine" aria-hidden="true" aria-label="'+this._downloadInProgressText+'"><\/progress><div class="mailReadingPaneImageDownloadStatusError typeSizeNormal" aria-hidden="true">'+this._downloadErrorText+'<\/div><div class="mailReadingPaneImageAnouncerHost"><\/div>';this._progressRingElement=n.querySelector(".mailReadingPaneImageDownloadStatusProgressLine");this._downloadErrorElement=n.querySelector(".mailReadingPaneImageDownloadStatusError");this._state=new t(this);this._announcer=new Mail.Announcer(n.querySelector(".mailReadingPaneImageAnouncerHost"))};n.dispose=function(){this._host=null;this._state.dispose();this._state=null;this._announcer.dispose();this._announcer=null};n._transitionToState=function(n){this._state&&(this._state.dispose(),this._state=new n(this))};n.newMessageSelected=function(){this._transitionToState(i)};n.downloadDelayed=function(){this._transitionToState(r)};n.downloadError=function(){this._transitionToState(u)};n.downloadComplete=function(){this._transitionToState(t)};n.clear=function(){this._transitionToState(t)};n.setProgressRingShowing=function(n){n&&Jx.hasClass(this._progressRingElement,"hidden")&&this._announcer.speak(this._downloadInProgressText);Jx.setClass(this._progressRingElement,"hidden",!n);Mail.setAttribute(this._progressRingElement,"aria-hidden",(!n).toString())};n.setErrorTextShowing=function(n){n&&Jx.hasClass(this._downloadErrorElement,"hidden")&&this._announcer.speak(this._downloadErrorText);Jx.setClass(this._downloadErrorElement,"hidden",!n);Mail.setAttribute(this._downloadErrorElement,"aria-hidden",(!n).toString())};i=function(n){this._downloadStatus=n;n.setProgressRingShowing(false);n.setErrorTextShowing(false);this._timer=new Jx.Timer(2e3,this._handleSlowDownload,this)};i.prototype={dispose:function(){this._timer.dispose();this._downloadStatus=null},_handleSlowDownload:function(){this._downloadStatus.downloadDelayed()}};r=function(n){this._downloadStatus=n;n.setProgressRingShowing(true);n.setErrorTextShowing(false)};r.prototype={dispose:function(){this._downloadStatus=null}};u=function(n){this._downloadStatus=n;n.setProgressRingShowing(false);n.setErrorTextShowing(true)};u.prototype={dispose:function(){this._downloadStatus=null}};t=function(n){this._downloadStatus=n;n.setProgressRingShowing(false);n.setErrorTextShowing(false)};t.prototype={dispose:function(){this._downloadStatus=null}}})
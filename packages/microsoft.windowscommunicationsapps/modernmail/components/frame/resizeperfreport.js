Jx.delayDefine(Mail,"ResizePerfReport",function(){"use strict";function r(n){Jx.mark("ResizePerfReport."+n)}function t(n){Jx.mark("ResizePerfReport:"+n+",StartTM,ResizePerfReport")}function i(n){Jx.mark("ResizePerfReport:"+n+",StopTM,ResizePerfReport")}Mail.ResizePerfReport=function(n){this._guiState=n;this._disposer=new Mail.Disposer(Mail.EventHook.createGlobalHook("bodyResized",this._onBodyResized,this));this._previousIsThreePane=this._guiState.isThreePane;this._viewPortLoaded=true;this._reportResize=this._reportResize.bind(this);this._enableReport=false;this._readingPaneResized=true;this._viewLoadedHandler=null};var n=Mail.ResizePerfReport.prototype;n._onLoadingStateChanged=function(){if(!this._viewPortLoaded){var n=Mail.MessageListItemFactory.listView;n.loadingState==="viewPortLoaded"&&(this._viewLoadedHandler.dispose(),this._viewLoadedHandler=null,this._viewPortLoaded=true,this._checkResizeComplete())}};n._onBodyResized=function(){this._readingPaneResized||(this._readingPaneResized=true,this._checkResizeComplete())};n._checkResizeComplete=function(){this._viewPortLoaded&&this._readingPaneResized&&this._enableReport&&(t("requestAnimationFrame"),window.requestAnimationFrame(this._reportResize),this._enableReport=false)};n._reportResize=function(){i("requestAnimationFrame");var n=this._guiState.isThreePane,t=n!=this._previousIsThreePane;r("isMajor = "+t);Jx.ptStopResize(Jx.TimePoint.responsive,t,false,this._guiState.width,window.innerHeight);this._previousIsThreePane=n;i("Async Work")};n.viewStateComplete=function(){if(this._guiState.isMessageListVisible){var n=Mail.MessageListItemFactory.listView;n&&(this._viewLoadedHandler||(this._viewLoadedHandler=new Mail.EventHook(n,"loadingstatechanged",this._onLoadingStateChanged,this)),this._viewPortLoaded=false)}this._guiState.isReadingPaneVisible&&(this._readingPaneResized=false);this._readingPaneResized&&this._viewPortLoaded||(t("Async Work"),this._enableReport=true)};n.dispose=function(){this._disposer.dispose();this._disposer=null;Jx.EventManager.removeListener(null,"bodyResized",this._onBodyResized,this)}})
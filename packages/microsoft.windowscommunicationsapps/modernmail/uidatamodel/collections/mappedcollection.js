Jx.delayDefine(Mail,"MappedCollection",function(){"use strict";Mail.MappedCollection=function(n,t,i,r){Mail.CollectionWrapper.call(this,n,r||"map:"+n.name);this._factory=t;this._context=i;this._items=Array(n.count)};Jx.inherit(Mail.MappedCollection,Mail.CollectionWrapper);Mail.MappedCollection.prototype.dispose=function(){this._collection&&(Mail.CollectionWrapper.prototype.dispose.call(this),this._items.forEach(Jx.dispose),Jx.dispose(this._collection),this._collection=null)};Object.defineProperty(Mail.MappedCollection.prototype,"count",{get:function(){return this._items.length},enumerable:true});Mail.MappedCollection.prototype._createItem=function(n,t){return this._factory.call(this._context,n,t)};Mail.MappedCollection.prototype.item=function(n){var t=this._items[n];return t||(t=this._items[n]=this._createItem(this._collection.item(n),n)),t};Mail.MappedCollection.prototype._onCollectionChanged=function(n){var t=this._items,i=[],r=Microsoft.WindowsLive.Platform.CollectionChangeType,u,f;switch(n.eType){case r.itemAdded:u=this._createItem(this._collection.item(n.index),n.index);t.splice(n.index,0,u);break;case r.itemRemoved:i=t.splice(n.index,1);break;case r.itemChanged:f=t.splice(n.previousIndex,1)[0];t.splice(n.index,0,f);break;case r.reset:i=t;this._items=Array(this._collection.count)}this._raiseChange({eType:n.eType,objectId:n.objectId,index:n.index,previousIndex:n.previousIndex,removed:i});i.forEach(Jx.dispose)}})
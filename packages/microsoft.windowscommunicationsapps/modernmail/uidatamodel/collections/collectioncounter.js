Jx.delayDefine(Mail,"CollectionCounter",function(){"use strict";var n=999,t=200,i="⁺";Mail.CollectionCounter=function(i,r,u){Mail.CollectionWrapper.call(this,i,"count:"+i.name);this._max=r||n;this._delay=u||t;this._timer=null;this._onTimeout=this._onTimeout.bind(this)};Jx.inherit(Mail.CollectionCounter,Mail.CollectionWrapper);Mail.CollectionCounter.prototype.dispose=function(){this._collection&&(Mail.CollectionWrapper.prototype.dispose.call(this),clearTimeout(this._timer),Jx.dispose(this._collection),this._collection=null)};Object.defineProperty(Mail.CollectionCounter.prototype,"displayCount",{get:function(){var n=this._collection.count;return n>0?String(Math.min(n,this._max)):""},enumerable:true});Object.defineProperty(Mail.CollectionCounter.prototype,"overflowGlyph",{get:function(){return this._collection.count>this._max?i:""},enumerable:true});Mail.CollectionCounter.prototype.item=function(n){return this._collection[n]};Mail.CollectionCounter.prototype._onCollectionChanged=function(n){n.eType===Microsoft.WindowsLive.Platform.CollectionChangeType.reset?(clearTimeout(this._timer),this._onTimeout()):this._timer||(this._timer=setTimeout(this._onTimeout,this._delay))};Mail.CollectionCounter.prototype._onTimeout=function(){this._timer=null;this._raiseChange({eType:Microsoft.WindowsLive.Platform.CollectionChangeType.reset})}})
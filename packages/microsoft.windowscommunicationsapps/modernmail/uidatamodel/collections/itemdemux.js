Jx.delayDefine(Mail,"ItemDemux",function(){"use strict";var t=Mail.ItemDemux=function(n){this.initEvents();this._collection=n;this._disposer=new Mail.Disposer(new Mail.EventHook(n,"collectionchanged",this._onCollectionChanged,this));this._initHooks()},n;Jx.augment(t,Jx.Events);t.createHook=function(n,i,r){return new Mail.EventHook(new t(n),"itemchanged",i,r)};n=t.prototype;n.dispose=function(){this._disposer.dispose()};n._initHooks=function(){this._hooks=this._disposer.replace(this._hooks,Mail.Collection.map(this._collection,this._makeHook,this))};n._makeHook=function(n){return new Mail.EventHook(n,"changed",this._onItemChanged,this)};n._onCollectionChanged=function(n){var t=Microsoft.WindowsLive.Platform.CollectionChangeType,i=n.index,r=this._hooks;switch(n.eType){case t.itemAdded:r.splice(i,0,this._makeHook(this._collection.item(i)));break;case t.itemRemoved:Jx.dispose(r.splice(i,1)[0]);break;case t.itemChanged:r.splice(i,0,r.splice(n.previousIndex,1)[0]);break;case t.reset:this._initHooks()}};n._onItemChanged=function(n){var t=Array.prototype.slice.call(n);t.target=this;t.collection=this._collection;t.item=n.target;this.raiseEvent("itemchanged",t)}})
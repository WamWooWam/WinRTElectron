Jx.delayDefine(Mail.UIDataModel,"MailFolder",function(){"use strict";var n=Mail.UIDataModel,t=Microsoft.WindowsLive.Platform,i=t.MailFolderType,r,u;n.MailFolder=function(n){this._platformMailFolder=n;this._folderHook=null;this._accountSourceId=null;this._account=null};Jx.augment(n.MailFolder,Jx.Events);n.MailFolder.prototype.dispose=function(){Jx.dispose(this._folderHook)};n.MailFolder.prototype.addListener=function(n,t,i){this._folderHook||(this._folderHook=new Mail.EventHook(this._platformMailFolder,"changed",function(n){this._raiseChanged(Array.prototype.slice.call(n))},this));Jx.Events.addListener.call(this,n,t,i)};n.MailFolder.prototype.addEventListener=n.MailFolder.prototype.addListener;n.MailFolder.prototype.removeListener=function(n,t,i){Jx.Events.removeListener.call(this,n,t,i)};n.MailFolder.prototype.removeEventListener=n.MailFolder.prototype.removeListener;n.MailFolder.prototype.ensureSyncEnabled=function(){var r;Mail.writeProfilerMark("MailFolder.ensureSyncEnabled",Mail.LogEvent.start);var n=this._platformMailFolder,i=this.account,u=i?i.syncType!==t.SyncType.manual:false;if(!n.isLocalMailFolder&&!n.selectionDisabled&&u){r=n.objectId;Mail.writeProfilerMark("MailFolder.ensureSyncEnabled - startSyncFolderContents for folder - "+r);try{n.startSyncFolderContents(false)}catch(f){Jx.log.exception("folder.startSyncFolderContents id="+n.objectId,f)}}Mail.writeProfilerMark("MailFolder.ensureSyncEnabled",Mail.LogEvent.stop)};n.MailFolder.prototype._platformMailFolder=null;Object.defineProperty(n.MailFolder.prototype,"platformMailFolder",{get:function(){return this._platformMailFolder},enumerable:true});Object.defineProperty(n.MailFolder.prototype,"objectId",{get:function(){return this._platformMailFolder.objectId},enumerable:true});Object.defineProperty(n.MailFolder.prototype,"accountId",{get:function(){return this._platformMailFolder.accountId},enumerable:true});Object.defineProperty(n.MailFolder.prototype,"isPinnedToNavPane",{get:function(){return this._platformMailFolder.isPinnedToNavPane},enumerable:true});Object.defineProperty(n.MailFolder.prototype,"specialMailFolderType",{get:function(){return this._platformMailFolder.specialMailFolderType},enumerable:true});Object.defineProperty(n.MailFolder.prototype,"folderName",{get:function(){return this._getFolderName()},enumerable:true});Object.defineProperty(n.MailFolder.prototype,"shouldShowUnreadCount",{get:function(){return this._platformMailFolder.isLocalMailFolder||this._platformMailFolder.syncFolderContents},enumerable:true});Object.defineProperty(n.MailFolder.prototype,"isOutbox",{get:function(){var n=this.specialMailFolderType;return n===i.outbox},enumerable:true});Object.defineProperty(n.MailFolder.prototype,"isOutboundFolder",{get:function(){var n=this.specialMailFolderType;return n===i.outbox||n===i.sentItems||n===i.drafts},enumerable:true});Object.defineProperty(n.MailFolder.prototype,"accountSourceId",{get:function(){if(!Jx.isNonEmptyString(this._accountSourceId)){var n=this.account;this._accountSourceId=n.sourceId}return this._accountSourceId},enumerable:true});Object.defineProperty(n.MailFolder.prototype,"account",{get:function(){if(!this._account){var n=Mail.Globals.platform;this._account=n.accountManager.loadAccount(this.accountId)}return this._account},enumerable:true});r=null;n.MailFolder.prototype.getView=function(n){var u=t.MailViewType;r||(r={},r[i.inbox]=u.inbox,r[i.deletedItems]=u.deletedItems,r[i.drafts]=u.draft,r[i.junkMail]=u.junkMail,r[i.outbox]=u.outbox,r[i.sentItems]=u.sentItems,r[i.userGenerated]=u.userGeneratedFolder,r[i.allMail]=u.userGeneratedFolder,r[i.starred]=u.userGeneratedFolder,r[i.important]=u.userGeneratedFolder);var e=new Mail.Account(this.account,n),f=r[this._platformMailFolder.specialMailFolderType];return f===u.userGeneratedFolder?e.queryView(f,this.objectId):e.getView(f)};n.MailFolder.prototype.getChildFolderCollection=function(){return this._platformMailFolder.getChildFolderCollection(false)};n.MailFolder.prototype.recordAction=function(n){this._platformMailFolder.recordAction(n)};n.MailFolder.prototype._raiseChanged=function(n){n.target=this;n.detail=[n];this.raiseEvent("changed",n)};u={};u[t.MailFolderType.inbox]="mailFolderNameInbox";u[t.MailFolderType.drafts]="mailFolderNameDrafts";u[t.MailFolderType.deletedItems]="mailFolderNameDeletedItems";u[t.MailFolderType.sentItems]="mailFolderNameSentItems";u[t.MailFolderType.outbox]="mailFolderNameOutbox";u[t.MailFolderType.junkMail]="mailFolderNameJunkMail";u[t.MailFolderType.allMail]="mailFolderNameAllMail";u[t.MailFolderType.starred]="mailFolderNameStarred";u[t.MailFolderType.important]="mailFolderNameImportant";u[t.MailFolderType.userGenerated]="mailMessageListFolderNameDefault";n.MailFolder.prototype._getFolderName=function(){return n.MailFolder.getName(this._platformMailFolder)};n.MailFolder.getName=function(n){return n.folderName||Jx.res.getString(u[n.specialMailFolderType])}})
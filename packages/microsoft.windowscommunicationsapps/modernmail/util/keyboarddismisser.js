Jx.delayDefine(Mail,"KeyboardDismisser",function(){"use strict";var n=Mail.KeyboardDismisser=function(n,t){this._clickHook=new Mail.EventHook(n,"click",this._hideKeyboard,this);this._job=null;this._selection=t};n.prototype={dispose:function(){Jx.dispose(this._clickHook);Jx.dispose(this._job);this._clickHook=null;this._job=null},_hideKeyboard:function(n){if(n.pointerType==="touch"){var t=!this._selection,i=t?null:this._selection.message;(t||i&&i.isDraft)&&(Jx.dispose(this._job),this._job=Jx.scheduler.addJob(null,Mail.Priority.hideKeyboard,"Hide IHM keyboard",function(){var t=document.activeElement,n=document.getElementById(Mail.CompApp.rootElementId);n&&t&&(Mail.setActiveHTMLElement(n),this._job=new Jx.Immediate(function(){document.activeElement===n&&Mail.setActiveHTMLElement(t)}))},this))}}}})
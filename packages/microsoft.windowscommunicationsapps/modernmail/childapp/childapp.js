(function(){"use strict";function n(){return window.getMailPlatform()}window.addEventListener("DOMContentLoaded",function(){(document.title=Jx.res.getString("mailAppTitle"),Jx.app=new Jx.Application(Jx.AppId.mail,true),Jx.log=new Jx.Log,Jx.log.enabled=true,Jx.log.level=Jx.LOG_VERBOSE,Mail.log("Mail_FirstAvailable"),Jx.launch.getCurrentAppStatus()!==Jx.Launch.AppStatus.mandatoryUpdate)&&(WinJS.Promise.then(n(),function(n){var t=Jx.root=new Mail.CompApp(n);t.buildUI();document.addEventListener("msvisibilitychange",t.handleVisibilityChange,false)}),Mail.log("Mail_DOMContentLoaded_end"))},false)})();Jx.delayDefine(Mail,"CompApp",function(){"use strict";var t=Mail.BaseApp,n;Mail.CompApp=function(n){t.call(this,n)};n=Mail.CompApp.prototype;Jx.mix(n,t.prototype);n._onResume=function(){this._platform.resume()};n._onSuspend=function(){this._platform.suspend()};n.handleVisibilityChange=function(n){n.target.msHidden||Jx.glomManager.getParentGlom().postMessage("childGlomVisible")};n.buildUI=function(){this._buildFrame()};n._buildFrame=function(){this._appState=new Mail.AppState;t.prototype._buildFrame.call(this,this._appState);this._frame.postStartupWork();Mail.log("load share handler",Mail.LogEvent.start);this._shareHandler=new Mail.ShareHandler;Mail.log("load share handler",Mail.LogEvent.stop);Mail.log("Mail_Launch_DeferredTasks",Mail.LogEvent.start);Jx.isObject(Jx.launch)&&Jx.isFunction(Jx.launch.startDeferredTasks)&&Jx.launch.startDeferredTasks(this._platform);Mail.log("Mail_Launch_DeferredTasks",Mail.LogEvent.stop);Mail.log("ComposeLoad",Mail.LogEvent.start);Mail.Utilities.ComposeHelper.ensureComposeFiles();Mail.log("ComposeLoad",Mail.LogEvent.stop)};n.activateUI=function(){t.prototype.activateUI.call(this);var n=Jx.activation;this._disposer=new Mail.Disposer(new Mail.EventHook(n,n.resuming,this._onResume,this),new Mail.EventHook(n,n.suspending,this._onSuspend,this))};n.deactivateUI=function(){t.prototype.deactivateUI.call(this);Jx.dispose(this._disposer)};Mail.CompApp.rootElementId="idCompApp"})
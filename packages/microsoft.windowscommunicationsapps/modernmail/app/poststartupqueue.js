Jx.delayDefine(Mail,"PostStartupQueue",function(){"use strict";Mail.PostStartupQueue=function(n){this._queue=[];this._work=this._work.bind(this);this._isRunning=false;this._finishedQueuing=false;this._pendingTimerId=null;n?(this._splashScreenDismissed=!n.isShown,this._splashScreen=n,this._splashScreenDismissed||n.addListener(Mail.SplashScreen.Events.dismissed,this.onSplashScreenDismissed,this)):this._splashScreenDismissed=true};Mail.PostStartupQueue.waitBetweenJobs=100;Mail.PostStartupQueue.initialWait=150;Mail.PostStartupQueue.prototype.queue=function(n,t){this._queue.push({description:n,func:t})};Mail.PostStartupQueue.prototype.onSplashScreenDismissed=function(){this._splashScreen.removeListener(Mail.SplashScreen.Events.dismissed,this.onSplashScreenDismissed,this);this._splashScreenDismissed=true;this._start()};Mail.PostStartupQueue.prototype.finishedQueuing=function(){this._finishedQueuing=true;this._start()};Mail.PostStartupQueue.prototype._start=function(){this._splashScreenDismissed&&this._finishedQueuing&&!this._isRunning&&this._queue.length>0&&(this._isRunning=true,this._pendingTimerId=window.setTimeout(this._work,Mail.PostStartupQueue.initialWait))};Mail.PostStartupQueue.prototype.dispose=function(){Jx.dispose(this._pendingJob);this._isRunning=false;this._queue=[];Jx.isNumber(this._pendingTimerId)&&(clearTimeout(this._pendingTimerId),this._pendingTimerId=null)};Mail.PostStartupQueue.prototype._work=function(){if(this._pendingTimerId=null,this._isRunning){var n=this._queue.shift(),t=n.description,i=n.func;this._pendingJob=Jx.scheduler.addJob(null,Mail.Priority.postStartupWork,"Mail.PostStartupQueue._work - "+t,function(){Jx.log.info("Mail.PostStartupQueue._work started: "+t);i();this._queue.length>0?this._pendingTimerId=window.setTimeout(this._work,Mail.PostStartupQueue.waitBetweenJobs):(this._isRunning=false,Jx.log.info("post startup queue emptied"))},this)}}})
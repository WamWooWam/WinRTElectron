Jx.delayDefine(Mail,"AppSettings",function(){"use strict";var i={threadingOptionChanged:"threadingOptionChanged",fontSettingChanged:"fontSettingChanged"},n=Mail.AppSettings=function(){this._roamingSettings=Jx.appData.roamingSettings().container("Mail");this._localSettings=Jx.appData.localSettings().container("Mail");[{propertyName:"isThreadingEnabled",key:"threading",converter:t,defaultValue:true,eventName:i.threadingOptionChanged,cacheSetting:true},{propertyName:"autoMarkAsRead",key:"auto-mark-as-read",converter:t,defaultValue:true,cacheSetting:true},{propertyName:"dismissedWelcomeMessage",converter:t,defaultValue:false},{propertyName:"dismissedInboxIntro",converter:t,defaultValue:false},{propertyName:"dismissedNewsletterIntro",converter:t,defaultValue:false},{propertyName:"dismissedSocialIntro",converter:t,defaultValue:false},{propertyName:"dismissedAllFavoritesIntro",converter:t,defaultValue:false},{propertyName:"composeFontFamily",key:"compose-font-family",converter:u,defaultValue:null,eventName:i.fontSettingChanged},{propertyName:"composeFontSize",key:"compose-font-size",converter:u,defaultValue:null,eventName:i.fontSettingChanged},{propertyName:"composeFontColor",key:"compose-font-color",converter:u,defaultValue:null,eventName:i.fontSettingChanged},{propertyName:"readingDirection",key:"reading-direction",converter:f(n.Direction),defaultValue:n.Direction.auto,localSetting:true}].forEach(function(n){this._defineSetting(n.propertyName,n.key,n.converter,n.defaultValue,n.eventName,n.cacheSetting,n.localSetting)},this)};n.Events=i;Jx.augment(n,Jx.Events);var r=n.prototype,t=n.BooleanConverter={toSetting:function(n){return n?"1":"0"},fromSetting:function(n,t){return t?n!="0":n=="1"}},u=n.StringConverter={toSetting:function(n){return n},fromSetting:function(n,t){return Jx.isNonEmptyString(n)?n:t}},f=n.EnumConverter=function(n){return{toSetting:function(t){return t},fromSetting:function(t,i){return Jx.isNonEmptyString(t)?t:i}}};r._defineSetting=function(n,t,i,r,u,f,e){t=t||n;var o,s=e?this._localSettings:this._roamingSettings;f&&(o=i.fromSetting(s.get(t),r));Object.defineProperty(this,n,{get:function(){return f?o:i.fromSetting(s.get(t),r)},set:function(n){f&&n===o||(o=n,s.set(t,i.toSetting(n)),u&&this.raiseEvent(u))},enumerable:true})};Object.defineProperty(r,"isRetailExperience",{get:function(){return Jx.appData.localSettings().get("RetailExperience")},enumerable:true});r.getLocalSettings=function(){return this._localSettings};r.getLocalAccountSettings=function(n){return this._localSettings.container(n.objectId)};r.dispose=function(){this._roamingSettings.dispose();this._localSettings.dispose()};n.openAccountUI=function(n){People.Accounts.showAccountSettingsPage(Mail.Globals.platform,Microsoft.WindowsLive.Platform.ApplicationScenario.mail,People.Accounts.AccountSettingsPage.perAccountSettings,{launchedFromApp:true,account:n})};n.Direction={ltr:"ltr",auto:"auto",rtl:"rtl"}})
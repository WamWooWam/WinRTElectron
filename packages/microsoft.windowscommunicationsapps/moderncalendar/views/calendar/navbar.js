Jx.delayDefine(Calendar,"NavBar",function(){function r(n){Jx.mark("Calendar.NavBar."+n+",StartTA,Calendar")}function u(n){Jx.mark("Calendar.NavBar."+n+",StopTA,Calendar")}var i=WinJS.UI.Orientation,t=Jx.res,f=[{view:"agenda",icon:"",label:t.getString("AgendaCommand")},{view:"day",icon:"",label:t.getString("DayCommand")},{view:"workweek",icon:"",label:t.getString("WorkWeekCommand")},{view:"week",icon:"",label:t.getString("WeekCommand")},{view:"month",icon:"",label:t.getString("MonthCommand")},],o=[{view:"agenda",icon:"",label:t.getString("AgendaCommand")},{view:"day",icon:"",label:t.getString("DayCommand")},],e=Calendar.NavBar=function(){this.initComponent();this._id="calNavBar";this._companion=false;this._navBar=null;this._navBarElt=null;this._navBarContainer=null;this._onInvoked=this._onInvoked.bind(this);var n=this._onSnapChanged=this._onSnapChanged.bind(this),t=this._snapListener=matchMedia("(max-width: 499px)");t.addListener(n)},n;Jx.augment(e,Jx.Component);n=e.prototype;n.dispose=function(){this._snapListener&&(this._snapListener.removeListener(this._onSnapChanged),this._snapListener=null);this._onSnapChanged=null};n.buildUI=function(n){if(r("buildUI"),this._companion!==n&&(this.destroyUI(),this._companion=n),!this._navBar){document.body.insertAdjacentHTML("beforeend",'<div id="navBar" class="win-ui-dark"><div><div id="calNBC"><\/div><\/div><\/div>');this._navBarElt=$.id("navBar");this._navBar=new WinJS.UI.NavBar(this._navBarElt);var t=this._companion?o:f,e=this._navBarContainer=new WinJS.UI.NavBarContainer($.id("calNBC"),{data:new WinJS.Binding.List(t),layout:this._snapListener.matches?i.vertical:i.horizontal});e.addEventListener("invoked",this._onInvoked);$(".win-navbarcommand").each(function(n,t){t.classList.add("cal-navbar-"+f[n].view)})}u("buildUI")};n.destroyUI=function(){r("destroyUI");this._navBar&&(this._navBarContainer.dispose(),this._navBarContainer=null,this._navBar.dispose(),this._navBar=null,this._navBarElt.outerHTML="",this._navBarElt=null);u("destroyUI")};n.shutdownUI=function(){this.destroyUI();Jx.Component.prototype.shutdownUI.call(this)};n.hide=function(){this._navBar&&this._navBar.hide()};n.show=function(){this._navBar&&this._navBar.show()};n._onInvoked=function(n){this._navBar.hide();this.fire("goToView",{view:n.detail.data.view})};n._onSnapChanged=function(n){this._navBar&&(this._navBarContainer.layout=n.matches?i.vertical:i.horizontal)}})
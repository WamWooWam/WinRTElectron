(function(){var n=Calendar.Router=function(){this._source=null;this._routes={};this._onMessage=this._onMessage.bind(this)};n.delimiter="/";n.prototype.route=function(t,i,r){var u=t.split(n.delimiter);this._route(u,i,r)};n.prototype.dispatch=function(t,i){var r=t.split(n.delimiter);this._dispatch(r,i)};n.prototype.initialize=function(n){this._source=n;this._source.addEventListener("message",this._onMessage)};n.prototype.postMessage=function(n){this._source.postMessage(n)};n.prototype.dispose=function(){this._source.removeEventListener("message",this._onMessage);this._source=null};n.prototype._route=function(n,t,i){for(var r=this._routes,u,f;1<n.length;)u=n.shift(),f=r[u],r=f?f:r[u]={};r[n.shift()]={fn:t,ctx:i}};n.prototype._dispatch=function(n,t){for(var i=this._routes;n.length&&i;)i=i[n.shift()];i&&i.fn.call(i.ctx,t)};n.prototype._onMessage=function(t){var i=t.data,r=i.name.split(n.delimiter);this._dispatch(r,i)}})()
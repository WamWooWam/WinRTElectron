Jx.delayDefine(Calendar,"Scheduler",function(){var t=Calendar.Scheduler=function(n){this._scheduled=false;this._timeSlice=n||t.timeSlice;this.reset();this._runJobs=this._runJobs.bind(this)},n;t.timeSlice=20;n=t.prototype;n.schedule=function(n,i,r,u){var f=this._nextId++;return this._jobs[f]={fn:n,ctx:i,args:r,isVisible:u},u&&this._visibleJobs++,this._scheduled||(setImmediate(this._runJobs),this._scheduled=true),f};n.setVisible=function(n,t){var i=this._jobs[n],r;i&&i.isVisible!==t&&(r=t?1:-1,this._visibleJobs+=r,i.isVisible=t)};n.cancel=function(n){var t=this._jobs[n];t&&(t.isVisible&&this._visibleJobs--,delete this._jobs[n])};n.reset=function(){this._jobs={};this._nextId=0;this._currentId=0;this._visibleJobs=0};n._runJobs=function(){for(var i=Date.now(),t=this._currentId,n;this._visibleJobs&&Date.now()-i<this._timeSlice;)n=this._jobs[t],n&&n.isVisible&&(this._visibleJobs--,delete this._jobs[t],n.fn.apply(n.ctx,n.args)),t++;while(this._currentId<this._nextId&&Date.now()-i<this._timeSlice)t=this._currentId++,n=this._jobs[t],n&&(delete this._jobs[t],n.fn.apply(n.ctx,n.args));this._currentId<this._nextId?setImmediate(this._runJobs):(this._scheduled=false,Jx.ptStopLaunch(Jx.TimePoint.responsive,0))}})
Jx.delayDefine(Chat,"SyncMessageBarFlyout",function(){var t=Microsoft.WindowsLive.Platform,n;Chat.SyncMessageBarFlyout=function(){};n=Chat.SyncMessageBarFlyout.prototype;n._email=null;n._syncComplianceResults=null;n._enforceableErrors=false;n._flyout=null;n._flyoutTemplate=null;n._flyoutContent=null;n._anchor=null;n.init=function(n,t,i){this._email=n;this._syncComplianceResults=t;this._enforceableErrors=i;this._flyout||this._createFlyout()};n.show=function(n,t){this._anchor=n;this._generateFlyoutContent();this._flyout.show(n,t)};n._createFlyout=function(){var n=document.createElement("div"),t;n.setAttribute("data-win-control","WinJS.UI.Flyout");document.body.appendChild(n);t=document.createElement("div");t.setAttribute("id","flyoutContainer");n.appendChild(t);this._flyout=new WinJS.UI.Flyout(n);this._flyout.addEventListener("afterhide",this._afterHide.bind(this));this._flyoutTemplate=document.createElement("div");this._flyoutTemplate.setAttribute("id","flyoutContent");this._flyoutTemplate.innerHTML=Jx.Templates.MessageBar.syncFlyout();Jx.res.processAll(this._flyoutTemplate)};n._afterHide=function(){this._anchor.blur();this._anchor.focus()};n._generateFlyoutContent=function(){var r=t.PolicyComplianceResults,n=this._flyout.element.querySelector("#flyoutContainer"),i;Jx.isHTMLElement(this._flyoutContent)&&n.removeChild(this._flyoutContent);this._flyoutContent=this._flyoutTemplate.cloneNode(true);n.appendChild(this._flyoutContent);i="mbhidden";this._enforceableErrors?this._showApplyPolicyContent():this._showUnableToComplyContent()};n._showApplyPolicyContent=function(){var n=t.PolicyComplianceResults,i="mbhidden",r=this._flyoutContent.querySelector("#applyPolicyContent"),o,s,h,c,l,u,f,e;Jx.removeClass(r,i);(this._syncComplianceResults&n.userNotAnAdmin)===n.userNotAnAdmin&&(o=r.querySelector("#adminNeededItem"),Jx.removeClass(o,i));((this._syncComplianceResults&n.userCanceledPolicyDialog)===n.userCanceledPolicyDialog||this._syncComplianceResults===n.compliant)&&(s=r.querySelector("#userClickedCancelItem"),Jx.removeClass(s,i));(this._syncComplianceResults&n.usersCannotChangePassword)===n.usersCannotChangePassword&&(h=r.querySelector("#usersCanChangePwdItem"),Jx.removeClass(h,i));((this._syncComplianceResults&n.connectedUserPasswordIsWeak)===n.connectedUserPasswordIsWeak||(this._syncComplianceResults&n.userHasBlankPassword)===n.userHasBlankPassword)&&(c=r.querySelector("#connectedUserPwdItem"),Jx.removeClass(c,i));((this._syncComplianceResults&n.connectedAdminPasswordIsWeak)===n.connectedAdminPasswordIsWeak||(this._syncComplianceResults&n.adminsHaveBlankPasswords)===n.adminsHaveBlankPasswords)&&(l=r.querySelector("#connectedAdminPwdItem"),Jx.removeClass(l,i));(this._syncComplianceResults&n.notProtectedBitLocker)===n.notProtectedBitLocker&&(u=r.querySelector("#notProtectedBitLockerItem"),Jx.removeClass(u,i));(this._syncComplianceResults&n.notProtected3rdParty)===n.notProtected3rdParty&&(u=r.querySelector("#notProtected3rdPartyItem"),Jx.removeClass(u,i));(this._syncComplianceResults&n.protectionSuspendedBitLocker)===n.protectionSuspendedBitLocker&&(f=r.querySelector("#protectionSuspendedBitLockerItem"),Jx.removeClass(f,i));(this._syncComplianceResults&n.protectionSuspended3rdParty)===n.protectionSuspended3rdParty&&(e=r.querySelector("#protectionSuspended3rdPartyItem"),Jx.removeClass(e,i));(this._syncComplianceResults&n.osVolumeNotProtectedBitLocker)===n.osVolumeNotProtectedBitLocker&&(u=r.querySelector("#osVolumeNotProtectedBitLockerItem"),Jx.removeClass(u,i));(this._syncComplianceResults&n.osVolumeNotProtected3rdParty)===n.osVolumeNotProtected3rdParty&&(u=r.querySelector("#osVolumeNotProtected3rdPartyItem"),Jx.removeClass(u,i));(this._syncComplianceResults&n.protectionNotYetEnabledBitLocker)===n.protectionNotYetEnabledBitLocker&&(f=r.querySelector("#protectionNotYetEnabledBitLockerItem"),Jx.removeClass(f,i));(this._syncComplianceResults&n.protectionNotYetEnabled3rdParty)===n.protectionNotYetEnabled3rdParty&&(e=r.querySelector("#protectionNotYetEnabled3rdPartyItem"),Jx.removeClass(e,i))};n._showUnableToComplyContent=function(){var n=t.PolicyComplianceResults,u="mbhidden",r=this._flyoutContent.querySelector("#unableToComplyContent"),f,e,o,i;Jx.removeClass(r,u);f=r.querySelector("#unableToComplyDesc");f.innerText=Jx.res.loadCompoundString("/messageBar/flyoutUnableToComplyDescription",this._email);(this._syncComplianceResults&n.connectedUserProviderIsWeak)===n.connectedUserProviderIsWeak&&(e=r.querySelector("#connectedUserProviderItem"),Jx.removeClass(e,u));(this._syncComplianceResults&n.connectedAdminProviderIsWeak)===n.connectedAdminProviderIsWeak&&(o=r.querySelector("#connectedAdminProviderItem"),Jx.removeClass(o,u));(this._syncComplianceResults&n.lockNotConfiguredBitLocker)===n.lockNotConfiguredBitLocker&&(i=r.querySelector("#lockNotConfiguredBitLockerItem"),Jx.removeClass(i,u));(this._syncComplianceResults&n.lockNotConfigured3rdParty)===n.lockNotConfigured3rdParty&&(i=r.querySelector("#lockNotConfigured3rdPartyItem"),Jx.removeClass(i,u));(this._syncComplianceResults&n.noFeatureLicenseBitLocker)===n.noFeatureLicenseBitLocker&&(i=r.querySelector("#noFeatureLicenseBitLockerItem"),Jx.removeClass(i,u));(this._syncComplianceResults&n.noFeatureLicense3rdParty)===n.noFeatureLicense3rdParty&&(i=r.querySelector("#noFeatureLicense3rdPartyItem"),Jx.removeClass(i,u));(this._syncComplianceResults&n.unExpectedFailure)===n.unExpectedFailure&&(i=r.querySelector("#unExpectedFailureItem"),Jx.removeClass(i,u))}})
//! Copyright (c) Microsoft Corporation. All rights reserved.
Jx.delayDefine(People,"loadSocialModel",function(){People.loadSocialModel=Jx.fnEmpty;People.loadSocialImports();People.loadSocialCore();People.loadSocialPlatform();People.loadSocialProviders();People.RecentActivity.create_actionState=function(n,t){var i={};return i.context=n,i.userState=t,i};People.RecentActivity.AnnotationType={none:0,wallPost:1,retweetedBy:2,inReplyTo:3};People.RecentActivity.NotifyCollectionChangedAction={add:0,remove:1,replace:2,reset:3};People.RecentActivity.EntityType={none:0,contact:1,link:2,hashTag:3};People.RecentActivity.FeedEntryVideoType={none:0,embed:1,raw:2};People.RecentActivity.FeedEntryType={none:0,text:1,link:2,video:3,photo:4,photoAlbum:5};People.RecentActivity.FeedObjectType={none:0,entry:1,photo:2,photoAlbum:3};People.RecentActivity.NetworkReactionType={none:0,like:1,retweet:2,favorite:3};People.RecentActivity.NotificationType={none:0,entry:1,photo:2,photoAlbum:3,video:4,person:5};People.RecentActivity.create_photoCollectionLockToken=function(n){var t={};return t.photoId=n,t};People.RecentActivity.Annotation=function(n){this._info=n};People.RecentActivity.Annotation.prototype._info=null;Object.defineProperty(People.RecentActivity.Annotation.prototype,"type",{get:function(){return this._info.type}});Object.defineProperty(People.RecentActivity.Annotation.prototype,"data",{get:function(){switch(this._info.type){case People.RecentActivity.Core.AnnotationInfoType.retweetedBy:return new People.RecentActivity.AnnotationRetweetData(this._info.data);case People.RecentActivity.Core.AnnotationInfoType.inReplyTo:case People.RecentActivity.Core.AnnotationInfoType.wallPost:return People.RecentActivity.ContactCache.findOrCreateContact(this._info.data)}return null}});People.RecentActivity.AnnotationRetweetData=function(n){this._info=n};People.RecentActivity.AnnotationRetweetData.prototype._info=null;Object.defineProperty(People.RecentActivity.AnnotationRetweetData.prototype,"publisher",{get:function(){return People.RecentActivity.ContactCache.findOrCreateContact(this._info.publisher)}});Object.defineProperty(People.RecentActivity.AnnotationRetweetData.prototype,"text",{get:function(){return this._info.text}});People.RecentActivity.Collection=function(){this._items=[]};Jx.mix(People.RecentActivity.Collection.prototype,Jx.Events);Jx.mix(People.RecentActivity.Collection.prototype,People.Social.Events);People.RecentActivity.Collection.prototype._items=null;Object.defineProperty(People.RecentActivity.Collection.prototype,"count",{get:function(){return this._items.length}});Object.defineProperty(People.RecentActivity.Collection.prototype,"items",{get:function(){return this._items}});People.RecentActivity.Collection.prototype.sort=function(n){var i,t,r;for(i=Array.apply(null,this._items),this._items.sort(n),t=0,r=i.length;t<r;t++)if(i[t]!==this._items[t]){this.onCollectionChanged(new People.RecentActivity.NotifyCollectionChangedEventArgs(this,3,null,-1,null,-1));break}};People.RecentActivity.Collection.prototype.toArray=function(){return this._items};People.RecentActivity.Collection.prototype.clearInternal=function(){var n=this._items.length;if(this._items.length=0,!!n){this.onCollectionChanged(new People.RecentActivity.NotifyCollectionChangedEventArgs(this,3,null,-1,null,-1));this.onPropertyChanged("Count")}};People.RecentActivity.Collection.prototype.addInternal=function(n){this._items.push(n);this.onCollectionChanged(new People.RecentActivity.NotifyCollectionChangedEventArgs(this,0,[n],this._items.length-1,null,-1));this.onPropertyChanged("Count")};People.RecentActivity.Collection.prototype.addRangeInternal=function(n){if(n.length>0){this._items.push.apply(this._items,n);this.onCollectionChanged(new People.RecentActivity.NotifyCollectionChangedEventArgs(this,0,n,this._items.length-n.length,null,-1));this.onPropertyChanged("Count")}};People.RecentActivity.Collection.prototype.insertRangeInternal=function(n,t){if(t.length>0)if(n<this._items.length){this._items.splice.apply(this._items,[n,0].concat(t));this.onCollectionChanged(new People.RecentActivity.NotifyCollectionChangedEventArgs(this,0,t,n,null,-1));this.onPropertyChanged("Count")}else this.addRangeInternal(t)};People.RecentActivity.Collection.prototype.insertInternal=function(n,t){if(n<this._items.length){this._items.splice(n,0,t);this.onCollectionChanged(new People.RecentActivity.NotifyCollectionChangedEventArgs(this,0,[t],n,null,-1));this.onPropertyChanged("Count")}else this.addInternal(t)};People.RecentActivity.Collection.prototype.removeInternal=function(n){var t=this._items.indexOf(n);t!==-1&&this.removeAtInternal(t)};People.RecentActivity.Collection.prototype.removeRangeInternal=function(n){var t,i,u,e,f,r;if(n.length>0){for(t=[],i=0,u=0,e=n.length;u<e;u++)if(f=n[u],r=this._items.indexOf(f),r!==-1){if(this._items.splice(r,1),t.length&&r!==i){this.onCollectionChanged(new People.RecentActivity.NotifyCollectionChangedEventArgs(this,1,null,-1,t,i));t.length=0;t.push(f)}else t.push(f);i=r}if(t.length>0)this.onCollectionChanged(new People.RecentActivity.NotifyCollectionChangedEventArgs(this,1,null,-1,t,i));this.onPropertyChanged("Count")}};People.RecentActivity.Collection.prototype.removeAtInternal=function(n){var t=this._items[n];this._items.splice(n,1);this.onCollectionChanged(new People.RecentActivity.NotifyCollectionChangedEventArgs(this,1,null,-1,[t],n));this.onPropertyChanged("Count")};People.RecentActivity.Collection.prototype.onCollectionChanged=function(n){this.raiseEvent("collectionchanged",n)};People.RecentActivity.Collection.prototype.onPropertyChanged=function(n){this.raiseEvent("propertychanged",new People.RecentActivity.NotifyPropertyChangedEventArgs(this,n))};People.RecentActivity.NotifyCollectionChangedEventArgs=function(n,t,i,r,u,f){this._newItemIndex$1=-1;this._oldItemIndex$1=-1;People.RecentActivity.EventArgs.call(this,n);this._action$1=t;this._newItemIndex$1=r;this._newItems$1=i;this._oldItemIndex$1=f;this._oldItems$1=u};Jx.inherit(People.RecentActivity.NotifyCollectionChangedEventArgs,People.RecentActivity.EventArgs);People.RecentActivity.NotifyCollectionChangedEventArgs.prototype._action$1=0;People.RecentActivity.NotifyCollectionChangedEventArgs.prototype._newItems$1=null;People.RecentActivity.NotifyCollectionChangedEventArgs.prototype._oldItems$1=null;Object.defineProperty(People.RecentActivity.NotifyCollectionChangedEventArgs.prototype,"action",{get:function(){return this._action$1}});Object.defineProperty(People.RecentActivity.NotifyCollectionChangedEventArgs.prototype,"newItemIndex",{get:function(){return this._newItemIndex$1}});Object.defineProperty(People.RecentActivity.NotifyCollectionChangedEventArgs.prototype,"newItems",{get:function(){return this._newItems$1}});Object.defineProperty(People.RecentActivity.NotifyCollectionChangedEventArgs.prototype,"oldItemIndex",{get:function(){return this._oldItemIndex$1}});Object.defineProperty(People.RecentActivity.NotifyCollectionChangedEventArgs.prototype,"oldItems",{get:function(){return this._oldItems$1}});People.RecentActivity.Comment=function(n){this._info=n;this._publisher=People.RecentActivity.ContactCache.findOrCreateContact(n.publisher);this._timestamp=new Date(n.timestamp)};People.RecentActivity.Comment.prototype._info=null;People.RecentActivity.Comment.prototype._publisher=null;People.RecentActivity.Comment.prototype._timestamp=null;People.RecentActivity.Comment.prototype._entities=null;People.RecentActivity.Comment.prototype._isPublishedInApp=false;Object.defineProperty(People.RecentActivity.Comment.prototype,"id",{get:function(){return this._info.id}});Object.defineProperty(People.RecentActivity.Comment.prototype,"text",{get:function(){return this._info.text}});Object.defineProperty(People.RecentActivity.Comment.prototype,"publisher",{get:function(){return this._publisher}});Object.defineProperty(People.RecentActivity.Comment.prototype,"timestamp",{get:function(){return this._timestamp}});Object.defineProperty(People.RecentActivity.Comment.prototype,"entities",{get:function(){return this._entities==null&&(this._entities=People.RecentActivity.EntityHelper.createEntities(this._info.entities)),this._entities}});Object.defineProperty(People.RecentActivity.Comment.prototype,"isPublishedInApp",{get:function(){return this._isPublishedInApp},set:function(n){this._isPublishedInApp=n}});Object.defineProperty(People.RecentActivity.Comment.prototype,"sortOrder",{get:function(){return this._timestamp.getTime()}});Object.defineProperty(People.RecentActivity.Comment.prototype,"info",{get:function(){return this._info}});People.RecentActivity.CommentCollection=function(n,t,i){People.RecentActivity.Collection.call(this);var r=i.objectInfo.commentDetails;this._map$1={};this._network$1=t;this._obj$1=i;this._provider$1=n;this._totalCount$1=r.count;this._permissions$1=r.permissions;this._addRangeByInfo$1(this._obj$1.objectInfo.comments)};Jx.inherit(People.RecentActivity.CommentCollection,People.RecentActivity.Collection);People.RecentActivity.CommentCollection.prototype._provider$1=null;People.RecentActivity.CommentCollection.prototype._network$1=null;People.RecentActivity.CommentCollection.prototype._obj$1=null;People.RecentActivity.CommentCollection.prototype._map$1=null;People.RecentActivity.CommentCollection.prototype._totalCount$1=0;People.RecentActivity.CommentCollection.prototype._permissions$1=0;People.RecentActivity.CommentCollection.prototype._isDisposed=false;Object.defineProperty(People.RecentActivity.CommentCollection.prototype,"icon",{get:function(){return this._obj$1.objectInfo.commentDetails.icon}});Object.defineProperty(People.RecentActivity.CommentCollection.prototype,"maximumLength",{get:function(){return this._obj$1.objectInfo.commentDetails.maximumLength}});Object.defineProperty(People.RecentActivity.CommentCollection.prototype,"totalCount",{get:function(){return this._totalCount$1},set:function(n){if(this._totalCount$1!==n){this._totalCount$1=n;this.onPropertyChanged("TotalCount")}}});Object.defineProperty(People.RecentActivity.CommentCollection.prototype,"totalCountEnabled",{get:function(){return this._obj$1.objectInfo.commentDetails.countEnabled}});Object.defineProperty(People.RecentActivity.CommentCollection.prototype,"remainingCount",{get:function(){return this._totalCount$1-this.count}});Object.defineProperty(People.RecentActivity.CommentCollection.prototype,"permissions",{get:function(){return this._permissions$1},set:function(n){if(n!==this._permissions$1){this._permissions$1=n;this.onPropertyChanged("Permissions")}}});Object.defineProperty(People.RecentActivity.CommentCollection.prototype,"network",{get:function(){return this._network$1}});Object.defineProperty(People.RecentActivity.CommentCollection.prototype,"prefix",{get:function(){return this._obj$1.objectInfo.commentDetails.prefix}});People.RecentActivity.CommentCollection.prototype.dispose=function(){this._isDisposed||(this._isDisposed=true,People.Social.clearKeys(this._map$1),this._network$1=null,this._obj$1=null,this._provider$1=null)};People.RecentActivity.CommentCollection.prototype.add=function(n,t){var i=this._obj$1.objectInfo,r=People.RecentActivity.Core.create_commentInfo(null,this._network$1.user.info,(new Date).getTime(),n,null);People.RecentActivity.Core.EtwHelper.writeCommentEvent(People.RecentActivity.Core.EtwEventName.uiAddCommentStart,i,r);this._provider$1.addComment(i,r,People.RecentActivity.create_actionState(this._obj$1,t))};People.RecentActivity.CommentCollection.prototype.refresh=function(n){var t=this._obj$1.objectInfo;People.RecentActivity.Core.EtwHelper.writeFeedObjectEvent(People.RecentActivity.Core.EtwEventName.uiRefreshCommentsStart,t);this._provider$1.refreshComments(t,People.RecentActivity.create_actionState(this._obj$1,n))};People.RecentActivity.CommentCollection.prototype.updateDetails=function(n){this.totalCount=n.count;this.permissions=n.permissions};People.RecentActivity.CommentCollection.prototype.onRefreshCompleted=function(n,t,i,r){var u=false;n.code===People.RecentActivity.Core.ResultCode.success&&(this._addRangeByInfo$1(t),this._removeRangeByInfo$1(i),u=t.length>0||i.length>0);this.raiseEvent("refreshcompleted",new People.RecentActivity.RefreshActionCompletedEventArgs(this,n,u,r));People.RecentActivity.Core.EtwHelper.writeFeedObjectEvent(People.RecentActivity.Core.EtwEventName.uiRefreshCommentsEnd,this._obj$1.objectInfo)};People.RecentActivity.CommentCollection.prototype.onCommentAdded=function(n,t,i){var r=null;n.code===People.RecentActivity.Core.ResultCode.success&&(r=this._addUserCommentByInfo$1(t),++this.totalCount);this.raiseEvent("addcommentcompleted",new People.RecentActivity.CommentActionCompletedEventArgs(this,n,r,i));People.RecentActivity.Core.EtwHelper.writeCommentEvent(People.RecentActivity.Core.EtwEventName.uiAddCommentEnd,this._obj$1.objectInfo,t)};People.RecentActivity.CommentCollection.prototype._addUserCommentByInfo$1=function(n){if(!!Jx.isUndefined(this._map$1[n.id])){var t=new People.RecentActivity.Comment(n);return t.isPublishedInApp=true,this._map$1[t.id]=t,this.addInternal(t),t}return this._map$1[n.id]};People.RecentActivity.CommentCollection.prototype._addRangeByInfo$1=function(n){var i,t,f,r,u;if(n.length>0){for(i=[],t=0,f=n.length;t<f;t++)r=n[t].id,!Jx.isUndefined(this._map$1[r])||(u=new People.RecentActivity.Comment(n[t]),this._map$1[r]=u,i.push(u));i.length>0&&(People.RecentActivity.CollectionHelper.addSortableItems(this,i,false),this.count>this.totalCount&&(this.totalCount=this.count))}};People.RecentActivity.CommentCollection.prototype._removeByInfo$1=function(n){if(!Jx.isUndefined(this._map$1[n.id])){var t=this._map$1[n.id];return delete this._map$1[n.id],this.removeInternal(t),t}return null};People.RecentActivity.CommentCollection.prototype._removeRangeByInfo$1=function(n){var i,t,r;for(i=0,t=0,r=n.length;t<r;t++)this._removeByInfo$1(n[t])!=null&&i++;this.totalCount=this.totalCount-i};People.RecentActivity.CommentCollection.prototype.item=function(n){return this.items[n]};People.RecentActivity.LinkUrlTransform=function(n){this._regex=n};People.RecentActivity.LinkUrlTransform.prototype._regex=null;People.RecentActivity.LinkUrlTransform.prototype.isMatch=function(n){return this._regex.test(n)};People.RecentActivity.LinkUrlTransform.prototype.createPreviewUrl=function(n){if(!Jx.isNonEmptyString(n))return null;var t=this._regex.exec(n);return t!=null&&t.length>1?decodeURIComponent(t[1]):null};People.RecentActivity.LinkUrlTransform.prototype.createEmbedUrl=function(){return null};People.RecentActivity.VideoUrlTransform=function(n,t,i){this._regex=n;this._embedUrlFormat=t;this._previewUrlFormat=i};People.RecentActivity.VideoUrlTransform.prototype._regex=null;People.RecentActivity.VideoUrlTransform.prototype._embedUrlFormat=null;People.RecentActivity.VideoUrlTransform.prototype._previewUrlFormat=null;People.RecentActivity.VideoUrlTransform.prototype.isMatch=function(n){return this._regex.test(n)};People.RecentActivity.VideoUrlTransform.prototype.createPreviewUrl=function(n){if(!Jx.isNonEmptyString(this._previewUrlFormat)||!Jx.isNonEmptyString(n))return null;var t=this._regex.exec(n);return t!=null&&!!t.length?(t.shift(),People.Social.format(this._previewUrlFormat,t)):null};People.RecentActivity.VideoUrlTransform.prototype.createEmbedUrl=function(n){if(!Jx.isNonEmptyString(this._previewUrlFormat)||!Jx.isNonEmptyString(n))return null;var t=this._regex.exec(n);return t!=null&&!!t.length?(t.shift(),People.Social.format(this._embedUrlFormat,t)):null};People.RecentActivity.Configuration=function(){};People.RecentActivity.Configuration._videoUrlTransforms=null;People.RecentActivity.Configuration._linkUrlTransforms=null;People.RecentActivity.Configuration._shareSupportedDataFormats=[Windows.ApplicationModel.DataTransfer.StandardDataFormats.uri];People.RecentActivity.Configuration._credentialUpdateUrl="https://profile.live.com/services/connect/?appid={0}&scenarios=dashboard_agg,status_publish&view=trident&authz=true&biciID=peoplenotifpane&brand=people&ru=http%3A%2F%2Fprofile.live.com%2Fservices%3Fview%3Dmanage";People.RecentActivity.Configuration._networkReconnectUri="wlpeople:connectAccount,accountObjectId={0}&reconnect={1}";People.RecentActivity.Configuration._info=null;Object.defineProperty(People.RecentActivity.Configuration,"aggregatedNetworkId",{get:function(){return People.RecentActivity.Configuration._getInfo().aggregatedNetworkId}});Object.defineProperty(People.RecentActivity.Configuration,"whatsNewPersonId",{get:function(){return People.RecentActivity.Configuration._getInfo().whatsNewPersonId}});Object.defineProperty(People.RecentActivity.Configuration,"maximumEntryCount",{get:function(){return People.RecentActivity.Configuration._getInfo().maximumEntryCount}});Object.defineProperty(People.RecentActivity.Configuration,"batchEntryCount",{get:function(){return People.RecentActivity.Configuration._getInfo().batchEntryCount}});Object.defineProperty(People.RecentActivity.Configuration,"maximumReactionCount",{get:function(){return People.RecentActivity.Configuration._getInfo().maximumReactionCount}});Object.defineProperty(People.RecentActivity.Configuration,"maximumTagCount",{get:function(){return People.RecentActivity.Configuration._getInfo().maximumTagCount}});Object.defineProperty(People.RecentActivity.Configuration,"videoUrlTransforms",{get:function(){return People.RecentActivity.Configuration._videoUrlTransforms}});Object.defineProperty(People.RecentActivity.Configuration,"linkUrlTransforms",{get:function(){return People.RecentActivity.Configuration._linkUrlTransforms}});Object.defineProperty(People.RecentActivity.Configuration,"shareSupportedDataFormats",{get:function(){return People.RecentActivity.Configuration._shareSupportedDataFormats}});Object.defineProperty(People.RecentActivity.Configuration,"maxStackableEntries",{get:function(){var n=window.screen.height;return n<1024?2:n<1360?3:n<1650?4:5}});People.RecentActivity.Configuration.getUpdateCredentialsUrl=function(n){return Jx.isNonEmptyString(n)||(n=People.RecentActivity.Core.NetworkId.facebook),People.Social.format(People.RecentActivity.Configuration._credentialUpdateUrl,n)};People.RecentActivity.Configuration.getNetworkReconnectUrl=function(n,t){return People.Social.format(People.RecentActivity.Configuration._networkReconnectUri,n,t)};People.RecentActivity.Configuration._getInfo=function(){return People.RecentActivity.Configuration._info==null&&(People.RecentActivity.Configuration._info=People.RecentActivity.Providers.FeedProviderFactory.instance.getConfiguration()),People.RecentActivity.Configuration._info},function(){var n=[],t;n.push(new People.RecentActivity.VideoUrlTransform(new RegExp("^(?:https?://)?(?:www\\.)?youtube.com/watch\\?(?:(?!v=).*?&)?v=(.+?)(?:&|$)","i"),"http://www.youtube.com/embed/{0}?autoplay=1","http://img.youtube.com/vi/{0}/0.jpg"));n.push(new People.RecentActivity.VideoUrlTransform(new RegExp("^(?:https?://)?(?:www\\.)?youtu.be/(.+)$","i"),"http://www.youtube.com/embed/{0}?autoplay=1","http://img.youtube.com/vi/{0}/0.jpg"));n.push(new People.RecentActivity.VideoUrlTransform(new RegExp("^(?:https?://)?(?:www\\.)?youtube.com/v/(.+?)(?:\\?.*)?$","i"),"http://www.youtube.com/embed/{0}?autoplay=1","http://img.youtube.com/vi/{0}/0.jpg"));n.push(new People.RecentActivity.VideoUrlTransform(new RegExp("^(?:https?://)?(?:www\\.)?vimeo.com/(.+)$","i"),"http://player.vimeo.com/video/{0}?title=0&byline=0&autoplay=1&wmode=transparent",null));People.RecentActivity.Configuration._videoUrlTransforms=n;t=[];t.push(new People.RecentActivity.LinkUrlTransform(new RegExp("^(?:https?://)?external\\.ak\\.fbcdn\\.net/safe_image\\.php\\?(?:(?!url=).*?&)?url=(.+?)(?:&|$)","i")));t.push(new People.RecentActivity.LinkUrlTransform(new RegExp("^(?:https?://)?s\\-external\\.ak\\.fbcdn\\.net/safe_image\\.php\\?(?:(?!url=).*?&)?url=(.+?)(?:&|$)","i")));t.push(new People.RecentActivity.LinkUrlTransform(new RegExp("^(?:https?://)?fbexternal-a.akamaihd.net/safe_image\\.php\\?(?:(?!url=).*?&)?url=(.+?)(?:&|$)","i")));People.RecentActivity.Configuration._linkUrlTransforms=t}();People.RecentActivity.Contact=function(n){this._info=n};People.RecentActivity.Contact.prototype._info=null;People.RecentActivity.Contact.prototype._person=null;People.RecentActivity.Contact.prototype._temporaryContact=null;Object.defineProperty(People.RecentActivity.Contact.prototype,"id",{get:function(){return this._info.id}});Object.defineProperty(People.RecentActivity.Contact.prototype,"sourceId",{get:function(){return this._info.sourceId}});Object.defineProperty(People.RecentActivity.Contact.prototype,"isFriend",{get:function(){return this._info.isFriend?true:(this._ensurePerson(),this._person!=null?true:false)}});Object.defineProperty(People.RecentActivity.Contact.prototype,"name",{get:function(){return this._info.name}});Object.defineProperty(People.RecentActivity.Contact.prototype,"picture",{get:function(){return this._info.picture}});Object.defineProperty(People.RecentActivity.Contact.prototype,"personId",{get:function(){return this._ensurePerson(),this._person!=null?this._person.objectId:""}});Object.defineProperty(People.RecentActivity.Contact.prototype,"networkHandle",{get:function(){return this._info.networkHandle}});Object.defineProperty(People.RecentActivity.Contact.prototype,"info",{get:function(){return this._info}});People.RecentActivity.Contact.prototype.update=function(n){this._ensurePerson();this._person==null&&Jx.isNonEmptyString(n.picture)&&Jx.isNonEmptyString(n.largePicture)&&(this._info=n,this._temporaryContact=null)};People.RecentActivity.Contact.prototype.getDataContext=function(){var n,t,i,r;return(this._ensurePerson(),this._person==null)?(this._temporaryContact==null&&(n=this._info.name,Jx.isNonEmptyString(n)||(t=this._info.sourceId,Jx.log.write(4,"Getting network name for network:"+t),i=People.RecentActivity.Platform.AuthInfo.getInstance(t),r=i!=null?i.networkName:t,n=Jx.res.loadCompoundString("/strings/raContactFallbackName",r)),this._temporaryContact=People.RecentActivity.Core.create_temporaryContactInfo(this._info.id,this._info.sourceId,this._info.networkHandle,n,this._info.picture,this._info.largePicture,this._info.profileUrl)),this._temporaryContact):this._person};People.RecentActivity.Contact.prototype._ensurePerson=function(){this._person==null&&(this._person=People.RecentActivity.Platform.Platform.instance.getPlatformPerson(this._info))};People.RecentActivity.ContactCache=function(){};People.RecentActivity.ContactCache._map={};People.RecentActivity.ContactCache.findContact=function(n){var t=People.RecentActivity.ContactCache._getKey(n);return Jx.isUndefined(People.RecentActivity.ContactCache._map[t])?null:People.RecentActivity.ContactCache._map[t]};People.RecentActivity.ContactCache.findOrCreateContact=function(n){var t,i;return t=People.RecentActivity.ContactCache.findContact(n),t==null?(t=new People.RecentActivity.Contact(n),i=People.RecentActivity.ContactCache._getKey(n),People.RecentActivity.ContactCache._map[i]=t):t.update(n),t};People.RecentActivity.ContactCache.clear=function(){People.Social.clearKeys(People.RecentActivity.ContactCache._map)};People.RecentActivity.ContactCache._getKey=function(n){return n.sourceId+":"+n.id};People.RecentActivity.Entity=function(n){this._info=n};People.RecentActivity.Entity.prototype._info=null;People.RecentActivity.Entity.prototype._data=null;Object.defineProperty(People.RecentActivity.Entity.prototype,"type",{get:function(){return this._info.type}});Object.defineProperty(People.RecentActivity.Entity.prototype,"data",{get:function(){if(this._data==null)switch(this._info.type){case People.RecentActivity.Core.EntityInfoType.contact:this._data=People.RecentActivity.ContactCache.findOrCreateContact(this._info.data);break;case People.RecentActivity.Core.EntityInfoType.hashTag:case People.RecentActivity.Core.EntityInfoType.link:this._data=this._info.data}return this._data}});Object.defineProperty(People.RecentActivity.Entity.prototype,"offset",{get:function(){return this._info.offset}});Object.defineProperty(People.RecentActivity.Entity.prototype,"length",{get:function(){return this._info.length}});People.RecentActivity.FeedEntryLinkData=function(n){this._info=n};People.RecentActivity.FeedEntryLinkData.prototype._info=null;Object.defineProperty(People.RecentActivity.FeedEntryLinkData.prototype,"caption",{get:function(){return this._info.caption}});Object.defineProperty(People.RecentActivity.FeedEntryLinkData.prototype,"description",{get:function(){return this._info.description}});Object.defineProperty(People.RecentActivity.FeedEntryLinkData.prototype,"text",{get:function(){return this._info.text}});Object.defineProperty(People.RecentActivity.FeedEntryLinkData.prototype,"tile",{get:function(){return this._info.tile}});Object.defineProperty(People.RecentActivity.FeedEntryLinkData.prototype,"title",{get:function(){return this._info.title}});Object.defineProperty(People.RecentActivity.FeedEntryLinkData.prototype,"url",{get:function(){return this._info.url}});People.RecentActivity.FeedEntryPhotoAlbumData=function(n,t){this._info=t;this._network=n};People.RecentActivity.FeedEntryPhotoAlbumData.prototype._info=null;People.RecentActivity.FeedEntryPhotoAlbumData.prototype._network=null;People.RecentActivity.FeedEntryPhotoAlbumData.prototype._album=null;People.RecentActivity.FeedEntryPhotoAlbumData.prototype._photos=null;Object.defineProperty(People.RecentActivity.FeedEntryPhotoAlbumData.prototype,"album",{get:function(){return this._album==null&&(this._album=this._network.albums.findOrCreateAlbumByInfo(this._info.album)),this._album}});Object.defineProperty(People.RecentActivity.FeedEntryPhotoAlbumData.prototype,"displayPhotos",{get:function(){var t,n,i;if(this._photos==null)for(t=this.album,this._photos=new Array(this._info.displayPhotos.length),n=0,i=this._photos.length;n<i;n++)this._photos[n]=t.photos.findOrCreatePhotoByInfo(this._info.displayPhotos[n]);return this._photos}});Object.defineProperty(People.RecentActivity.FeedEntryPhotoAlbumData.prototype,"text",{get:function(){return this._info.text}});Object.defineProperty(People.RecentActivity.FeedEntryPhotoAlbumData.prototype,"isTagged",{get:function(){return this._info.isTagged}});People.RecentActivity.FeedEntryPhotoData=function(n,t){this._info=t;this._network=n};People.RecentActivity.FeedEntryPhotoData.prototype._info=null;People.RecentActivity.FeedEntryPhotoData.prototype._network=null;People.RecentActivity.FeedEntryPhotoData.prototype._photo=null;People.RecentActivity.FeedEntryPhotoData.prototype._album=null;Object.defineProperty(People.RecentActivity.FeedEntryPhotoData.prototype,"album",{get:function(){var n,t;return this._album==null&&(n=this._info.album,n!=null&&(t=n.data,t.owner!=null&&t.name!=null&&(this._album=this._network.albums.findOrCreateAlbumByInfo(n)))),this._album}});Object.defineProperty(People.RecentActivity.FeedEntryPhotoData.prototype,"photo",{get:function(){return this._photo==null&&(this._photo=this._network.albums.findOrCreatePhotoByInfo(this._info.photo,this._info.album)),this._photo}});Object.defineProperty(People.RecentActivity.FeedEntryPhotoData.prototype,"text",{get:function(){return this._info.text}});Object.defineProperty(People.RecentActivity.FeedEntryPhotoData.prototype,"isTagged",{get:function(){return this._info.isTagged}});People.RecentActivity.FeedEntryTextData=function(n){this._info=n};People.RecentActivity.FeedEntryTextData.prototype._info=null;Object.defineProperty(People.RecentActivity.FeedEntryTextData.prototype,"text",{get:function(){return this._info.text}});People.RecentActivity.FeedEntryVideoData=function(n){this._info=n};People.RecentActivity.FeedEntryVideoData.prototype._info=null;Object.defineProperty(People.RecentActivity.FeedEntryVideoData.prototype,"caption",{get:function(){return this._info.caption}});Object.defineProperty(People.RecentActivity.FeedEntryVideoData.prototype,"description",{get:function(){return this._info.description}});Object.defineProperty(People.RecentActivity.FeedEntryVideoData.prototype,"displayUrl",{get:function(){return this._info.displayUrl}});Object.defineProperty(People.RecentActivity.FeedEntryVideoData.prototype,"sourceType",{get:function(){return this._info.sourceType}});Object.defineProperty(People.RecentActivity.FeedEntryVideoData.prototype,"sourceUrl",{get:function(){return this._info.sourceUrl}});Object.defineProperty(People.RecentActivity.FeedEntryVideoData.prototype,"text",{get:function(){return this._info.text}});Object.defineProperty(People.RecentActivity.FeedEntryVideoData.prototype,"tile",{get:function(){return this._info.tile}});Object.defineProperty(People.RecentActivity.FeedEntryVideoData.prototype,"title",{get:function(){return this._info.title}});People.RecentActivity.ActionCompletedEventArgs=function(n,t,i){People.RecentActivity.EventArgs.call(this,n);this._result$1=t;this._userState$1=i};Jx.inherit(People.RecentActivity.ActionCompletedEventArgs,People.RecentActivity.EventArgs);People.RecentActivity.ActionCompletedEventArgs.prototype._result$1=null;People.RecentActivity.ActionCompletedEventArgs.prototype._userState$1=null;Object.defineProperty(People.RecentActivity.ActionCompletedEventArgs.prototype,"result",{get:function(){return this._result$1}});Object.defineProperty(People.RecentActivity.ActionCompletedEventArgs.prototype,"userState",{get:function(){return this._userState$1}});People.RecentActivity.CommentActionCompletedEventArgs=function(n,t,i,r){People.RecentActivity.ActionCompletedEventArgs.call(this,n,t,r);this._comment$2=i};Jx.inherit(People.RecentActivity.CommentActionCompletedEventArgs,People.RecentActivity.ActionCompletedEventArgs);People.RecentActivity.CommentActionCompletedEventArgs.prototype._comment$2=null;Object.defineProperty(People.RecentActivity.CommentActionCompletedEventArgs.prototype,"comment",{get:function(){return this._comment$2}});People.RecentActivity.FeedObjectActionCompletedEventArgs=function(n,t,i,r){People.RecentActivity.ActionCompletedEventArgs.call(this,n,t,r);this._obj$2=i};Jx.inherit(People.RecentActivity.FeedObjectActionCompletedEventArgs,People.RecentActivity.ActionCompletedEventArgs);People.RecentActivity.FeedObjectActionCompletedEventArgs.prototype._obj$2=null;Object.defineProperty(People.RecentActivity.FeedObjectActionCompletedEventArgs.prototype,"feedObject",{get:function(){return this._obj$2}});People.RecentActivity.GetMoreActionCompletedEventArgs=function(n,t,i,r){People.RecentActivity.ActionCompletedEventArgs.call(this,n,t,r);this._count$2=i};Jx.inherit(People.RecentActivity.GetMoreActionCompletedEventArgs,People.RecentActivity.ActionCompletedEventArgs);People.RecentActivity.GetMoreActionCompletedEventArgs.prototype._count$2=0;Object.defineProperty(People.RecentActivity.GetMoreActionCompletedEventArgs.prototype,"count",{get:function(){return this._count$2}});People.RecentActivity.ReactionActionCompletedEventArgs=function(n,t,i,r){People.RecentActivity.ActionCompletedEventArgs.call(this,n,t,r);this._reaction$2=i};Jx.inherit(People.RecentActivity.ReactionActionCompletedEventArgs,People.RecentActivity.ActionCompletedEventArgs);People.RecentActivity.ReactionActionCompletedEventArgs.prototype._reaction$2=null;Object.defineProperty(People.RecentActivity.ReactionActionCompletedEventArgs.prototype,"reaction",{get:function(){return this._reaction$2}});People.RecentActivity.RefreshActionCompletedEventArgs=function(n,t,i,r){People.RecentActivity.ActionCompletedEventArgs.call(this,n,t,r);this._updated$2=i};Jx.inherit(People.RecentActivity.RefreshActionCompletedEventArgs,People.RecentActivity.ActionCompletedEventArgs);People.RecentActivity.RefreshActionCompletedEventArgs.prototype._updated$2=false;Object.defineProperty(People.RecentActivity.RefreshActionCompletedEventArgs.prototype,"isUpdated",{get:function(){return this._updated$2}});People.RecentActivity.ShareOperationActionCompletedEventArgs=function(n,t,i,r){People.RecentActivity.EventArgs.call(this,n);this._result$1=t;this._shareOperation$1=i;this._userState$1=r};Jx.inherit(People.RecentActivity.ShareOperationActionCompletedEventArgs,People.RecentActivity.EventArgs);People.RecentActivity.ShareOperationActionCompletedEventArgs.prototype._result$1=0;People.RecentActivity.ShareOperationActionCompletedEventArgs.prototype._shareOperation$1=null;People.RecentActivity.ShareOperationActionCompletedEventArgs.prototype._userState$1=null;Object.defineProperty(People.RecentActivity.ShareOperationActionCompletedEventArgs.prototype,"result",{get:function(){return this._result$1}});Object.defineProperty(People.RecentActivity.ShareOperationActionCompletedEventArgs.prototype,"shareInfo",{get:function(){return this._shareOperation$1}});Object.defineProperty(People.RecentActivity.ShareOperationActionCompletedEventArgs.prototype,"userState",{get:function(){return this._userState$1}});People.RecentActivity.Feed=function(n,t){this._network=t;this._provider=n;this._entries=new People.RecentActivity.FeedEntryCollection(this._provider,this._network)};Jx.mix(People.RecentActivity.Feed.prototype,Jx.Events);Jx.mix(People.RecentActivity.Feed.prototype,People.Social.Events);People.RecentActivity.Feed.prototype._provider=null;People.RecentActivity.Feed.prototype._network=null;People.RecentActivity.Feed.prototype._entries=null;People.RecentActivity.Feed.prototype._initializeStarted=false;People.RecentActivity.Feed.prototype._initializeCompleted=false;People.RecentActivity.Feed.prototype._initializeFromHydration=false;People.RecentActivity.Feed.prototype._hasMoreEntries=false;People.RecentActivity.Feed.prototype._isGettingMoreEntries=false;People.RecentActivity.Feed.prototype._isRefreshing=false;People.RecentActivity.Feed.prototype._isDisposed=false;Object.defineProperty(People.RecentActivity.Feed.prototype,"entries",{get:function(){return this._entries}});Object.defineProperty(People.RecentActivity.Feed.prototype,"initialized",{get:function(){return this._initializeCompleted}});Object.defineProperty(People.RecentActivity.Feed.prototype,"hasMoreEntries",{get:function(){return this._hasMoreEntries}});Object.defineProperty(People.RecentActivity.Feed.prototype,"isGettingMoreEntries",{get:function(){return this._isGettingMoreEntries}});Object.defineProperty(People.RecentActivity.Feed.prototype,"isRefreshing",{get:function(){return this._isRefreshing}});Object.defineProperty(People.RecentActivity.Feed.prototype,"network",{get:function(){return this._network}});People.RecentActivity.Feed.prototype.dispose=function(){this._isDisposed||(this._isDisposed=true,this._entries.dispose(),this._network=null,this._provider=null)};People.RecentActivity.Feed.prototype.initializeFromHydration=function(n){this._initializeStarted||(this._initializeStarted=true,this._initializeFromHydration=true,this._provider.getCachedFeedEntries(false,n))};People.RecentActivity.Feed.prototype.initialize=function(n){this._initializeStarted||(this._initializeStarted=true,this._provider.refreshFeedEntries(n))};People.RecentActivity.Feed.prototype.refresh=function(n){this._isRefreshing||(this._isRefreshing=true,this._provider.refreshFeedEntries(n))};People.RecentActivity.Feed.prototype.ensureUpToDate=function(n,t){Jx.log.write(4,People.Social.format("Feed::EnsureUpToDate(batchOnly:{0})",n));n&&(this._isGettingMoreEntries=false);this._provider.getCachedFeedEntries(n,t)};People.RecentActivity.Feed.prototype.getMoreEntries=function(n){this._isGettingMoreEntries||(this._isGettingMoreEntries=true,this._provider.getMoreFeedEntries(n))};People.RecentActivity.Feed.prototype.add=function(n,t){this._provider.addFeedObject(n,t)};People.RecentActivity.Feed.prototype.onRefreshFeedEntriesCompleted=function(n,t,i,r,u,f){this._isRefreshing=false;var e=false;if(n.isSuccessOrPartialFailure){if(t.length>0){e=true;this._entries.onFeedEntriesAdded(t)}if(i.length>0)this._entries.onFeedEntriesUpdated(i);if(r.length>0){e=true;this._entries.onFeedEntriesRemoved(r)}}this._hasMoreEntries=u;this._initializeCompleted?this.raiseEvent("refreshcompleted",new People.RecentActivity.RefreshActionCompletedEventArgs(this,n,e,f)):this._onInitializeCompleted(n,f)};People.RecentActivity.Feed.prototype.onGetCachedFeedEntriesCompleted=function(n,t,i){if(n.code===People.RecentActivity.Core.ResultCode.success)if(this._initializeCompleted)this._entries.onFeedEntriesReplaced(t);else if(t.length>0)this._entries.onFeedEntriesAdded(t);this._initializeCompleted?this._onEnsureUpToDateCompleted(n,i):this._initializeFromHydration&&this._onInitializeCompleted(n,i)};People.RecentActivity.Feed.prototype.onGetMoreEntriesCompleted=function(n,t,i,r){if(this.raiseEvent("getmoreentriescompleted",new People.RecentActivity.GetMoreActionCompletedEventArgs(this,n,t.length,r)),t.length>0)this._entries.onFeedEntriesAdded(t);this._hasMoreEntries=i;this._isGettingMoreEntries=false};People.RecentActivity.Feed.prototype.onAddEntryCompleted=function(n,t,i){this.raiseEvent("addentrycompleted",new People.RecentActivity.ActionCompletedEventArgs(this,n,i))};People.RecentActivity.Feed.prototype._onEnsureUpToDateCompleted=function(n,t){this.raiseEvent("ensureuptodatecompleted",new People.RecentActivity.ActionCompletedEventArgs(this,n,t))};People.RecentActivity.Feed.prototype._onInitializeCompleted=function(n,t){this._initializeCompleted=true;this.raiseEvent("initializecompleted",new People.RecentActivity.ActionCompletedEventArgs(this,n,t))};People.RecentActivity.FeedObject=function(n,t,i){this._info=i;this._network=t;this._provider=n;this._timestamp=new Date(i.timestamp);this._comments=new People.RecentActivity.CommentCollection(n,t,this);this._reactions=new People.RecentActivity.ReactionTypeCollection(n,t,this)};People.RecentActivity.FeedObject.prototype._provider=null;People.RecentActivity.FeedObject.prototype._info=null;People.RecentActivity.FeedObject.prototype._network=null;People.RecentActivity.FeedObject.prototype._comments=null;People.RecentActivity.FeedObject.prototype._reactions=null;People.RecentActivity.FeedObject.prototype._timestamp=null;People.RecentActivity.FeedObject.prototype._isDisposed=false;Object.defineProperty(People.RecentActivity.FeedObject.prototype,"id",{get:function(){return this._info.id}});Object.defineProperty(People.RecentActivity.FeedObject.prototype,"sourceId",{get:function(){return this._info.sourceId}});Object.defineProperty(People.RecentActivity.FeedObject.prototype,"objectInfo",{get:function(){return this._info}});Object.defineProperty(People.RecentActivity.FeedObject.prototype,"objectType",{get:function(){return this._info.type}});Object.defineProperty(People.RecentActivity.FeedObject.prototype,"url",{get:function(){return this._info.url}});Object.defineProperty(People.RecentActivity.FeedObject.prototype,"timestamp",{get:function(){return this._timestamp}});Object.defineProperty(People.RecentActivity.FeedObject.prototype,"comments",{get:function(){return this._comments}});Object.defineProperty(People.RecentActivity.FeedObject.prototype,"reactions",{get:function(){return this._reactions}});Object.defineProperty(People.RecentActivity.FeedObject.prototype,"network",{get:function(){return this._network}});Object.defineProperty(People.RecentActivity.FeedObject.prototype,"provider",{get:function(){return this._provider}});People.RecentActivity.FeedObject.prototype.dispose=function(){this._isDisposed||(this._isDisposed=true,this.onDisposed(),this._comments.dispose(),this._reactions.dispose(),this._info=null,this._network=null,this._provider=null)};People.RecentActivity.FeedObject.prototype.onDisposed=function(){};People.RecentActivity.FeedObject.prototype.onUpdated=function(n){this._comments.updateDetails(n.commentDetails);this._reactions.updateDetails(n.reactionDetails)};People.RecentActivity.FeedEntry=function(n,t,i){People.RecentActivity.FeedObject.call(this,n,t,i);this._info$1=i.data;this._publisher$1=People.RecentActivity.ContactCache.findOrCreateContact(this._info$1.publisher)};Jx.inherit(People.RecentActivity.FeedEntry,People.RecentActivity.FeedObject);People.RecentActivity.FeedEntry.prototype._info$1=null;People.RecentActivity.FeedEntry.prototype._publisher$1=null;People.RecentActivity.FeedEntry.prototype._entities$1=null;People.RecentActivity.FeedEntry.prototype._annotations$1=null;People.RecentActivity.FeedEntry.prototype._data$1=null;Object.defineProperty(People.RecentActivity.FeedEntry.prototype,"publisher",{get:function(){return this._publisher$1}});Object.defineProperty(People.RecentActivity.FeedEntry.prototype,"data",{get:function(){if(this._data$1==null)switch(this._info$1.type){case People.RecentActivity.Core.FeedEntryInfoType.link:this._data$1=new People.RecentActivity.FeedEntryLinkData(this._info$1.data);break;case People.RecentActivity.Core.FeedEntryInfoType.photo:this._data$1=new People.RecentActivity.FeedEntryPhotoData(this.network,this._info$1.data);break;case People.RecentActivity.Core.FeedEntryInfoType.photoAlbum:this._data$1=new People.RecentActivity.FeedEntryPhotoAlbumData(this.network,this._info$1.data);break;case People.RecentActivity.Core.FeedEntryInfoType.text:this._data$1=new People.RecentActivity.FeedEntryTextData(this._info$1.data);break;case People.RecentActivity.Core.FeedEntryInfoType.video:this._data$1=new People.RecentActivity.FeedEntryVideoData(this._info$1.data)}return this._data$1}});Object.defineProperty(People.RecentActivity.FeedEntry.prototype,"entryType",{get:function(){return this._info$1.type}});Object.defineProperty(People.RecentActivity.FeedEntry.prototype,"via",{get:function(){return this._info$1.via}});Object.defineProperty(People.RecentActivity.FeedEntry.prototype,"entities",{get:function(){return this._entities$1==null&&(this._entities$1=People.RecentActivity.EntityHelper.createEntities(this._info$1.entities)),this._entities$1}});Object.defineProperty(People.RecentActivity.FeedEntry.prototype,"annotations",{get:function(){return this._annotations$1==null&&(this._annotations$1=People.RecentActivity.AnnotationHelper.createAnnotations(this._info$1)),this._annotations$1}});Object.defineProperty(People.RecentActivity.FeedEntry.prototype,"isShared",{get:function(){return this._info$1.isShared}});Object.defineProperty(People.RecentActivity.FeedEntry.prototype,"parentId",{get:function(){return this._info$1.parentId}});Object.defineProperty(People.RecentActivity.FeedEntry.prototype,"sortOrder",{get:function(){return this.timestamp.getTime()}});Object.defineProperty(People.RecentActivity.FeedEntry.prototype,"entryInfo",{get:function(){return this._info$1}});People.RecentActivity.FeedEntry.prototype.onDisposed=function(){this._annotations$1=null;this._data$1=null;this._entities$1=null;this._info$1=null;this._publisher$1=null};People.RecentActivity.FeedEntry.prototype.containsEntityType=function(n){return this.findEntityByType(n)!=null};People.RecentActivity.FeedEntry.prototype.findEntityByType=function(n){for(var i=this.entities,t=0,r=i.length;t<r;t++)if(i[t].type===n)return i[t];return null};People.RecentActivity.FeedEntryCollection=function(n,t){People.RecentActivity.Collection.call(this);this._map$1={};this._network$1=t;this._provider$1=n};Jx.inherit(People.RecentActivity.FeedEntryCollection,People.RecentActivity.Collection);People.RecentActivity.FeedEntryCollection.prototype._map$1=null;People.RecentActivity.FeedEntryCollection.prototype._network$1=null;People.RecentActivity.FeedEntryCollection.prototype._provider$1=null;People.RecentActivity.FeedEntryCollection.prototype._isDisposed=false;Object.defineProperty(People.RecentActivity.FeedEntryCollection.prototype,"network",{get:function(){return this._network$1}});People.RecentActivity.FeedEntryCollection.prototype.dispose=function(){if(!this._isDisposed){this._isDisposed=true;for(var n=this.count-1;n>=0;n--)this.item(n).dispose();People.Social.clearKeys(this._map$1);this._network$1=null;this._provider$1=null}};People.RecentActivity.FeedEntryCollection.prototype.findOrCreateEntryByInfo=function(n){var t=this.findEntryByInfo(n);return t==null&&(t=this._addByInfo$1(n)),t};People.RecentActivity.FeedEntryCollection.prototype.findEntryByInfo=function(n){var t=this._getObjectKey$1(n);return Jx.isUndefined(this._map$1[t])?null:this._map$1[t]};People.RecentActivity.FeedEntryCollection.prototype.onFeedEntriesReplaced=function(n){if(this.clearInternal(),People.Social.clearKeys(this._map$1),n.length>0)this.onFeedEntriesAdded(n)};People.RecentActivity.FeedEntryCollection.prototype.onFeedEntriesAdded=function(n){this._addRangeByInfo$1(n)};People.RecentActivity.FeedEntryCollection.prototype.onFeedEntriesUpdated=function(n){for(var i,t=0,r=n.length;t<r;t++)if(i=this.findEntryByInfo(n[t]),i!=null)i.onUpdated(n[t])};People.RecentActivity.FeedEntryCollection.prototype.onFeedEntriesRemoved=function(n){this._removeRangeByInfo$1(n)};People.RecentActivity.FeedEntryCollection.prototype._addByInfo$1=function(n){var t,r,i;return t=this._getObjectKey$1(n),Jx.isUndefined(this._map$1[t])?(r=this._network$1.identity.networks.findById(n.sourceId),i=new People.RecentActivity.FeedEntry(this._provider$1,r,n),this._map$1[t]=i,People.RecentActivity.CollectionHelper.addSortableItem(this,i,true),i):this._map$1[t]};People.RecentActivity.FeedEntryCollection.prototype._addRangeByInfo$1=function(n){var t,e,i,o,r,u,f;if(n.length>0){for(t=[],e=this._network$1.identity.networks,i=0,o=n.length;i<o;i++)r=n[i],u=this._getObjectKey$1(r),Jx.isUndefined(this._map$1[u])&&(f=new People.RecentActivity.FeedEntry(this._provider$1,e.findById(r.sourceId),r),this._map$1[u]=f,t.push(f));t.length>0&&People.RecentActivity.CollectionHelper.addSortableItems(this,t,true)}};People.RecentActivity.FeedEntryCollection.prototype._removeRangeByInfo$1=function(n){var r,t,u,i;for(r=[],t=0,u=n.length;t<u;t++)i=this._getObjectKey$1(n[t]),Jx.isUndefined(this._map$1[i])||(r.push(this._map$1[i]),delete this._map$1[i]);this.removeRangeInternal(r)};People.RecentActivity.FeedEntryCollection.prototype._getObjectKey$1=function(n){return n.sourceId+";"+n.id};People.RecentActivity.FeedEntryCollection.prototype.item=function(n){return this.items[n]};People.RecentActivity.AnnotationHelper=function(){};People.RecentActivity.AnnotationHelper.createAnnotations=function(n){var r,t,i,u;if(r=[],t=n.annotations,t!=null)for(i=0,u=t.length;i<u;i++)r.push(new People.RecentActivity.Annotation(t[i]));return r};People.RecentActivity.CollectionHelper=function(){};People.RecentActivity.CollectionHelper.addSortableItems=function(n,t,i){var f,r,u,e,h,o,s;for(f=Array.apply(null,n.items),r=[],r.push.apply(r,f),r.push.apply(r,t),r.sort(function(n,t){var r=n.sortOrder,u=t.sortOrder;return i?u-r:r-u}),u=0,e=0,h=f.length;e<h;e++)o=r.indexOf(f[e]),s=o-u,s>0&&n.insertRangeInternal(u,r.slice(u,u+s)),u=o+1;u!==r.length&&n.addRangeInternal(r.slice(u))};People.RecentActivity.CollectionHelper.addSortableItem=function(n,t,i){var r,o,u;var f=false,s=t.sortOrder,e=n.items;for(r=0,o=e.length;!f&&r<o;r++)u=s-e[r].sortOrder,(!u||!i&&u<0||i&&u>0)&&(n.insertInternal(r,t),f=true);f||n.addInternal(t)};People.RecentActivity.EntityHelper=function(){};People.RecentActivity.EntityHelper.createEntities=function(n){var i,t,r;if(n==null||!n.length)return new Array(0);for(i=new Array(n.length),t=0,r=n.length;t<r;t++)i[t]=new People.RecentActivity.Entity(n[t]);return i};People.RecentActivity.Identity=function(n,t){this._identityId=n;this._identityType=t};People.RecentActivity.Identity._me=null;People.RecentActivity.Identity._whatsNew=null;People.RecentActivity.Identity._meId=null;People.RecentActivity.Identity.createIdentity=function(n){return n.toLowerCase()==="me"||n===People.RecentActivity.Identity._getMeId()?People.RecentActivity.Identity.createMeIdentity():new People.RecentActivity.PermanentIdentity(n)};People.RecentActivity.Identity.createTemporaryIdentity=function(n){return new People.RecentActivity.TemporaryIdentity(n)};People.RecentActivity.Identity.createWhatsNewIdentity=function(){return People.RecentActivity.Identity._whatsNew==null?People.RecentActivity.Identity._whatsNew=new People.RecentActivity.WhatsNewIdentity:People.RecentActivity.Identity._whatsNew.refreshNetworks(),People.RecentActivity.Identity._whatsNew};People.RecentActivity.Identity.createMeIdentity=function(){return People.RecentActivity.Identity._me==null?People.RecentActivity.Identity._me=new People.RecentActivity.MeIdentity(People.RecentActivity.Identity._getMeId()):People.RecentActivity.Identity._me.refreshNetworks(),People.RecentActivity.Identity._me};People.RecentActivity.Identity.createFromDataContext=function(n,t){return n!=null&&n.isInAddressBook?People.RecentActivity.Identity.createIdentity(n.objectId):t!=null&&Jx.isNonEmptyString(t.objectId)&&Jx.isNonEmptyString(t.objectSourceId)?People.RecentActivity.Identity.createTemporaryIdentity(t):null};People.RecentActivity.Identity._getMeId=function(){if(!Jx.isNonEmptyString(People.RecentActivity.Identity._meId))try{var n=Jx.root._platformCache.getDefaultMeContact();People.RecentActivity.Identity._meId=n.objectId}catch(t){Jx.log.exception("People.RecentActivity.Identity._getMeId: failed to get ME contact.",t)}return People.RecentActivity.Identity._meId};People.RecentActivity.Identity.prototype._networks=null;People.RecentActivity.Identity.prototype._identityId=null;People.RecentActivity.Identity.prototype._identityType=0;People.RecentActivity.Identity.prototype._disposed=false;People.RecentActivity.Identity.prototype._capabilities=null;Object.defineProperty(People.RecentActivity.Identity.prototype,"capabilities",{get:function(){return this._capabilities==null&&(this._capabilities=this.isWhatsNew?People.RecentActivity.Platform.SocialCapabilities.whatsNewCapabilities:this.isMe?People.RecentActivity.Platform.SocialCapabilities.meCapabilities:new People.RecentActivity.Platform.SocialCapabilities(this.getDataContext())),this._capabilities}});Object.defineProperty(People.RecentActivity.Identity.prototype,"id",{get:function(){return this._identityId}});Object.defineProperty(People.RecentActivity.Identity.prototype,"isMe",{get:function(){return false},configurable:true});Object.defineProperty(People.RecentActivity.Identity.prototype,"isTemporary",{get:function(){return false},configurable:true});Object.defineProperty(People.RecentActivity.Identity.prototype,"isWhatsNew",{get:function(){return false},configurable:true});Object.defineProperty(People.RecentActivity.Identity.prototype,"networks",{get:function(){return this._ensureNetworks(),this._networks}});Object.defineProperty(People.RecentActivity.Identity.prototype,"type",{get:function(){return this._identityType}});People.RecentActivity.Identity.prototype.dispose=function(){this._disposed||(this.isMe||this.isWhatsNew||(this._disposed=true),this.onDisposed())};People.RecentActivity.Identity.prototype.refreshNetworks=function(){this._networks!=null&&this.onRefreshNetworks()};People.RecentActivity.Identity.prototype.ensureFactory=function(){this._ensureNetworks()};People.RecentActivity.Identity.prototype.onDisposed=function(){if(!this.isMe&&!this.isWhatsNew){if(this._networks!=null){for(var n=0,t=this._networks.count;n<t;n++)this._networks.item(n).dispose();this._networks=null}this._capabilities!=null&&(this._capabilities.dispose(),this._capabilities=null)}};People.RecentActivity.Identity.prototype.onEnsureNetworks=function(){var t=People.RecentActivity.Providers.FeedProviderFactory.instance.getNetworks(this._identityId),n=new People.RecentActivity.NetworkCollection(this);return n.addRangeByInfo(t),n};People.RecentActivity.Identity.prototype.onRefreshNetworks=function(){var n=People.RecentActivity.Providers.FeedProviderFactory.instance.getNetworks(this._identityId);this._networks.updateByInfo(n)};People.RecentActivity.Identity.prototype._ensureNetworks=function(){this._networks==null&&(this._networks=this.onEnsureNetworks())};People.RecentActivity.PermanentIdentity=function(n){People.RecentActivity.Identity.call(this,n,People.RecentActivity.Providers.IdentityType.person)};Jx.inherit(People.RecentActivity.PermanentIdentity,People.RecentActivity.Identity);People.RecentActivity.PermanentIdentity.prototype._person$1=null;Object.defineProperty(People.RecentActivity.PermanentIdentity.prototype,"name",{get:function(){var n=this._getPerson$1();return n!=null?n.calculatedUIName:null},configurable:true});People.RecentActivity.PermanentIdentity.prototype.getDataContext=function(){return this._getPerson$1()};People.RecentActivity.PermanentIdentity.prototype._getPerson$1=function(){var n,i,t;if(this._person$1==null)try{n=Jx.root.getPlatformCache();i=n.getPlatform();this._person$1=i.peopleManager.tryLoadPerson(this.id);t=n.getDefaultMeContact();this._person$1.objectId===t.objectId&&(this._person$1=t)}catch(r){Jx.log.write(2,"Failed to query platform: "+r.toString())}return this._person$1};People.RecentActivity.MeIdentity=function(n){People.RecentActivity.PermanentIdentity.call(this,n)};Jx.inherit(People.RecentActivity.MeIdentity,People.RecentActivity.PermanentIdentity);Object.defineProperty(People.RecentActivity.MeIdentity.prototype,"isMe",{get:function(){return true},configurable:true});People.RecentActivity.Network=function(n,t){this._info=t;this._capabilities=new People.RecentActivity.NetworkCapabilities(t);this._identity=n;this._name=t.name;this._icon=t.icon};Jx.mix(People.RecentActivity.Network.prototype,Jx.Events);Jx.mix(People.RecentActivity.Network.prototype,People.Social.Events);People.RecentActivity.Network.prototype._info=null;People.RecentActivity.Network.prototype._capabilities=null;People.RecentActivity.Network.prototype._identity=null;People.RecentActivity.Network.prototype._provider=null;People.RecentActivity.Network.prototype._feed=null;People.RecentActivity.Network.prototype._albums=null;People.RecentActivity.Network.prototype._notifications=null;People.RecentActivity.Network.prototype._name=null;People.RecentActivity.Network.prototype._icon=null;People.RecentActivity.Network.prototype._disposed=false;Object.defineProperty(People.RecentActivity.Network.prototype,"id",{get:function(){return this._info.id}});Object.defineProperty(People.RecentActivity.Network.prototype,"objectId",{get:function(){return this._info.objectId}});Object.defineProperty(People.RecentActivity.Network.prototype,"icon",{get:function(){return this._icon},set:function(n){n!==this._icon&&(this._icon=n,this._onPropertyChanged("Icon"))}});Object.defineProperty(People.RecentActivity.Network.prototype,"name",{get:function(){return this._name},set:function(n){n!==this._name&&(this._name=n,this._onPropertyChanged("Name"))}});Object.defineProperty(People.RecentActivity.Network.prototype,"capabilities",{get:function(){return this._capabilities}});Object.defineProperty(People.RecentActivity.Network.prototype,"albums",{get:function(){return this._albums==null&&(this._albums=new People.RecentActivity.PhotoAlbumCollection(this._getProvider(),this)),this._albums}});Object.defineProperty(People.RecentActivity.Network.prototype,"feed",{get:function(){return this._feed==null&&(this._feed=new People.RecentActivity.Feed(this._getProvider(),this)),this._feed}});Object.defineProperty(People.RecentActivity.Network.prototype,"notifications",{get:function(){return this._notifications==null&&this._info.isNotificationsEnabled&&(this._notifications=new People.RecentActivity.NotificationFeed(this)),this._notifications}});Object.defineProperty(People.RecentActivity.Network.prototype,"user",{get:function(){return People.RecentActivity.ContactCache.findOrCreateContact(this._info.user)}});Object.defineProperty(People.RecentActivity.Network.prototype,"isAggregatedNetwork",{get:function(){return this._info.isAggregatedNetwork}});Object.defineProperty(People.RecentActivity.Network.prototype,"identity",{get:function(){return this._identity}});Object.defineProperty(People.RecentActivity.Network.prototype,"shareRefreshDelay",{get:function(){return this._info.shareRefreshDelay}});Object.defineProperty(People.RecentActivity.Network.prototype,"info",{get:function(){return this._info}});People.RecentActivity.Network.prototype.dispose=function(){this._disposed||(this._disposed=true,this._provider!=null&&this._provider.dispose(),this._albums!=null&&this._albums.dispose(),this._feed!=null&&this._feed.dispose(),this._provider=null)};People.RecentActivity.Network.prototype.getObject=function(n,t,i){var r=People.RecentActivity.Core.create_feedObjectInfo(n,this._info.id,t,null,null,0,null,null,null,null);this._getProvider().getCachedFeedObject(r,i)};People.RecentActivity.Network.prototype.onUpdated=function(n){if(!this._disposed)if(n.id===this._info.id)Jx.isNonEmptyString(n.icon)&&(this.icon=n.icon),Jx.isNonEmptyString(n.name)&&(this.name=n.name);else{var t=this._identity.networks.findById(n.id);if(t!=null)t.onUpdated(n)}};People.RecentActivity.Network.prototype.onRefreshFeedEntriesCompleted=function(n,t,i,r,u,f){if(!this._disposed)this.feed.onRefreshFeedEntriesCompleted(n,t,i,r,u,f)};People.RecentActivity.Network.prototype.onGetCachedFeedEntriesCompleted=function(n,t,i){if(!this._disposed)this.feed.onGetCachedFeedEntriesCompleted(n,t,i)};People.RecentActivity.Network.prototype.onRefreshCommentsCompleted=function(n,t,i,r,u){if(!this._disposed){var f=u,e=f.context;e.comments.onRefreshCompleted(n,i,r,f.userState)}};People.RecentActivity.Network.prototype.onRefreshReactionsCompleted=function(n,t,i,r,u){if(!this._disposed){var f=u,e=f.context;e.reactions.onRefreshCompleted(n,i,r,f.userState)}};People.RecentActivity.Network.prototype.onCommentAdded=function(n,t,i,r){if(!this._disposed){var u=r,f=u.context;f.comments.onCommentAdded(n,i,u.userState)}};People.RecentActivity.Network.prototype.onReactionAdded=function(n,t,i,r){if(!this._disposed){var u=r,f=u.context;f.reactions.onReactionAdded(n,i,u.userState)}};People.RecentActivity.Network.prototype.onReactionRemoved=function(n,t,i,r){if(!this._disposed){var u=r,f=u.context;f.reactions.onReactionRemoved(n,i,u.userState)}};People.RecentActivity.Network.prototype.onGetCachedAlbumsCompleted=function(n,t,i){if(!this._disposed)this.albums.onGetCachedAlbumsCompleted(n,t,i)};People.RecentActivity.Network.prototype.onRefreshAlbumsCompleted=function(n,t,i,r,u){if(!this._disposed)this.albums.onRefreshAlbumsCompleted(n,t,i,r,u)};People.RecentActivity.Network.prototype.onRefreshAlbumCompleted=function(n,t,i,r,u,f){if(!this._disposed){var e=f,o=e.context;o.onUpdated(t);o.onRefreshAlbumCompleted(n,i,r,u,e.userState)}};People.RecentActivity.Network.prototype.onRefreshPhotoCompleted=function(n,t,i,r,u){var e,f,o;if(!this._disposed){e=u;f=e.context;f.onUpdated(t);f.onRefreshPhotoCompleted(n,i,r,e.userState);o=f.album;o!=null&&o.photos.sort(function(n,t){return n.index-t.index})}};People.RecentActivity.Network.prototype.onGetMoreEntriesCompleted=function(n,t,i,r){if(!this._disposed)this.feed.onGetMoreEntriesCompleted(n,t,i,r)};People.RecentActivity.Network.prototype.onGetCachedFeedObjectCompleted=function(n,t,i){this._disposed||(n=this._onGetObjectCompleted(n,t,i,false),n.code!==People.RecentActivity.Core.ResultCode.success&&this._getProvider().getFeedObject(t,i))};People.RecentActivity.Network.prototype.onGetFeedObjectCompleted=function(n,t,i){this._disposed||this._onGetObjectCompleted(n,t,i,true)};People.RecentActivity.Network.prototype.onFeedObjectAdded=function(n,t,i){if(!this._disposed)this._feed.onAddEntryCompleted(n,t,i)};People.RecentActivity.Network.prototype.onRefreshNotificationsCompleted=function(n,t,i,r,u){if(!this._disposed)this._notifications.onRefreshNotificationsCompleted(n,t,i,r,u)};People.RecentActivity.Network.prototype.onGetCachedNotificationsCompleted=function(n,t,i){if(!this._disposed)this._notifications.onGetCachedNotificationsCompleted(n,t,i)};People.RecentActivity.Network.prototype.onMarkNotificationsReadCompleted=function(n,t,i){if(!this._disposed)this._notifications.onMarkNotificationsReadCompleted(n,t,i)};People.RecentActivity.Network.prototype.onGetUnreadNotificationsCountCompleted=function(n,t,i){if(!this._disposed)this._notifications.onGetUnreadNotificationsCountCompleted(n,t,i)};People.RecentActivity.Network.prototype.ensureProvider=function(){this._provider==null&&(this._provider=People.RecentActivity.Providers.FeedProviderFactory.instance.createFeedProvider(this._identity.id,this._identity.type,this._info,this))};People.RecentActivity.Network.prototype.refreshNotifications=function(n){this._getProvider().refreshNotifications(n)};People.RecentActivity.Network.prototype.getCachedNotifications=function(n){this._getProvider().getCachedNotifications(n)};People.RecentActivity.Network.prototype.markNotificationsRead=function(n,t){this._getProvider().markNotificationsRead(n,t)};People.RecentActivity.Network.prototype.getUnreadNotificationsCount=function(n){this._getProvider().getUnreadNotificationsCount(n)};People.RecentActivity.Network.prototype._getProvider=function(){return this.ensureProvider(),this._provider};People.RecentActivity.Network.prototype._onGetObjectCompleted=function(n,t,i,r){var u=null;if(n.code===People.RecentActivity.Core.ResultCode.success){switch(t.type){case People.RecentActivity.Core.FeedObjectInfoType.entry:u=this.feed.entries.findOrCreateEntryByInfo(t);break;case People.RecentActivity.Core.FeedObjectInfoType.photo:u=this.albums.findOrCreatePhotoByInfo(t);break;case People.RecentActivity.Core.FeedObjectInfoType.photoAlbum:u=this.albums.findOrCreateAlbumByInfo(t)}u==null&&(n.code=People.RecentActivity.Core.ResultCode.failure)}return(n.code===People.RecentActivity.Core.ResultCode.success||r)&&this.raiseEvent("getobjectcompleted",new People.RecentActivity.FeedObjectActionCompletedEventArgs(this,n,u,i)),n};People.RecentActivity.Network.prototype._onPropertyChanged=function(n){this.raiseEvent("propertychanged",new People.RecentActivity.NotifyPropertyChangedEventArgs(this,n))};People.RecentActivity.NetworkCapabilities=function(n){var t,r,i;for(this._info=n,this._reactions=new Array(n.reactions.length),this._reactionMap={},t=0,r=n.reactions.length;t<r;t++)i=new People.RecentActivity.NetworkReaction(n.reactions[t]),this._reactions[t]=i,this._reactionMap[i.id]=i};People.RecentActivity.NetworkCapabilities.prototype._info=null;People.RecentActivity.NetworkCapabilities.prototype._reactions=null;People.RecentActivity.NetworkCapabilities.prototype._reactionMap=null;Object.defineProperty(People.RecentActivity.NetworkCapabilities.prototype,"commentsEnabled",{get:function(){return this._info.isCommentingEnabled}});Object.defineProperty(People.RecentActivity.NetworkCapabilities.prototype,"reactions",{get:function(){return this._reactions}});People.RecentActivity.NetworkCapabilities.prototype.findReactionType=function(n){return Jx.isUndefined(this._reactionMap[n.id])?null:this._reactionMap[n.id]};People.RecentActivity.NetworkCollection=function(n){People.RecentActivity.Collection.call(this);this._identity$1=n;this._map$1={}};Jx.inherit(People.RecentActivity.NetworkCollection,People.RecentActivity.Collection);People.RecentActivity.NetworkCollection.prototype._identity$1=null;People.RecentActivity.NetworkCollection.prototype._map$1=null;People.RecentActivity.NetworkCollection.prototype._aggregatedNetwork$1=null;Object.defineProperty(People.RecentActivity.NetworkCollection.prototype,"aggregatedNetwork",{get:function(){return this._aggregatedNetwork$1}});People.RecentActivity.NetworkCollection.prototype.findById=function(n){return Jx.isUndefined(this._map$1[n])?null:this._map$1[n]};People.RecentActivity.NetworkCollection.prototype.addByInfo=function(n){var t=new People.RecentActivity.Network(this._identity$1,n);n.id===People.RecentActivity.Configuration.aggregatedNetworkId&&(this._aggregatedNetwork$1=t);this._map$1[n.id]=t;this.addInternal(t)};People.RecentActivity.NetworkCollection.prototype.addRangeByInfo=function(n){var r,t,u,i;if(n.length>0){for(r=new Array(n.length),t=0,u=n.length;t<u;t++)i=new People.RecentActivity.Network(this._identity$1,n[t]),n[t].id===People.RecentActivity.Configuration.aggregatedNetworkId&&(this._aggregatedNetwork$1=i),this._map$1[i.id]=i,r[t]=i;this.addRangeInternal(r)}};People.RecentActivity.NetworkCollection.prototype.insertByInfo=function(n,t){var i=new People.RecentActivity.Network(this._identity$1,t);t.id===People.RecentActivity.Configuration.aggregatedNetworkId&&(this._aggregatedNetwork$1=i);this._map$1[t.id]=i;this.insertInternal(n,i)};People.RecentActivity.NetworkCollection.prototype.updateByInfo=function(n){for(var h=[],u={},f=false,e,o,i,r,c,s,t=0;t<n.length;t++)e=n[t],u[e.id]=e;for(t=0,o=this.items;t<o.length;t++)i=o[t],!Jx.isUndefined(u[i.id])||(delete this._map$1[i.id],i.id===People.RecentActivity.Configuration.aggregatedNetworkId&&(this._aggregatedNetwork$1=null),i.dispose(),h.push(i),f=true);for(this.removeRangeInternal(h),r=0;r<n.length;r++)c=this.findById(n[r].id),c==null&&(this.insertByInfo(r,n[r]),f=true);f&&!Jx.isUndefined(u[People.RecentActivity.Configuration.aggregatedNetworkId])&&(s=this.findById(People.RecentActivity.Configuration.aggregatedNetworkId),s.dispose(),this.removeInternal(s),this.addByInfo(u[People.RecentActivity.Configuration.aggregatedNetworkId]))};People.RecentActivity.NetworkCollection.prototype.item=function(n){return this.items[n]};People.RecentActivity.NetworkReaction=function(n){this._info=n};People.RecentActivity.NetworkReaction.prototype._info=null;Object.defineProperty(People.RecentActivity.NetworkReaction.prototype,"id",{get:function(){return this._info.id}});Object.defineProperty(People.RecentActivity.NetworkReaction.prototype,"iconFeed",{get:function(){return this._info.iconFeed}});Object.defineProperty(People.RecentActivity.NetworkReaction.prototype,"iconSelfPage",{get:function(){return this._info.iconSelfPage}});Object.defineProperty(People.RecentActivity.NetworkReaction.prototype,"iconClass",{get:function(){return this._info.iconClass}});Object.defineProperty(People.RecentActivity.NetworkReaction.prototype,"isCountShown",{get:function(){return this._info.isCountShown}});Object.defineProperty(People.RecentActivity.NetworkReaction.prototype,"isToggle",{get:function(){return this._info.isToggle}});Object.defineProperty(People.RecentActivity.NetworkReaction.prototype,"stringId",{get:function(){return this._info.stringId}});Object.defineProperty(People.RecentActivity.NetworkReaction.prototype,"type",{get:function(){return this._info.type}});Object.defineProperty(People.RecentActivity.NetworkReaction.prototype,"info",{get:function(){return this._info}});People.RecentActivity.NotificationEntry=function(n){this._info=n;this._publisher=People.RecentActivity.ContactCache.findOrCreateContact(n.publisher);this._timestamp=new Date(n.timestamp);this._isUnread=n.isUnread;this._isUnreadInUI=n.isUnread};Jx.mix(People.RecentActivity.NotificationEntry.prototype,Jx.Events);Jx.mix(People.RecentActivity.NotificationEntry.prototype,People.Social.Events);People.RecentActivity.NotificationEntry.prototype._info=null;People.RecentActivity.NotificationEntry.prototype._publisher=null;People.RecentActivity.NotificationEntry.prototype._timestamp=null;People.RecentActivity.NotificationEntry.prototype._isUnread=false;People.RecentActivity.NotificationEntry.prototype._isUnreadInUI=false;Object.defineProperty(People.RecentActivity.NotificationEntry.prototype,"id",{get:function(){return this._info.id}});Object.defineProperty(People.RecentActivity.NotificationEntry.prototype,"publisher",{get:function(){return this._publisher}});Object.defineProperty(People.RecentActivity.NotificationEntry.prototype,"timestamp",{get:function(){return this._timestamp}});Object.defineProperty(People.RecentActivity.NotificationEntry.prototype,"message",{get:function(){return this._info.message}});Object.defineProperty(People.RecentActivity.NotificationEntry.prototype,"objectId",{get:function(){return this._info.objectId}});Object.defineProperty(People.RecentActivity.NotificationEntry.prototype,"objectType",{get:function(){return this._info.objectType}});Object.defineProperty(People.RecentActivity.NotificationEntry.prototype,"link",{get:function(){return this._info.link}});Object.defineProperty(People.RecentActivity.NotificationEntry.prototype,"via",{get:function(){return this._info.via}});Object.defineProperty(People.RecentActivity.NotificationEntry.prototype,"sourceId",{get:function(){return this._info.sourceId}});Object.defineProperty(People.RecentActivity.NotificationEntry.prototype,"isReply",{get:function(){return this._info.isReply}});Object.defineProperty(People.RecentActivity.NotificationEntry.prototype,"isShare",{get:function(){return this._info.isShare}});Object.defineProperty(People.RecentActivity.NotificationEntry.prototype,"isUnread",{get:function(){return this._isUnread},set:function(n){n!==this._isUnread&&(this._isUnread=n,n&&(this.isUnreadInUI=true),this._onPropertyChanged("IsUnread"))}});Object.defineProperty(People.RecentActivity.NotificationEntry.prototype,"isUnreadInUI",{get:function(){return this._isUnreadInUI},set:function(n){n!==this._isUnreadInUI&&(this._isUnreadInUI=n,this._onPropertyChanged("IsUnreadInUI"))}});Object.defineProperty(People.RecentActivity.NotificationEntry.prototype,"info",{get:function(){return this._info}});Object.defineProperty(People.RecentActivity.NotificationEntry.prototype,"sortOrder",{get:function(){return this._timestamp.getTime()}});People.RecentActivity.NotificationEntry.prototype.onRefreshed=function(n){this._info.isUnread=n.isUnread;this.isUnread=n.isUnread};People.RecentActivity.NotificationEntry.prototype._onPropertyChanged=function(n){this.raiseEvent("propertychanged",new People.RecentActivity.NotifyPropertyChangedEventArgs(this,n))};People.RecentActivity.NotificationCollection=function(n){People.RecentActivity.Collection.call(this);this._map$1={};this._network$1=n};Jx.inherit(People.RecentActivity.NotificationCollection,People.RecentActivity.Collection);People.RecentActivity.NotificationCollection.prototype._map$1=null;People.RecentActivity.NotificationCollection.prototype._network$1=null;People.RecentActivity.NotificationCollection.prototype._unreadCount$1=0;People.RecentActivity.NotificationCollection.prototype._unreadUICount$1=0;Object.defineProperty(People.RecentActivity.NotificationCollection.prototype,"unreadCount",{get:function(){return this._unreadCount$1},set:function(n){if(n!==this._unreadCount$1){this._unreadCount$1=n;this.onPropertyChanged("UnreadCount")}}});Object.defineProperty(People.RecentActivity.NotificationCollection.prototype,"unreadUICount",{get:function(){return this._unreadUICount$1},set:function(n){if(n!==this._unreadUICount$1){this._unreadUICount$1=n;this.onPropertyChanged("UnreadUICount")}}});People.RecentActivity.NotificationCollection.prototype.findNotification=function(n){return this.findNotificationById(n.id)};People.RecentActivity.NotificationCollection.prototype.findNotificationById=function(n){return Jx.isUndefined(this._map$1[n])?null:this._map$1[n]};People.RecentActivity.NotificationCollection.prototype.markAllNotificationsRead=function(n){for(var i=[],f,u,t=0,r=this.items;t<r.length;t++)f=r[t],u=f.info,u.isUnread&&i.push(u);i.length>0&&this._network$1.markNotificationsRead(i,n)};People.RecentActivity.NotificationCollection.prototype.markAllNotificationsReadInUI=function(){for(var i,n=0,t=this.items;n<t.length;n++)i=t[n],i.isUnreadInUI=false;this._updateUnreadCount$1()};People.RecentActivity.NotificationCollection.prototype.onNotificationsAdded=function(n){this._addRangeByInfo$1(n);this._updateUnreadCount$1()};People.RecentActivity.NotificationCollection.prototype.onRefreshNotificationsCompleted=function(n,t,i){n.length>0&&this._addRangeByInfo$1(n);t.length>0&&this._updateRangeByInfo$1(t);i.length>0&&this._removeRangeByInfo$1(i);this._updateUnreadCount$1()};People.RecentActivity.NotificationCollection.prototype.onNotificationsMarkedAsRead=function(n){for(var r,i,t=0,u=n.length;t<u;t++)if(r=n[t],i=this.findNotification(r),i!=null){i.info.isUnread&&this._unreadCount$1--;i.onRefreshed(r)}this._updateUnreadCount$1()};People.RecentActivity.NotificationCollection.prototype._updateUnreadCount$1=function(){for(var r=0,u=0,i,n=0,t=this.items;n<t.length;n++)i=t[n],i.isUnread&&r++,i.isUnreadInUI&&u++;this.unreadCount=r;this.unreadUICount=u};People.RecentActivity.NotificationCollection.prototype._addRangeByInfo$1=function(n){var t,i,f,r,u;if(n.length>0){for(t=[],i=0,f=n.length;i<f;i++)r=n[i],!Jx.isUndefined(this._map$1[r.id])||(u=new People.RecentActivity.NotificationEntry(r),this._map$1[r.id]=u,t.push(u));t.length>0&&People.RecentActivity.CollectionHelper.addSortableItems(this,t,true)}};People.RecentActivity.NotificationCollection.prototype._updateRangeByInfo$1=function(n){var r,u,e,t,i,f;for(r=[],u=0,e=n.length;u<e;u++)if(t=n[u],i=this.findNotification(t),i!=null)if(t.timestamp===i.timestamp.getTime())i.onRefreshed(t);else this._removeByInfo$1(i.info),f=new People.RecentActivity.NotificationEntry(t),this._map$1[t.id]=f,r.push(f);r.length>0&&People.RecentActivity.CollectionHelper.addSortableItems(this,r,true)};People.RecentActivity.NotificationCollection.prototype._removeByInfo$1=function(n){if(!Jx.isUndefined(this._map$1[n.id])){var t=this._map$1[n.id];delete this._map$1[n.id];this.removeInternal(t)}};People.RecentActivity.NotificationCollection.prototype._removeRangeByInfo$1=function(n){for(var t=0,i=n.length;t<i;t++)this._removeByInfo$1(n[t])};People.RecentActivity.NotificationCollection.prototype.item=function(n){return this.items[n]};People.RecentActivity.NotificationFeed=function(n){this._network=n;this._notifications=new People.RecentActivity.NotificationCollection(n)};Jx.mix(People.RecentActivity.NotificationFeed.prototype,Jx.Events);Jx.mix(People.RecentActivity.NotificationFeed.prototype,People.Social.Events);People.RecentActivity.NotificationFeed._refreshUnreadCountTimeout=3e5;People.RecentActivity.NotificationFeed.prototype._network=null;People.RecentActivity.NotificationFeed.prototype._notifications=null;People.RecentActivity.NotificationFeed.prototype._initializeStarted=false;People.RecentActivity.NotificationFeed.prototype._initializeCompleted=false;People.RecentActivity.NotificationFeed.prototype._initializeFromHydration=false;People.RecentActivity.NotificationFeed.prototype._initializationResult=null;People.RecentActivity.NotificationFeed.prototype._unreadCount=0;People.RecentActivity.NotificationFeed.prototype._refreshEnabled=true;Object.defineProperty(People.RecentActivity.NotificationFeed.prototype,"notifications",{get:function(){return this._notifications}});Object.defineProperty(People.RecentActivity.NotificationFeed.prototype,"initialized",{get:function(){return this._initializeCompleted}});Object.defineProperty(People.RecentActivity.NotificationFeed.prototype,"unreadCount",{get:function(){return this._unreadCount},set:function(n){this._unreadCount!==n&&(this._unreadCount=n,this._onPropertyChanged("UnreadCount"))}});People.RecentActivity.NotificationFeed.prototype.initializeFromHydration=function(n){this._initializeStarted?this._initializeCompleted&&this._onInitializeCompleted(this._initializationResult,n):(this._initializeStarted=true,this._initializeFromHydration=true,this._network.getCachedNotifications(n))};People.RecentActivity.NotificationFeed.prototype.initialize=function(n){this._initializeStarted?this._initializeCompleted&&this._onInitializeCompleted(this._initializationResult,n):(this._initializeStarted=true,this._network.refreshNotifications(n))};People.RecentActivity.NotificationFeed.prototype.dispose=function(){};People.RecentActivity.NotificationFeed.prototype.refresh=function(n){this._network.refreshNotifications(n)};People.RecentActivity.NotificationFeed.prototype.markAllNotificationsRead=function(n){this._notifications.unreadCount>0?this._notifications.markAllNotificationsRead(n):(this.unreadCount=0,this._onMarkAllNotificationsReadCompleted(new People.RecentActivity.Core.ResultInfo(People.RecentActivity.Core.ResultCode.success),n))};People.RecentActivity.NotificationFeed.prototype.markAllNotificationsReadInUI=function(){this._notifications.markAllNotificationsReadInUI()};People.RecentActivity.NotificationFeed.prototype.refreshUnreadCount=function(n){People.RecentActivity.Core.EtwHelper.writeFeedEvent(People.RecentActivity.Core.EtwEventName.uiGetUnreadNotificationsCountStart,this._network.id,this._network.identity.id);this._network.getUnreadNotificationsCount(n)};People.RecentActivity.NotificationFeed.prototype.onRefreshNotificationsCompleted=function(n,t,i,r,u){var f=false;if(n.isSuccessOrPartialFailure){f=t.length>0||r.length>0;this._notifications.onRefreshNotificationsCompleted(t,i,r)}this._initializeCompleted?this.raiseEvent("refreshcompleted",new People.RecentActivity.RefreshActionCompletedEventArgs(this,n,f,u)):(this._initializationResult=n,this._onInitializeCompleted(this._initializationResult,u))};People.RecentActivity.NotificationFeed.prototype.onGetCachedNotificationsCompleted=function(n,t,i){if(n.code===People.RecentActivity.Core.ResultCode.success&&t.length>0)this._notifications.onNotificationsAdded(t);this._initializeFromHydration&&(this._initializationResult=n,this._onInitializeCompleted(this._initializationResult,i))};People.RecentActivity.NotificationFeed.prototype.onMarkNotificationsReadCompleted=function(n,t,i){if(n.code===People.RecentActivity.Core.ResultCode.success){this._notifications.onNotificationsMarkedAsRead(t);this.unreadCount=0}this._onMarkAllNotificationsReadCompleted(n,i)};People.RecentActivity.NotificationFeed.prototype.onGetUnreadNotificationsCountCompleted=function(n,t){this.unreadCount=t;People.RecentActivity.Core.EtwHelper.writeFeedEvent(People.RecentActivity.Core.EtwEventName.uiGetUnreadNotificationsCountEnd,this._network.id,this._network.identity.id)};People.RecentActivity.NotificationFeed.prototype._onInitializeCompleted=function(n,t){this._initializeCompleted=true;this.raiseEvent("initializecompleted",new People.RecentActivity.ActionCompletedEventArgs(this,n,t))};People.RecentActivity.NotificationFeed.prototype._onPropertyChanged=function(n){this.raiseEvent("propertychanged",new People.RecentActivity.NotifyPropertyChangedEventArgs(this,n))};People.RecentActivity.NotificationFeed.prototype._onMarkAllNotificationsReadCompleted=function(n,t){this.raiseEvent("markallnotificationsreadcompleted",new People.RecentActivity.ActionCompletedEventArgs(this,n,t))};People.RecentActivity.NotificationFeed.prototype._onAutoRefreshUnreadCountTimerElapsed=function(){this.refreshUnreadCount()};People.RecentActivity.Photo=function(n,t,i,r){People.RecentActivity.FeedObject.call(this,n,t,r);this._album$1=i;this._info$1=r.data;this._caption$1=this._info$1.caption;var u=this._info$1.index;this._index$1=u>=0?u:0};Jx.inherit(People.RecentActivity.Photo,People.RecentActivity.FeedObject);Jx.mix(People.RecentActivity.Photo.prototype,Jx.Events);Jx.mix(People.RecentActivity.Photo.prototype,People.Social.Events);People.RecentActivity.Photo.prototype._album$1=null;People.RecentActivity.Photo.prototype._info$1=null;People.RecentActivity.Photo.prototype._entities$1=null;People.RecentActivity.Photo.prototype._tags$1=null;People.RecentActivity.Photo.prototype._caption$1=null;People.RecentActivity.Photo.prototype._index$1=0;People.RecentActivity.Photo.prototype._isLocked$1=false;Object.defineProperty(People.RecentActivity.Photo.prototype,"album",{get:function(){return this._album$1}});Object.defineProperty(People.RecentActivity.Photo.prototype,"caption",{get:function(){return this._caption$1},set:function(n){n!==this._caption$1&&(this._caption$1=n,this._onPropertyChanged$1("Caption"))}});Object.defineProperty(People.RecentActivity.Photo.prototype,"entities",{get:function(){return this._entities$1==null&&(this._entities$1=People.RecentActivity.EntityHelper.createEntities(this._info$1.entities)),this._entities$1}});Object.defineProperty(People.RecentActivity.Photo.prototype,"index",{get:function(){return this._index$1},set:function(n){this._index$1!==n&&(this._index$1=n,this._onPropertyChanged$1("Index"))}});Object.defineProperty(People.RecentActivity.Photo.prototype,"owner",{get:function(){return People.RecentActivity.ContactCache.findOrCreateContact(this._info$1.owner)}});Object.defineProperty(People.RecentActivity.Photo.prototype,"tags",{get:function(){return this._tags$1==null&&(this._tags$1=new People.RecentActivity.PhotoTagCollection(this.provider,this.network,this)),this._tags$1}});Object.defineProperty(People.RecentActivity.Photo.prototype,"source",{get:function(){return this._info$1.source}});Object.defineProperty(People.RecentActivity.Photo.prototype,"sourceHeight",{get:function(){return this._info$1.sourceHeight}});Object.defineProperty(People.RecentActivity.Photo.prototype,"sourceWidth",{get:function(){return this._info$1.sourceWidth}});Object.defineProperty(People.RecentActivity.Photo.prototype,"originalSource",{get:function(){return this._info$1.originalSource}});Object.defineProperty(People.RecentActivity.Photo.prototype,"originalHeight",{get:function(){return this._info$1.originalSourceHeight}});Object.defineProperty(People.RecentActivity.Photo.prototype,"originalWidth",{get:function(){return this._info$1.originalSourceWidth}});Object.defineProperty(People.RecentActivity.Photo.prototype,"thumbnailSource",{get:function(){return this._info$1.thumbnailSource}});Object.defineProperty(People.RecentActivity.Photo.prototype,"thumbnailHeight",{get:function(){return this._info$1.thumbnailSourceHeight}});Object.defineProperty(People.RecentActivity.Photo.prototype,"thumbnailWidth",{get:function(){return this._info$1.thumbnailSourceWidth}});Object.defineProperty(People.RecentActivity.Photo.prototype,"isLandscape",{get:function(){return this._info$1.sourceWidth>=this._info$1.sourceHeight}});Object.defineProperty(People.RecentActivity.Photo.prototype,"isPortrait",{get:function(){return this._info$1.sourceHeight>=this._info$1.sourceWidth}});Object.defineProperty(People.RecentActivity.Photo.prototype,"sortOrder",{get:function(){return this._info$1.index}});Object.defineProperty(People.RecentActivity.Photo.prototype,"isLocked",{get:function(){return this._isLocked$1},set:function(n){this._isLocked$1=n}});Object.defineProperty(People.RecentActivity.Photo.prototype,"photoInfo",{get:function(){return this._info$1}});People.RecentActivity.Photo.prototype.onDisposed=function(){this._album$1=null;this._entities$1=null;this._info$1=null;this._tags$1!=null&&(this._tags$1.dispose(),this._tags$1=null)};People.RecentActivity.Photo.prototype.refresh=function(n){this.provider.refreshPhoto(this.objectInfo,People.RecentActivity.create_actionState(this,n))};People.RecentActivity.Photo.prototype.onUpdated=function(n){var t=n.data;this.caption=t.caption;!this._isLocked$1&&t.index>=0&&(this.index=t.index);People.RecentActivity.FeedObject.prototype.onUpdated.call(this,n)};People.RecentActivity.Photo.prototype.onRefreshPhotoCompleted=function(n,t,i,r){var u,f;u=false;n.code===People.RecentActivity.Core.ResultCode.success&&(f=this.tags,f.addRangeByInfo(t),f.removeRangeByInfo(i),u=t.length>0||i.length>0);this.raiseEvent("refreshcompleted",new People.RecentActivity.RefreshActionCompletedEventArgs(this,n,u,r))};People.RecentActivity.Photo.prototype._onPropertyChanged$1=function(n){this.raiseEvent("propertychanged",new People.RecentActivity.NotifyPropertyChangedEventArgs(this,n))};People.RecentActivity.PhotoAlbum=function(n,t,i){People.RecentActivity.FeedObject.call(this,n,t,i);this._info$1=i.data;this._photos$1=new People.RecentActivity.PhotoCollection(n,t,this);this._photos$1.addRangeByInfo(this._info$1.photos);this._info$1.cover!=null&&this._info$1.cover.id!=null&&(this._cover$1=this._photos$1.findOrCreatePhotoByInfo(this._info$1.cover));this._description$1=this._info$1.description;this._name$1=this._info$1.name};Jx.inherit(People.RecentActivity.PhotoAlbum,People.RecentActivity.FeedObject);Jx.mix(People.RecentActivity.PhotoAlbum.prototype,Jx.Events);Jx.mix(People.RecentActivity.PhotoAlbum.prototype,People.Social.Events);People.RecentActivity.PhotoAlbum.fakeAlbumId="__fake_album_id__";People.RecentActivity.PhotoAlbum.prototype._info$1=null;People.RecentActivity.PhotoAlbum.prototype._photos$1=null;People.RecentActivity.PhotoAlbum.prototype._cover$1=null;People.RecentActivity.PhotoAlbum.prototype._entities$1=null;People.RecentActivity.PhotoAlbum.prototype._name$1=null;People.RecentActivity.PhotoAlbum.prototype._description$1=null;Object.defineProperty(People.RecentActivity.PhotoAlbum.prototype,"albumId",{get:function(){return this._info$1.id}});Object.defineProperty(People.RecentActivity.PhotoAlbum.prototype,"cover",{get:function(){return this._cover$1},set:function(n){n!==this._cover$1&&(this._cover$1=n,this._onPropertyChanged$1("Cover"))}});Object.defineProperty(People.RecentActivity.PhotoAlbum.prototype,"description",{get:function(){return this._description$1},set:function(n){n!==this._description$1&&(this._description$1=n,this._onPropertyChanged$1("Description"))}});Object.defineProperty(People.RecentActivity.PhotoAlbum.prototype,"entities",{get:function(){return this._entities$1==null&&(this._entities$1=People.RecentActivity.EntityHelper.createEntities(this._info$1.entities)),this._entities$1}});Object.defineProperty(People.RecentActivity.PhotoAlbum.prototype,"isFakeAlbum",{get:function(){return this.id==="__fake_album_id__"}});Object.defineProperty(People.RecentActivity.PhotoAlbum.prototype,"name",{get:function(){return this._name$1},set:function(n){n!==this._name$1&&(this._name$1=n,this._onPropertyChanged$1("Name"))}});Object.defineProperty(People.RecentActivity.PhotoAlbum.prototype,"owner",{get:function(){return People.RecentActivity.ContactCache.findOrCreateContact(this._info$1.owner)}});Object.defineProperty(People.RecentActivity.PhotoAlbum.prototype,"photos",{get:function(){return this._photos$1}});Object.defineProperty(People.RecentActivity.PhotoAlbum.prototype,"sortOrder",{get:function(){return this.timestamp.getTime()}});Object.defineProperty(People.RecentActivity.PhotoAlbum.prototype,"albumInfo",{get:function(){return this._info$1}});People.RecentActivity.PhotoAlbum.prototype.onDisposed=function(){this._photos$1.dispose();this._photos$1=null;this._cover$1=null;this._entities$1=null;this._info$1=null};People.RecentActivity.PhotoAlbum.prototype.refresh=function(n){this.provider.refreshAlbum(this.objectInfo,People.RecentActivity.create_actionState(this,n))};People.RecentActivity.PhotoAlbum.prototype.onUpdated=function(n){var t=n.data;(this._cover$1==null||this._cover$1.id!==t.cover.id)&&t.cover!=null&&t.cover.id!=null&&(this.cover=this._photos$1.findOrCreatePhotoByInfo(t.cover));this.description=t.description;this.name=t.name;this._photos$1.totalCount=t.totalCount;People.RecentActivity.FeedObject.prototype.onUpdated.call(this,n)};People.RecentActivity.PhotoAlbum.prototype.onRefreshAlbumCompleted=function(n,t,i,r,u){var o,f,e,h,s;if(o=false,n.code===People.RecentActivity.Core.ResultCode.success){for(f=this.photos,f.addRangeByInfo(t),f.removeRangeByInfo(r),e=0,h=i.length;e<h;e++)if(s=f.findPhotoByInfo(i[e]),s!=null)s.onUpdated(i[e]);o=t.length>0||r.length>0;f.sort(function(n,t){return n.index-t.index})}this.raiseEvent("refreshcompleted",new People.RecentActivity.RefreshActionCompletedEventArgs(this,n,o,u))};People.RecentActivity.PhotoAlbum.prototype._onPropertyChanged$1=function(n){this.raiseEvent("propertychanged",new People.RecentActivity.NotifyPropertyChangedEventArgs(this,n))};People.RecentActivity.PhotoAlbumCollection=function(n,t){People.RecentActivity.Collection.call(this);this._map$1={};this._mapFake$1={};this._mapUnnamed={};this._network$1=t;this._orphanedPhotos$1={};this._provider$1=n};Jx.inherit(People.RecentActivity.PhotoAlbumCollection,People.RecentActivity.Collection);People.RecentActivity.PhotoAlbumCollection.prototype._provider$1=null;People.RecentActivity.PhotoAlbumCollection.prototype._network$1=null;People.RecentActivity.PhotoAlbumCollection.prototype._map$1=null;People.RecentActivity.PhotoAlbumCollection.prototype._mapFake$1=null;People.RecentActivity.PhotoAlbumCollection.prototype._mapUnnamed=null;People.RecentActivity.PhotoAlbumCollection.prototype._initializeCompleted$1=false;People.RecentActivity.PhotoAlbumCollection.prototype._initializeStarted$1=false;People.RecentActivity.PhotoAlbumCollection.prototype._initializeFromHydration$1=false;People.RecentActivity.PhotoAlbumCollection.prototype._orphanedPhotos$1=null;People.RecentActivity.PhotoAlbumCollection.prototype._isDisposed=false;Object.defineProperty(People.RecentActivity.PhotoAlbumCollection.prototype,"initialized",{get:function(){return this._initializeCompleted$1}});People.RecentActivity.PhotoAlbumCollection.prototype.dispose=function(){if(!this._isDisposed){this._isDisposed=true;People.Social.clearKeys(this._map$1);People.Social.clearKeys(this._mapFake$1);People.Social.clearKeys(this._orphanedPhotos$1);for(var n=this.count-1;n>=0;n--)this.item(n).dispose();this._network$1=null;this._provider$1=null}};People.RecentActivity.PhotoAlbumCollection.prototype.initializeFromHydration=function(n){this._initializeStarted$1||(this._initializeStarted$1=true,this._initializeFromHydration$1=true,this._provider$1.getCachedAlbums(n))};People.RecentActivity.PhotoAlbumCollection.prototype.initialize=function(n){this._initializeStarted$1||(this._initializeStarted$1=true,this._provider$1.refreshAlbums(n))};People.RecentActivity.PhotoAlbumCollection.prototype.refresh=function(n){this._provider$1.refreshAlbums(n)};People.RecentActivity.PhotoAlbumCollection.prototype.findAlbumByInfo=function(n){return this.findAlbumById(n.data.id)};People.RecentActivity.PhotoAlbumCollection.prototype.findOrCreateAlbumByInfo=function(n){var t=this.findAlbumByInfo(n);return t==null&&(t=this._addByInfo$1(n)),t};People.RecentActivity.PhotoAlbumCollection.prototype.findAlbumById=function(n){return Jx.isUndefined(this._map$1[n])?Jx.isUndefined(this._mapFake$1[n])?Jx.isUndefined(this._mapUnnamed[n])?null:this._mapUnnamed[n]:this._mapFake$1[n]:this._map$1[n]};People.RecentActivity.PhotoAlbumCollection.prototype.findPhotoByInfo=function(n){var t=n.data,i=this.findAlbumById(t.albumId);return i!=null?i.photos.findPhotoByInfo(n):Jx.isUndefined(this._orphanedPhotos$1[t.id])?null:this._orphanedPhotos$1[t.id]};People.RecentActivity.PhotoAlbumCollection.prototype.findOrCreatePhotoByInfo=function(n,t){var i,r,u;return(i=n.data,Jx.isNonEmptyString(i.albumId))?(r=this.findAlbumById(i.albumId),r==null&&(r=this._createAlbum(n,t)),r.photos.findOrCreatePhotoByInfo(n)):(u=new People.RecentActivity.Photo(this._provider$1,this._network$1,null,n),this._orphanedPhotos$1[i.id]=u,u)};People.RecentActivity.PhotoAlbumCollection.prototype.onGetCachedAlbumsCompleted=function(n,t,i){n.code===People.RecentActivity.Core.ResultCode.success&&t.length>0&&this._addRangeByInfo$1(t);this._initializeFromHydration$1&&this._onInitializeCompleted$1(n,i)};People.RecentActivity.PhotoAlbumCollection.prototype.onRefreshAlbumsCompleted=function(n,t,i,r,u){var f=false;n.code===People.RecentActivity.Core.ResultCode.success&&(t.length>0&&(f=true,this._addRangeByInfo$1(t)),i.length>0&&this._updateRangeByInfo$1(i),r.length>0&&(f=true,this._removeRangeByInfo$1(r)));this._initializeCompleted$1?this.raiseEvent("refreshcompleted",new People.RecentActivity.RefreshActionCompletedEventArgs(this,n,f,u)):this._onInitializeCompleted$1(n,u)};People.RecentActivity.PhotoAlbumCollection.prototype._getAlbumKey$1=function(n){var t=n.data;return t.id};People.RecentActivity.PhotoAlbumCollection.prototype._createAlbum=function(n,t){return t!=null?Jx.isNonEmptyString(t.data.name)?this._addByInfo$1(t):this._addUnnamedAlbumByInfo(t):this._addFakeAlbumByInfo$1(n)};People.RecentActivity.PhotoAlbumCollection.prototype._addFakeAlbumByInfo$1=function(n){var t,i,r;var u=n.data,e=People.RecentActivity.Core.create_photoAlbumInfo(u.albumId,u.owner,"","",new Array(0),1,n,[n]),f=People.RecentActivity.Core.create_commentDetailsInfo(0,true,People.RecentActivity.Core.Permissions.none);return f.icon=n.commentDetails.icon,t=People.RecentActivity.Core.create_feedObjectInfo("__fake_album_id__",n.sourceId,People.RecentActivity.Core.FeedObjectInfoType.photoAlbum,e,null,n.timestamp,f,new Array(0),new Array(0),new Array(0)),i=this._getAlbumKey$1(t),Jx.isUndefined(this._mapFake$1[i])?(r=new People.RecentActivity.PhotoAlbum(this._provider$1,this._network$1.identity.networks.findById(t.sourceId),t),this._mapFake$1[i]=r,r):this._mapFake$1[i]};People.RecentActivity.PhotoAlbumCollection.prototype._addUnnamedAlbumByInfo=function(n){var t,i;return t=this._getAlbumKey$1(n),Jx.isUndefined(this._mapUnnamed[t])?(i=new People.RecentActivity.PhotoAlbum(this._provider$1,this._network$1.identity.networks.findById(n.sourceId),n),this._mapUnnamed[t]=i,i):this._mapUnnamed[t]};People.RecentActivity.PhotoAlbumCollection.prototype._addByInfo$1=function(n){var t,i;return t=this._getAlbumKey$1(n),Jx.isUndefined(this._map$1[t])?(i=new People.RecentActivity.PhotoAlbum(this._provider$1,this._network$1.identity.networks.findById(n.sourceId),n),this._map$1[t]=i,People.RecentActivity.CollectionHelper.addSortableItem(this,i,true),i):this._map$1[t]};People.RecentActivity.PhotoAlbumCollection.prototype._addRangeByInfo$1=function(n){var s,i,r,e,t,u,o,f;for(s=this._network$1.identity.networks,i=[],r=0,e=n.length;r<e;r++)t=n[r],u=this._getAlbumKey$1(t),Jx.isUndefined(this._map$1[u])&&(o=t.data,Jx.isNonEmptyString(o.name)?(f=new People.RecentActivity.PhotoAlbum(this._provider$1,this._network$1.identity.networks.findById(t.sourceId),t),this._map$1[u]=f,i.push(f)):this._addUnnamedAlbumByInfo(t));i.length>0&&People.RecentActivity.CollectionHelper.addSortableItems(this,i,true)};People.RecentActivity.PhotoAlbumCollection.prototype._removeByInfo$1=function(n){var t,i;t=this._getAlbumKey$1(n);Jx.isUndefined(this._map$1[t])||(i=this._map$1[t],delete this._map$1[t],this.removeInternal(i));delete this._mapFake$1[t];delete this._mapUnnamed[t]};People.RecentActivity.PhotoAlbumCollection.prototype._removeRangeByInfo$1=function(n){for(var t=0,i=n.length;t<i;t++)this._removeByInfo$1(n[t])};People.RecentActivity.PhotoAlbumCollection.prototype._updateRangeByInfo$1=function(n){for(var i,t,r,u=0,f=n.length;u<f;u++)if(i=n[u],t=this._getAlbumKey$1(i),Jx.isUndefined(this._map$1[t]))if(Jx.isUndefined(this._mapFake$1[t])){if(!Jx.isUndefined(this._mapUnnamed[t])){r=this._mapUnnamed[t];r.onUpdated(i);Jx.isNonEmptyString(r.name)||(this._map$1[t]=r,delete this._mapUnnamed[t],People.RecentActivity.CollectionHelper.addSortableItem(this,r,true))}}else this._mapFake$1[t].onUpdated(i);else this._map$1[t].onUpdated(i)};People.RecentActivity.PhotoAlbumCollection.prototype._onInitializeCompleted$1=function(n,t){this._initializeCompleted$1=true;this.raiseEvent("initializecompleted",new People.RecentActivity.ActionCompletedEventArgs(this,n,t))};People.RecentActivity.PhotoAlbumCollection.prototype.item=function(n){return this.items[n]};People.RecentActivity.PhotoCollection=function(n,t,i){People.RecentActivity.Collection.call(this);this._album$1=i;this._locks$1={};this._locksScheduledToRemove$1={};this._map$1={};this._network$1=t;this._provider$1=n;this._totalCount$1=i.albumInfo.totalCount};Jx.inherit(People.RecentActivity.PhotoCollection,People.RecentActivity.Collection);People.RecentActivity.PhotoCollection.prototype._provider$1=null;People.RecentActivity.PhotoCollection.prototype._network$1=null;People.RecentActivity.PhotoCollection.prototype._map$1=null;People.RecentActivity.PhotoCollection.prototype._album$1=null;People.RecentActivity.PhotoCollection.prototype._totalCount$1=0;People.RecentActivity.PhotoCollection.prototype._locks$1=null;People.RecentActivity.PhotoCollection.prototype._locksScheduledToRemove$1=null;People.RecentActivity.PhotoCollection.prototype._isDisposed=false;Object.defineProperty(People.RecentActivity.PhotoCollection.prototype,"totalCount",{get:function(){return this._totalCount$1},set:function(n){if(n=Math.max(n,Object.keys(this._map$1).length),this._totalCount$1!==n){this._totalCount$1=n;this.onPropertyChanged("TotalCount")}}});People.RecentActivity.PhotoCollection.prototype.dispose=function(){if(!this._isDisposed){this._isDisposed=true;for(var n=this.count-1;n>=0;n--)this.item(n).dispose();People.Social.clearKeys(this._locks$1);People.Social.clearKeys(this._locksScheduledToRemove$1);People.Social.clearKeys(this._map$1);this._album$1=null;this._network$1=null;this._provider$1=null}};People.RecentActivity.PhotoCollection.prototype.lock=function(n){Jx.log.write(4,"PhotoCollection::Lock("+n+")");!Jx.isUndefined(this._locks$1[n])||(this._locks$1[n]=[]);var t=People.RecentActivity.create_photoCollectionLockToken(n);return this._locks$1[n].push(t),t};People.RecentActivity.PhotoCollection.prototype.unlock=function(n){var t,i,r;t=n.photoId;Jx.log.write(4,"PhotoCollection::Unlock("+t+")");Jx.isUndefined(this._locks$1[t])||(i=this._locks$1[t],r=i.indexOf(n),r!==-1&&(i.splice(r,1),i.length||(delete this._locks$1[t],Jx.isUndefined(this._locksScheduledToRemove$1[t])||(Jx.log.write(4,"PhotoCollection::Unlock() --> References == 0, cleaning up photo"),this.removeByInfo(this._locksScheduledToRemove$1[t]),delete this._locksScheduledToRemove$1[t]))))};People.RecentActivity.PhotoCollection.prototype.addByInfo=function(n){var t,i;return t=this._getPhotoKey$1(n),!Jx.isUndefined(this._map$1[t])||(i=new People.RecentActivity.Photo(this._provider$1,this._network$1,this._album$1,n),this._map$1[t]=i,this._adjustTotalCount$1(),People.RecentActivity.CollectionHelper.addSortableItem(this,i,false)),this._map$1[t]};People.RecentActivity.PhotoCollection.prototype.addRangeByInfo=function(n){var t,i,e,r,u,f;for(t=[],i=0,e=n.length;i<e;i++)r=n[i],u=this._getPhotoKey$1(r),!Jx.isUndefined(this._map$1[u])||(f=new People.RecentActivity.Photo(this._provider$1,this._network$1,this._album$1,r),this._map$1[u]=f,t.push(f));t.length>0&&(this._adjustTotalCount$1(),People.RecentActivity.CollectionHelper.addSortableItems(this,t,false))};People.RecentActivity.PhotoCollection.prototype.removeByInfo=function(n){var t,i;t=this._getPhotoKey$1(n);Jx.isUndefined(this._map$1[t])||(i=this._map$1[t],Jx.isUndefined(this._locks$1[n.id])?(delete this._map$1[t],this.removeInternal(i)):(Jx.log.write(4,"PhotoCollection::RemoveByInfo() --> Photo is locked ["+n.id+"]"),this._locksScheduledToRemove$1[n.id]=n,i.isLocked=true),this._adjustTotalCount$1())};People.RecentActivity.PhotoCollection.prototype.removeRangeByInfo=function(n){for(var i,f,e,r,o,s,t=0,u=n.length;t<u;t++)this.removeByInfo(n[t]);if(i=Object.keys(this._locksScheduledToRemove$1).length,i>0){f=this.count;e=f-i;for(r in this._locksScheduledToRemove$1)o={key:r,value:this._locksScheduledToRemove$1[r]},s=this._map$1[this._getPhotoKey$1(o.value)],s.index=e++}};People.RecentActivity.PhotoCollection.prototype.findOrCreatePhotoByInfo=function(n){var t=this._getPhotoKey$1(n);return Jx.isUndefined(this._map$1[t])?this.addByInfo(n):this._map$1[t]};People.RecentActivity.PhotoCollection.prototype.findPhotoByInfo=function(n){var t=this._getPhotoKey$1(n);return Jx.isUndefined(this._map$1[t])?null:this._map$1[t]};People.RecentActivity.PhotoCollection.prototype._adjustTotalCount$1=function(){this.totalCount=Math.max(Object.keys(this._map$1).length,this._totalCount$1)};People.RecentActivity.PhotoCollection.prototype._getPhotoKey$1=function(n){return n.data.id};People.RecentActivity.PhotoCollection.prototype.item=function(n){return this.items[n]};People.RecentActivity.PhotoTag=function(n){this._info=n;this._contact=People.RecentActivity.ContactCache.findOrCreateContact(n.contact);this._timestamp=new Date(n.timestamp)};People.RecentActivity.PhotoTag.prototype._info=null;People.RecentActivity.PhotoTag.prototype._contact=null;People.RecentActivity.PhotoTag.prototype._timestamp=null;Object.defineProperty(People.RecentActivity.PhotoTag.prototype,"x",{get:function(){return this._info.x}});Object.defineProperty(People.RecentActivity.PhotoTag.prototype,"y",{get:function(){return this._info.y}});Object.defineProperty(People.RecentActivity.PhotoTag.prototype,"contact",{get:function(){return this._contact}});Object.defineProperty(People.RecentActivity.PhotoTag.prototype,"timestamp",{get:function(){return this._timestamp}});Object.defineProperty(People.RecentActivity.PhotoTag.prototype,"sortOrder",{get:function(){return this._timestamp.getTime()}});Object.defineProperty(People.RecentActivity.PhotoTag.prototype,"info",{get:function(){return this._info}});People.RecentActivity.PhotoTagCollection=function(n,t,i){People.RecentActivity.Collection.call(this);this._map$1={};this._network$1=t;this._photo$1=i;this._provider$1=n;var r=i.photoInfo;r.tags!=null&&this.addRangeByInfo(r.tags)};Jx.inherit(People.RecentActivity.PhotoTagCollection,People.RecentActivity.Collection);People.RecentActivity.PhotoTagCollection.prototype._provider$1=null;People.RecentActivity.PhotoTagCollection.prototype._network$1=null;People.RecentActivity.PhotoTagCollection.prototype._photo$1=null;People.RecentActivity.PhotoTagCollection.prototype._map$1=null;People.RecentActivity.PhotoTagCollection.prototype._isDisposed=false;People.RecentActivity.PhotoTagCollection.prototype.dispose=function(){this._isDisposed||(this._isDisposed=true,People.Social.clearKeys(this._map$1),this._network$1=null,this._photo$1=null,this._provider$1=null)};People.RecentActivity.PhotoTagCollection.prototype.findUser=function(){var n=this._network$1.user,t=n.sourceId+";"+n.id;return Jx.isUndefined(this._map$1[t])?null:this._map$1[t]};People.RecentActivity.PhotoTagCollection.prototype.addRangeByInfo=function(n){var t,i,e,r,u,f;for(t=[],i=0,e=n.length;i<e;i++)r=n[i],u=this._getKey$1(r),!Jx.isUndefined(this._map$1[u])||(f=new People.RecentActivity.PhotoTag(r),this._map$1[u]=f,t.push(f));t.length>0&&this.addRangeInternal(t)};People.RecentActivity.PhotoTagCollection.prototype.removeRangeByInfo=function(n){for(var i,u,t=0,r=n.length;t<r;t++)i=this._getKey$1(n[t]),Jx.isUndefined(this._map$1[i])||(u=this._map$1[i],delete this._map$1[i],this.removeInternal(u))};People.RecentActivity.PhotoTagCollection.prototype._getKey$1=function(n){var t=n.contact;return t.sourceId+";"+t.id};People.RecentActivity.PhotoTagCollection.prototype.item=function(n){return this.items[n]};People.RecentActivity.Reaction=function(n,t){this._info=t;this._network=n;this._type=this._network.capabilities.findReactionType(t.type);this._publisher=People.RecentActivity.ContactCache.findOrCreateContact(t.publisher)};People.RecentActivity.Reaction.prototype._info=null;People.RecentActivity.Reaction.prototype._network=null;People.RecentActivity.Reaction.prototype._type=null;People.RecentActivity.Reaction.prototype._publisher=null;People.RecentActivity.Reaction.prototype._isDisposed=false;Object.defineProperty(People.RecentActivity.Reaction.prototype,"type",{get:function(){return this._type}});Object.defineProperty(People.RecentActivity.Reaction.prototype,"publisher",{get:function(){return this._publisher}});Object.defineProperty(People.RecentActivity.Reaction.prototype,"network",{get:function(){return this._network}});People.RecentActivity.Reaction.prototype.dispose=function(){this._isDisposed||(this._isDisposed=true,this._info=null,this._network=null,this._publisher=null,this._type=null)};People.RecentActivity.ReactionCollection=function(n,t,i,r){People.RecentActivity.Collection.call(this);this._network$1=t;this._obj$1=i;this._provider$1=n;this._type$1=r;this._map$1={}};Jx.inherit(People.RecentActivity.ReactionCollection,People.RecentActivity.Collection);People.RecentActivity.ReactionCollection.prototype._provider$1=null;People.RecentActivity.ReactionCollection.prototype._network$1=null;People.RecentActivity.ReactionCollection.prototype._obj$1=null;People.RecentActivity.ReactionCollection.prototype._type$1=null;People.RecentActivity.ReactionCollection.prototype._map$1=null;People.RecentActivity.ReactionCollection.prototype._totalCount$1=0;People.RecentActivity.ReactionCollection.prototype._permissions$1=0;People.RecentActivity.ReactionCollection.prototype._isDisposed=false;Object.defineProperty(People.RecentActivity.ReactionCollection.prototype,"type",{get:function(){return this._type$1}});Object.defineProperty(People.RecentActivity.ReactionCollection.prototype,"totalCount",{get:function(){return this._totalCount$1},set:function(n){if(n!==this._totalCount$1){this._totalCount$1=n;this.onPropertyChanged("TotalCount")}}});Object.defineProperty(People.RecentActivity.ReactionCollection.prototype,"remainingCount",{get:function(){return this._totalCount$1-this.count}});Object.defineProperty(People.RecentActivity.ReactionCollection.prototype,"permissions",{get:function(){return this._permissions$1},set:function(n){if(this._permissions$1!==n){this._permissions$1=n;this.onPropertyChanged("Permissions")}}});Object.defineProperty(People.RecentActivity.ReactionCollection.prototype,"network",{get:function(){return this._network$1}});People.RecentActivity.ReactionCollection.prototype.dispose=function(){this._isDisposed||(this._isDisposed=true,People.Social.clearKeys(this._map$1),this._network$1=null,this._obj$1=null,this._provider$1=null,this._type$1=null)};People.RecentActivity.ReactionCollection.prototype.add=function(n){var t=People.RecentActivity.Core.create_reactionInfo(this._type$1.info,this._network$1.info.user),i=this._obj$1.objectInfo;People.RecentActivity.Core.EtwHelper.writeReactionEvent(People.RecentActivity.Core.EtwEventName.uiAddReactionStart,i,t);this._provider$1.addReaction(i,t,People.RecentActivity.create_actionState(this._obj$1,n))};People.RecentActivity.ReactionCollection.prototype.remove=function(n){var t=People.RecentActivity.Core.create_reactionInfo(this._type$1.info,this._network$1.info.user),i=this._obj$1.objectInfo;People.RecentActivity.Core.EtwHelper.writeReactionEvent(People.RecentActivity.Core.EtwEventName.uiRemoveReactionStart,i,t);this._provider$1.removeReaction(i,t,People.RecentActivity.create_actionState(this._obj$1,n))};People.RecentActivity.ReactionCollection.prototype.containsUser=function(){return this.findUser()!=null};People.RecentActivity.ReactionCollection.prototype.findUser=function(){try{var n=this._getContactKey$1(this._network$1.info.user);if(!Jx.isUndefined(this._map$1[n]))return this._map$1[n]}catch(t){Jx.log.exception("People.RecentActivity.ReactionCollection.findUser: Exception looking up the user's reaction in the collection.  Assuming none and returning null.",t)}return null};People.RecentActivity.ReactionCollection.prototype.updateDetails=function(n){this.permissions=n.permissions;this.totalCount=n.count};People.RecentActivity.ReactionCollection.prototype.addRangeByInfo=function(n){var i,t,r,u;if(n.length>0){for(i=[],t=0,r=n.length;t<r;t++)u=this._getContactKey$1(n[t].publisher),!Jx.isUndefined(this._map$1[u])||i.push(this._createAndAddToMap$1(n[t]));this.addRangeInternal(i);this.count>this.totalCount&&(this.totalCount=this.count)}};People.RecentActivity.ReactionCollection.prototype.removeRangeByInfo=function(n){var i,t,r;for(i=0,t=0,r=n.length;t<r;t++)this._removeByInfo$1(n[t])!=null&&i++;this.totalCount=this.totalCount-i};People.RecentActivity.ReactionCollection.prototype.onReactionAdded=function(n,t,i){var r=null;if(n.code===People.RecentActivity.Core.ResultCode.success){this._totalCount$1++;r=this._addByInfo$1(t);this.onPropertyChanged("TotalCount")}else r=new People.RecentActivity.Reaction(this._network$1,t);this.raiseEvent("addreactioncompleted",new People.RecentActivity.ReactionActionCompletedEventArgs(this,n,r,i));People.RecentActivity.Core.EtwHelper.writeReactionEvent(People.RecentActivity.Core.EtwEventName.uiAddReactionEnd,this._obj$1.objectInfo,t)};People.RecentActivity.ReactionCollection.prototype.onReactionRemoved=function(n,t,i){var r=null;if(n.code===People.RecentActivity.Core.ResultCode.success){this._totalCount$1--;r=this._removeByInfo$1(t);this.onPropertyChanged("TotalCount")}else r=new People.RecentActivity.Reaction(this._network$1,t);this.raiseEvent("removereactioncompleted",new People.RecentActivity.ReactionActionCompletedEventArgs(this,n,r,i));People.RecentActivity.Core.EtwHelper.writeReactionEvent(People.RecentActivity.Core.EtwEventName.uiRemoveReactionEnd,this._obj$1.objectInfo,t)};People.RecentActivity.ReactionCollection.prototype._containsInfo$1=function(n){return!Jx.isUndefined(this._map$1[this._getContactKey$1(n.publisher)])};People.RecentActivity.ReactionCollection.prototype._addByInfo$1=function(n){var t,i;return(t=this._getContactKey$1(n.publisher),!!Jx.isUndefined(this._map$1[t]))?(i=this._createAndAddToMap$1(n),this.addInternal(i),i):this._map$1[t]};People.RecentActivity.ReactionCollection.prototype._createAndAddToMap$1=function(n){var t=new People.RecentActivity.Reaction(this._network$1,n),i=this._getContactKey$1(n.publisher);return this._map$1[i]=t,t};People.RecentActivity.ReactionCollection.prototype._removeByInfo$1=function(n){var t,i;return(t=this._getContactKey$1(n.publisher),!Jx.isUndefined(this._map$1[t]))?(i=this._map$1[t],delete this._map$1[t],this.removeInternal(i),i):null};People.RecentActivity.ReactionCollection.prototype._getContactKey$1=function(n){return n.sourceId+":"+n.id};People.RecentActivity.ReactionCollection.prototype.item=function(n){return this.items[n]};People.RecentActivity.ReactionTypeCollection=function(n,t,i){var u,r,e,f;for(People.RecentActivity.Collection.call(this),this._network$1=t,this._obj$1=i,this._provider$1=n,this._map$1={},u=this._network$1.capabilities.reactions,r=0,e=u.length;r<e;r++)f=new People.RecentActivity.ReactionCollection(this._provider$1,this._network$1,i,u[r]),this.addInternal(f),this._map$1[u[r].id]=f;this.updateDetails(i.objectInfo.reactionDetails);this._addRangeByInfo$1(i.objectInfo.reactions)};Jx.inherit(People.RecentActivity.ReactionTypeCollection,People.RecentActivity.Collection);People.RecentActivity.ReactionTypeCollection.prototype._provider$1=null;People.RecentActivity.ReactionTypeCollection.prototype._network$1=null;People.RecentActivity.ReactionTypeCollection.prototype._obj$1=null;People.RecentActivity.ReactionTypeCollection.prototype._map$1=null;People.RecentActivity.ReactionTypeCollection.prototype._isDisposed=false;Object.defineProperty(People.RecentActivity.ReactionTypeCollection.prototype,"network",{get:function(){return this._network$1}});People.RecentActivity.ReactionTypeCollection.prototype.dispose=function(){if(!this._isDisposed){this._isDisposed=true;for(var n=this.count-1;n>=0;n--)this.item(n).dispose();People.Social.clearKeys(this._map$1);this._network$1=null;this._obj$1=null;this._provider$1=null}};People.RecentActivity.ReactionTypeCollection.prototype.refresh=function(n){var t=this._obj$1.objectInfo;People.RecentActivity.Core.EtwHelper.writeFeedObjectEvent(People.RecentActivity.Core.EtwEventName.uiRefreshReactionsStart,t);this._provider$1.refreshReactions(t,People.RecentActivity.create_actionState(this._obj$1,n))};People.RecentActivity.ReactionTypeCollection.prototype.updateDetails=function(n){for(var i,t=0,r=n.length;t<r;t++)i=n[t].id,Jx.isUndefined(this._map$1[i])||this._map$1[i].updateDetails(n[t])};People.RecentActivity.ReactionTypeCollection.prototype.onRefreshCompleted=function(n,t,i,r){var u=false;n.code===People.RecentActivity.Core.ResultCode.success&&(this._addRangeByInfo$1(t),this._removeRangeByInfo$1(i),u=t.length>0||i.length>0);this.raiseEvent("refreshcompleted",new People.RecentActivity.RefreshActionCompletedEventArgs(this,n,u,r));People.RecentActivity.Core.EtwHelper.writeFeedObjectEvent(People.RecentActivity.Core.EtwEventName.uiRefreshReactionsEnd,this._obj$1.objectInfo)};People.RecentActivity.ReactionTypeCollection.prototype.onReactionAdded=function(n,t,i){if(!Jx.isUndefined(this._map$1[t.type.id]))this._map$1[t.type.id].onReactionAdded(n,t,i)};People.RecentActivity.ReactionTypeCollection.prototype.onReactionRemoved=function(n,t,i){if(!Jx.isUndefined(this._map$1[t.type.id]))this._map$1[t.type.id].onReactionRemoved(n,t,i)};People.RecentActivity.ReactionTypeCollection.prototype._addRangeByInfo$1=function(n){var t,i,r;if(t=this._getBuckets$1(n),Object.keys(t).length>0)for(i in t)r={key:i,value:t[i]},this._map$1[r.key].addRangeByInfo(r.value)};People.RecentActivity.ReactionTypeCollection.prototype._removeRangeByInfo$1=function(n){var t,i,r;if(t=this._getBuckets$1(n),Object.keys(t).length>0)for(i in t)r={key:i,value:t[i]},this._map$1[r.key].removeRangeByInfo(r.value)};People.RecentActivity.ReactionTypeCollection.prototype._getBuckets$1=function(n){for(var r={},f,t,i,u=0,e=n.length;u<e;u++)f=n[u],t=f.type.id,Jx.isUndefined(this._map$1[t])||(i=null,Jx.isUndefined(r[t])?(i=[],r[t]=i):i=r[t],i.push(f));return r};People.RecentActivity.ReactionTypeCollection.prototype.item=function(n){return this.items[n]};People.RecentActivity.ShareOperationParser=function(n,t){this._shareData=n;this._parseOrder=t};Jx.mix(People.RecentActivity.ShareOperationParser.prototype,Jx.Events);Jx.mix(People.RecentActivity.ShareOperationParser.prototype,People.Social.Events);People.RecentActivity.ShareOperationParser.prototype._shareData=null;People.RecentActivity.ShareOperationParser.prototype._parseOrder=null;People.RecentActivity.ShareOperationParser.prototype._result=0;People.RecentActivity.ShareOperationParser.prototype._shareInfo=null;People.RecentActivity.ShareOperationParser.prototype._userState=null;Object.defineProperty(People.RecentActivity.ShareOperationParser.prototype,"result",{get:function(){return this._result}});Object.defineProperty(People.RecentActivity.ShareOperationParser.prototype,"shareInfo",{get:function(){return this._shareInfo}});People.RecentActivity.ShareOperationParser.prototype.process=function(n){this._userState=n;this._parseInternal(0)};People.RecentActivity.ShareOperationParser.prototype._parseInternal=function(n){var t=this,i;if(n>=this._parseOrder.length){this._onCompleted(People.RecentActivity.Core.ResultCode.failure,null);return}i=this._parseOrder[n];i===Windows.ApplicationModel.DataTransfer.StandardDataFormats.webLink?this._shareData.getWebLinkAsync().done(function(r){var u=r,f;return u!=null&&(f=u.schemeName.toUpperCase(),f==="HTTP"||f==="HTTPS")?(t._onCompleted(People.RecentActivity.Core.ResultCode.success,People.RecentActivity.Core.create_shareOperationInfo(i,u,t._shareData)),null):(t._parseInternal(n+1),null)},this._onPromiseError):this._parseInternal(n+1)};People.RecentActivity.ShareOperationParser.prototype._onCompleted=function(n,t){this._result=n;this._shareInfo=t;this.raiseEvent("completed",new People.RecentActivity.ShareOperationActionCompletedEventArgs(this,n,t,this._userState))};People.RecentActivity.ShareOperationParser.prototype._onPromiseError=function(n){return Jx.log.write(2,"An error occurred while trying to get the share data: "+n.message),this._onCompleted(People.RecentActivity.Core.ResultCode.failure,null),null};People.RecentActivity.TemporaryIdentity=function(n){People.RecentActivity.Identity.call(this,n.objectId,People.RecentActivity.Providers.IdentityType.contact);this._contact$1=n};Jx.inherit(People.RecentActivity.TemporaryIdentity,People.RecentActivity.Identity);People.RecentActivity.TemporaryIdentity.prototype._contact$1=null;Object.defineProperty(People.RecentActivity.TemporaryIdentity.prototype,"isTemporary",{get:function(){return true},configurable:true});Object.defineProperty(People.RecentActivity.TemporaryIdentity.prototype,"name",{get:function(){return this._contact$1.name},configurable:true});People.RecentActivity.TemporaryIdentity.prototype.getDataContext=function(){return this._contact$1};People.RecentActivity.TemporaryIdentity.prototype.onEnsureNetworks=function(){var t=People.RecentActivity.Providers.FeedProviderFactory.instance.getNetwork(this._contact$1.objectSourceId),n=new People.RecentActivity.NetworkCollection(this);return n.addByInfo(t),n};People.RecentActivity.TemporaryIdentity.prototype.onRefreshNetworks=function(){};People.RecentActivity.WhatsNewIdentity=function(){People.RecentActivity.Identity.call(this,People.RecentActivity.Configuration.whatsNewPersonId,People.RecentActivity.Providers.IdentityType.person)};Jx.inherit(People.RecentActivity.WhatsNewIdentity,People.RecentActivity.Identity);Object.defineProperty(People.RecentActivity.WhatsNewIdentity.prototype,"isWhatsNew",{get:function(){return true},configurable:true});Object.defineProperty(People.RecentActivity.WhatsNewIdentity.prototype,"name",{get:function(){throw new Error("Cannot get name of What's New identity.")},configurable:true});People.RecentActivity.WhatsNewIdentity.prototype.getDataContext=function(){throw new Error("Cannot get data context of What's New identity.")}})
Jx.delayDefine(People,"UiFormRenderers",function(){function u(n){var t="",r,i,u;if(n)if(t=n.replace(/^\s+|\s+$/g,""),r="",i=t.indexOf(":"),i>0&&(r=t.substr(0,i).toLowerCase(),t=t.substr(i+1)),r==="http"||r==="ftp"){for(u=0;t[u]==="/";)u++;t=t.substr(u);i=t.indexOf(":");i>0&&(t=t.substr(0,i));i=t.indexOf("/");i>0&&(t=t.substr(0,i))}else t="";return t}function f(t,i,r,u,f,e,o){return n.setSectionAttributes(i),n.setTooltip(i,e+"\n"+o),n.hookupDomEvent(i,f,[{label:Jx.res.getString("/strings/profileFieldSendEmail"),uri:"mailto:"+encodeURI(f)}]),i}function i(t,i,r,u){return n.genericFieldRenderer(t,i,r,u),t.setCssStyle(i,"nmbr"),true}function e(i,r,u,f,e,o,s){var c;n.setSectionAttributes(r);var l=o+"\n"+s,h=t.UiForm.encodeHTML(o),a=i.getCssClass("tipNmbr");for(h+="<br><div class='"+a+"'>"+t.UiForm.encodeHTML(s)+"<\/div>";h.indexOf("&#10;")!==-1;)h=h.replace("&#10;","<br>");return c=t.Protocol.create("tel",{phoneNumber:e}).toUrl(),Jx.isNonEmptyString(c)?(n.setComplexTooltip(r,c,l,h),n.hookupDomEvent(r,e,[{label:Jx.res.getString("/strings/profileFieldStartCall"),uri:c},{label:Jx.res.getString("/strings/profileFieldSms"),uri:t.Protocol.create("sms",{phoneNumber:e}).toUrl()}])):n.setTooltip(r,o+"\n"+s),r}function o(n,t,i){var r=new Windows.Globalization.DateTimeFormatting.DateTimeFormatter("day month year");return t.innerText=r.format(i),t.setAttribute("aria-label",r.format(i)),true}var t=window.People,r=t.Nav,n=t.UiFormRenderers={_renderers:{},_getCopyCommand:function(n){return new Windows.UI.Popups.UICommand(Jx.res.getString("/strings/profileFieldCopy"),function(){var t=new Windows.ApplicationModel.DataTransfer.DataPackage;t.setText(n);Windows.ApplicationModel.DataTransfer.Clipboard.setContent(t)})},_getLinkCommand:function(t,i){return new Windows.UI.Popups.UICommand(t,n._navigateToUri.bind(n,i))},_showContextMenu:function(t,i,r){var f,u;r.stopPropagation();r.preventDefault();f=new Windows.UI.Popups.PopupMenu;i&&i.forEach(function(t){t.label&&t.uri&&f.commands.append(n._getLinkCommand(t.label,t.uri))});f.commands.append(n._getCopyCommand(t));u=r.srcElement.getBoundingClientRect();try{f.showForSelectionAsync({x:u.left,y:u.top,width:u.width,height:u.height}).done(null,Jx.fnEmpty)}catch(e){}},_navigateToUri:function(n){Jx.bici.increment(Microsoft.WindowsLive.Instrumentation.Ids.People.profileDetailsActions,1);r.navigate(n)},_onKeyDown:function(t,i){(i.key==="Spacebar"||i.key==="Enter")&&n._navigateToUri(t)},hookupDomEvent:function(t,i,r){if(r){var u=r[0].uri;t.addEventListener("click",n._navigateToUri.bind(n,u),false);t.addEventListener("keydown",n._onKeyDown.bind(n,u),false);Jx.addClass(t,"hasDefaultAction")}t.addEventListener("contextmenu",n._showContextMenu.bind(n,i,r),false)},setSectionAttributes:function(n){n.setAttribute("role","button");n.setAttribute("tabindex",0);n.setAttribute("focusable","true");n.setAttribute("aria-haspopup","true")},setTooltip:function(n,t){n.setAttribute("title",t);n.setAttribute("aria-label",t)},setComplexTooltip:function(n,i,r,f){var e,o,s,h;if(e=u(i),o="",e&&(o="<br><span>"+t.UiForm.encodeHTML(e)+"<\/span>"),s=new WinJS.UI.Tooltip(n),Jx.isNullOrUndefined(f))for(f=t.UiForm.encodeHTML(r);f.indexOf("&#10;")!==-1;)f=f.replace("&#10;","<br>");h=f+o;s.innerHTML=h},genericFieldRenderer:function(n,t,i,r){return t.innerText=i,t.setAttribute("aria-label",r),true},genericSectionRenderer:function(t,i,r,u,f,e,o){return n.setSectionAttributes(i),n.setTooltip(i,e+"\n"+o),n.hookupDomEvent(i,f,null),i},emailFieldRenderer:function(n,i,r,u){var e=document.createElement("div"),f,c,o,l,h,s,a;if(n.setCssStyle(e,"emailFld"),t.bidi.direction==="rtl")f=document.createElement("span"),f.innerText=r,e.appendChild(f);else for(c=r.split("@"),o=0;o<c.length;o++)for(l=c[o].split("."),h="",o!==0&&(h="@"),s=0;s<l.length;s++)a=l[s],s!==0&&(h="."),f=document.createElement("span"),f.innerText=h+a,e.appendChild(f);return e.setAttribute("aria-label",u),i.appendChild(e),true},addRenderer:function(t,i,r){n._renderers[t]={field:i,section:r}},getRenderer:function(t){var i=n._renderers[t];return i?i:n._renderers.generic}};n.addRenderer("generic",n.genericFieldRenderer,n.genericSectionRenderer);n.addRenderer("email",n.emailFieldRenderer,f);n.addRenderer("number",i,n.genericSectionRenderer);n.addRenderer("tel",i,e);n.addRenderer("date",o,n.genericSectionRenderer);t.loadUrlRenderer();t.loadLocationRenderer()})
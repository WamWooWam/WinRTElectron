Jx.delayDefine(People,["UiFormMapHelper","loadLocationRenderer"],function(){function u(n,t){for(var u=t.length,r="",i=0;i<u;i++)r+=t[i]+" ";n.setAttribute("aria-labelledby",r)}function r(i,r,f){var o=false,h=r.id,s=[],e="";return f&&(n||(n=new t.AddressHelper),e=n.formatViewAddressAsHtml(f,h+"-",s),e&&(WinJS.Utilities.setInnerHTML(r,e),o=true)),u(r,s),o}function f(n,t,i,u){return r(n,t,i,u)?(n.setCssStyle(t,"link"),true):false}function e(r,u,f,e,o,s){var l;n||(n=new t.AddressHelper);var h=n.formatViewAddressAsString(o,false),a=s+"\n"+h,v={value:o},c=t.UiFormMapHelper.getMapUrl(v);return i.setSectionAttributes(u),i.setComplexTooltip(u,c,a),l=h.replace(/\r\n|\r|\n/g,"\r\n"),i.hookupDomEvent(u,l,[{label:Jx.res.getString("/strings/profileFieldMapAddress"),uri:c}]),u}var t=window.People,i=t.UiFormRenderers,n;t.loadLocationRenderer=Jx.fnEmpty;n=null;t.UiFormMapHelper={getMapUrl:function(n){function u(n,t){var r,i,u;if(Jx.isNonEmptyString(t))for(r=t.split("\n"),i=0,u=r.length;i<u;i++)n.length>0&&(n+=" "),n+=r[i].replace(/[\ud800-\udfff]/g,"");return n}var i="bingmaps:",r,t,e,f;return n&&n.value?(r=n.value,t=u("",r.street),t=u(t,r.city),t=u(t,r.state),t=u(t,r.zipCode),t=u(t,r.country),n.metadata?(e={homeLocation:"_",businessLocation:"__",otherLocation:"___"},f=e[n.metadata.type],f?(i+="?contact=",i+=n.metadata.contactName?n.metadata.contactName:"",i+=f):i+="//?where="):i+="//?where=",i+=encodeURIComponent(t)):i+="//",i}};i.addRenderer("location",r);i.addRenderer("mapLocation",f,e)})
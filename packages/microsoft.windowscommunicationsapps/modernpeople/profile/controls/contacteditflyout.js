Jx.delayDefine(People.Controls,"ContactEditFlyout",function(){function r(){function e(){document.body.removeChild(n)}var n,r,i;n=document.createElement("div");n.className="win-menu profile-flyout";n.setAttribute("data-win-control","WinJS.UI.Flyout");n.setAttribute("aria-described-by","edit-flyout_dsc");n.innerHTML='<form id="edit-flyout" class="profile-flyout"><div id="edit-flyout-list" class="profile-flyout-list"><span class="profile-flyout-description" id="edit-flyout_dsc" role="note"/><\/form>';r=new WinJS.UI.Flyout(n);i={isNav:false,personId:null,contactId:null};r.addEventListener("afterhide",function(){i.isNav&&(i.isNav=false,t.navigate(t.getEditProfileDetailUri(i.personId,{contactId:i.contactId})));e()});var u=n.querySelector("#edit-flyout"),f=u.querySelector("#edit-flyout-list"),o=u.querySelector("#edit-flyout_dsc");this.show=function(t,u){var e=t.objectId;f.innerHTML="";t.linkedContacts.forEach(function(n){var t,u,o;if(n.canEdit&&(t=document.createElement("button"),t.setAttribute("type","button"),t.className="win-command",t.onclick=function(t){return i.personId=e,i.contactId=n.objectId,i.isNav=true,r.hide(),t.stopPropagation(),false},u=n.account,u)){if(o=u.displayName,!Jx.isNonEmptyString(o))return;t.innerText=o;f.appendChild(t)}});document.body.appendChild(n);r.show(u,"top")};this.getFlyout=function(){return r}}$include("$(cssResources)/controls-people.css");var n=window.People,i=n.Controls,t=n.Nav;i.ContactEditFlyout=r})
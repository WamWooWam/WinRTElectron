Jx.delayDefine(People,"LandingPage",function(){function u(){}function i(){this._panels=0;this._provider=new r.RecentActivity.UI.Host.LandingPagePanelProvider;this._upsellPanel=null}function t(n){this._host=n}var r=window.People,n=r.LandingPage=function(n){this._host=n;this._panelView=null;$include("$(cssResources)/LandingPage.css")};n.prototype.load=function(n){var t,f;return t=this._jobSet=this._host.getJobSet().createChild(),this._panelView=new r.PanelView(this._host,t,n.data,n.fields,n.context,n.state,[new u,new i]),this._panelView.initUI(n.element),n.data.objectType==="MeContact"&&Jx.addClass(n.element,"meLandingPage"),this._shareCallback=r.ShareSource.sharePersonCallback.bind(this,n.data),f=Jx.app,f.addListener("sharesourcedatarequested",this._shareCallback),{elements:this._panelView.getPanelElements(),onEnterComplete:this.onEnterComplete}};n.prototype.update=function(n){this.unload();this.load(n)};n.prototype.activate=function(){};n.prototype.onEnterComplete=function(){this._panelView.onEnterComplete()};n.prototype.prepareSaveState=function(){};n.prototype.prepareSaveBackState=function(){return this._panelView.prepareSaveBackState()};n.prototype.prepareSuspension=function(){return this._panelView.suspend()};n.prototype.scrollToBeginning=function(){this._panelView.scrollToBeginning()};n.prototype.deactivate=function(){return this._jobSet&&this._jobSet.cancelAllChildJobs(),r.Nav.Pages.viewperson.isEdit=false,true};n.prototype.unload=function(){if(this._panelView&&(this._panelView.shutdownUI(),this._panelView.shutdownComponent(),this._panelView=null),this._shareCallback){var n=Jx.app;n.removeListener("sharesourcedatarequested",this._shareCallback);this._shareCallback=null}Jx.dispose(this._jobSet);this._jobSet=null};n.prototype._shareCallback=null;u.prototype.load=function(n,t,i){n.addPanel(new r.ContactPanel(n,t,i))};u.prototype.suspend=function(){};u.prototype.unload=function(){};i.prototype.load=function(n,t,i,r){this._upsellEnabled=t.objectType==="MeContact";this._host=n;this._provider.load(this,t,i,r);this._checkForUpsell()};i.prototype.suspend=function(n){this._provider.suspend(n)};i.prototype.unload=function(){this._provider.unload()};i.prototype.addPanel=function(n){this._host.addPanel(n);this._panels++;this._checkForUpsell()};i.prototype.removePanel=function(n){var t=this._host.removePanel(n);return t&&(this._panels--,this._checkForUpsell()),t};i.prototype.getJobSet=function(){return this._host.getJobSet()};i.prototype.getPlatform=function(){return this._host.getPlatform()};i.prototype.getCommandBar=function(){return this._host.getCommandBar()};i.prototype._checkForUpsell=function(){this._upsellEnabled&&(this._panels===0&&this._upsellPanel===null?(this._upsellPanel=new t(this._host),this._host.addPanel(this._upsellPanel)):this._panels!==0&&this._upsellPanel!==null&&(this._host.removePanel(this._upsellPanel.id),this._upsellPanel=null))};t.prototype._element=null;t.prototype._upsellHandler=null;t.prototype.id="upsellPanel";t.prototype.className="panelView-inactivePanel landingPage-upsellPanel";t.prototype.position=r.PanelView.PanelPosition.upsellPanel;t.prototype.getUI=function(){return"<div class='landingPage-upsellContent'><div class='landingPage-upsellPrimary'>"+Jx.escapeHtml(Jx.res.getString("/landingPage/upsellTitle"))+"<\/div><div class='landingPage-upsellSecondary'>"+Jx.escapeHtml(Jx.res.getString("/strings/raPSAUpsellText"))+"<\/div><div class='landingPage-upsellButton' tabindex='0' role='button'>"+Jx.escapeHtml(Jx.res.getString("/accountsStrings/upsellOK"))+"<\/div><\/div>"};t.prototype.activateUI=function(n){this._element=n;var t=n.querySelector(".landingPage-upsellButton"),i=function(n,t){(t.type==="click"||t.type==="keyup"&&(t.key==="Spacebar"||t.key==="Enter"))&&r.Accounts.showAccountSettingsPage(n.getPlatform(),Microsoft.WindowsLive.Platform.ApplicationScenario.people,r.Accounts.AccountSettingsPage.upsells,{launchedFromApp:true})};this._upsellHandler=i.bind(this,this._host);t.addEventListener("click",this._upsellHandler,false);t.addEventListener("keyup",this._upsellHandler,false)};t.prototype.ready=function(){};t.prototype.suspend=function(){};t.prototype.deactivateUI=function(){if(this._upsellHandler&&this._element){var n=this._element.querySelector(".landingPage-upsellButton");n&&(n.removeEventListener("click",this._upsellHandler,false),n.removeEventListener("keyup",this._upsellHandler,false));this._upsellHandler=null;this._element=null}}})
Jx.delayDefine(People,"ScrollingViewport",function(){var n=window.People,t=n.Orientation,i={};i[t.horizontal]={_orientation:t.horizontal,_className:"viewport-horizontal",_scrollPositionStart:"left",_scrollPositionProperty:"scrollLeft",_scrollExtentProperty:"scrollWidth",_clientExtentProperty:"clientWidth"};i[t.vertical]={_orientation:t.vertical,_className:"viewport-vertical",_scrollPositionStart:"top",_scrollPositionProperty:"scrollTop",_scrollExtentProperty:"scrollHeight",_clientExtentProperty:"clientHeight"};n.ScrollingViewport=function(t,r,u,f){n.Viewport.call(this);this._child=r;this.appendChild(r);this._jobSet=t.createChild();Jx.mix(this,i[u]);this._supportsSelection=f};Jx.inherit(n.ScrollingViewport,n.Viewport);Object.defineProperty(n.ScrollingViewport.prototype,"id",{get:function(){return this._id}});n.ScrollingViewport.prototype.getUI=function(n){var t=this._supportsSelection?"listbox":"list",i=Jx.getUI(this._child);n.html="<div id='"+this._id+"' class='"+this._className+"' role='"+t+"'>"+i.html+"<\/div>"};n.ScrollingViewport.prototype.activateUI=function(){Jx.Component.prototype.activateUI.call(this);var n=this._div=document.getElementById(this._id);this._viewportExtent=n[this._clientExtentProperty];this._scrollPositionStart==="left"&&Jx.isRtl()&&(this._scrollPositionStart="right");n.onselectstart=function(){return false}};n.ScrollingViewport.prototype.getElement=function(){return this._div};n.ScrollingViewport.prototype.setScrollPosition=function(n){Jx.hasClass(this._div,"zooming")?(this._div.style[this._scrollPositionStart]=(-n).toString()+"px",this._lastKnownPosition=n):(this._div[this._scrollPositionProperty]=n,this._lastKnownPosition=this._div[this._scrollPositionProperty]);this._reportScroll()};n.ScrollingViewport.prototype.extentReady=function(){};n.ScrollingViewport.prototype.contentReadyAsync=function(){return this._child.contentReadyAsync()};n.ScrollingViewport.prototype.extentChanged=function(n,t,i){var u=this._div,r;u!==null&&(r=this._lastKnownPosition,t<r&&this.setScrollPosition(r+i))};n.ScrollingViewport.prototype.getOrientation=function(){return this._orientation};n.ScrollingViewport.prototype.getScrollPosition=function(){return this._lastReportedPosition};n.ScrollingViewport.prototype.getViewportExtent=function(){return this._viewportExtent};n.ScrollingViewport.prototype.hydrate=function(n,t){this._child.hydrateExtent(n);(t||Jx.isNullOrUndefined(t))&&this._child.hydratePosition(n);this._lastReportedPosition=this._lastKnownPosition;this._child.render();this._div.addEventListener("scroll",this._scrollListener=this._onScroll.bind(this),false);this._div.addEventListener("mselementresize",this._resizeListener=this._onResize.bind(this),false)};n.ScrollingViewport.prototype.dehydrate=function(){return this._child.dehydrate(true)};n.ScrollingViewport.prototype.getJobSet=function(){return this._jobSet};n.ScrollingViewport.prototype._onScroll=function(){this._frozen||(this._lastKnownPosition=this._div[this._scrollPositionProperty],this._jobSet.addUIJob(this,this._reportScroll,null,n.Priority.scroll),Jx.scheduler.prioritizeInvisible())};n.ScrollingViewport.prototype._reportScroll=function(){var i=this._lastReportedPosition,n=this._lastKnownPosition,t=n-i;t!==0&&(this._lastReportedPosition=n,this._child.scroll(n,t))};n.ScrollingViewport.prototype._onResize=function(){this._frozen||(this._onScroll(),this._jobSet.addUIJob(this,this._reportResize,null,n.Priority.resize))};n.ScrollingViewport.prototype._reportResize=function(){var n=document.body.offsetWidth;this._viewportExtent=this._div[this._clientExtentProperty];this.forEachChild(function(n){n.resize()})};n.ScrollingViewport.prototype.shutdownComponent=function(){n.Viewport.prototype.shutdownComponent.call(this);this._jobSet.dispose();this._scrollListener!==null&&this._div.removeEventListener("scroll",this._scrollListener,false);this._resizeListener!==null&&this._div.removeEventListener("mselementresize",this._resizeListener,false)};n.ScrollingViewport.prototype.getCurrentItem=function(n){var t=this._child.getCurrentItem(n);return t.scrollPos-=this._lastKnownPosition,t};n.ScrollingViewport.prototype.setCurrentItem=function(n){n.scrollPos+=this._lastKnownPosition;this._child.setCurrentItem(n)};n.ScrollingViewport.prototype.positionItem=function(n){var t=this._div,i=this._child.positionItem(n),r=t[this._scrollExtentProperty]-this.getViewportExtent();this.setScrollPosition(Math.min(i.scrollPos,r))};n.ScrollingViewport.prototype.beginZoom=function(){var n=this._div;n.style[this._scrollPositionStart]=(-this.getScrollPosition()).toString()+"px";Jx.addClass(n,"zooming")};n.ScrollingViewport.prototype.endZoom=function(){var n=this._div,t=parseInt(n.style[this._scrollPositionStart],10);Jx.removeClass(n,"zooming");n.style[this._scrollPositionStart]="0px";this.setScrollPosition(-t)};n.ScrollingViewport.prototype.freeze=function(){this._onScroll();this._frozen=true};n.ScrollingViewport.prototype.thaw=function(){this._lastKnownPosition!==0&&this.setScrollPosition(this._lastKnownPosition);this._frozen=false};n.ScrollingViewport.prototype._lastReportedPosition=0;n.ScrollingViewport.prototype._div=null;n.ScrollingViewport.prototype._viewportExtent=0;n.ScrollingViewport.prototype._lastKnownPosition=0;n.ScrollingViewport.prototype._child=null;n.ScrollingViewport.prototype._jobSet=null;n.ScrollingViewport.prototype._scrollListener=null;n.ScrollingViewport.prototype._resizeListener=null;n.ScrollingViewport.prototype._frozen=false})
Jx.delayDefine(People.Grid,"Animations",function(){function e(n,t,i){var u=n.style,r=u.getAttribute(t).split(", "),f=r.lastIndexOf(i);f>=0?(r.splice(f,1),u.setAttribute(t,r.join(","))):Jx.log.error(i+" not found in "+t+" attribute.")}function o(n){for(var t=0;t<n.length;t++)n[t].keyframe=n[t].name+Jx.uid()}function s(n,t,i){return n.style.setAttribute(t,i),window.getComputedStyle(n,null)[t]}var r=window.People,u=r.Sequence,f=r.Grid,n=f.Animations={},h=WinJS.UI,t,i;n.createAnimationPromises=function(n,t,i){var u="",c="",l="",a="",v="",r,y,f,h;for(o(t),r=0;r<t.length;r++)y="@-ms-keyframes "+t[r].keyframe+" { from {"+t[r].from+";} to {"+t[r].to+";}}",i.insertRule(y,0),c+=u+t[r].delay+"ms",l+=u+t[r].duration+"ms",a+=u+t[r].timing,v+=u+t[r].keyframe,u=",";for(r=0;r<n.length;r++)f=n[r].style,f.setAttribute("-ms-animation-delay",c),f.setAttribute("-ms-animation-duration",l),f.setAttribute("-ms-animation-timing-function",a),f.setAttribute("-ms-animation-fill-mode","both");return h=[],n.forEach(function(n){t.forEach(function(t){h.push(new WinJS.Promise(function(i){var r=function(){n.removeEventListener("MSAnimationEnd",u,false);e(n,"-ms-animation-name",t.keyframe);window.clearTimeout(f);i()},u=function(n){n.animationName===t.keyframe&&r()},f=window.setTimeout(r,t.delay+t.duration+10);n.addEventListener("MSAnimationEnd",u,false)}))});s(n,"-ms-animation-name",v)}),h};n.executeElementsAnimation=function(t){try{var i=document.createElement("STYLE"),r=[],f=i.sheet;return document.documentElement.firstChild.appendChild(i),t.forEach(function(t){u.append(r,n.createAnimationPromises(t.elements,t.animations,f))}),i.parentNode.removeChild(i),WinJS.Promise.join(r)}catch(e){return WinJS.Promise.wrapError(e)}};t="-ms-transform";i="cubic-bezier(0.1, 0.9, 0.2, 1)";n.createOffsetAnimationArray=function(n){return[{name:"reposition",delay:167,duration:500,timing:i,from:t+":translate("+n.left+"px, "+n.top+"px)",to:t+":translate(0px, 0px)"}]};n.deleteFromList=function(r){return n.executeElementsAnimation([{elements:r,animations:[{name:"deleteScale",delay:0,duration:367,timing:i,from:t+":scale(1.0, 1.0)",to:t+":scale(0.85, 0.85)"},{name:"deleteOpacity",delay:0,duration:167,timing:"linear",from:"opacity: 1",to:"opacity: 0"}]}])};n.addToList=function(r){return n.executeElementsAnimation([{elements:r,animations:[{name:"addScale",delay:167,duration:367,timing:i,from:t+":scale(0.85, 0.85)",to:t+":scale(1.0, 1.0)"},{name:"addOpacity",delay:167,duration:167,timing:"linear",from:"opacity: 0",to:"opacity: 1"}]}])}})
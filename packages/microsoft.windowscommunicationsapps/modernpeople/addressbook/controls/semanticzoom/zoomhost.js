Jx.delayDefine(People,"ZoomHost",function(){var n=window.People;n.ZoomHost=function(t,i,r,u,f,e){this._host=f;this._semanticZoomControl=null;e=e||{};this._initiallyZoomedOut=!!e.initiallyZoomedOut;this._disableEnterKey=!!e.disableEnterKey;var o=this._orientation=u===n.Orientation.horizontal?"horizontal":"vertical",s=new n.ZoomedOutView(this),h=this._zoomedOutViewport=new n.ScrollingViewport(r,s,u);this._zoomedIn=new n.ZoomableView("zoomedIn",t,o,i);this._zoomedOut=new n.ZoomableView("zoomedOut",h,o,r);this.initComponent();this.appendChild(this._zoomedIn);this.appendChild(this._zoomedOut)};Jx.inherit(n.ZoomHost,Jx.Component);Object.defineProperty(n.ZoomHost.prototype,"zoomedOut",{get:function(){return!Jx.isNullOrUndefined(this._semanticZoomControl)&&this._semanticZoomControl.zoomedOut},set:function(n){this._semanticZoomControl.zoomedOut=n}});n.ZoomHost.prototype.getUI=function(n){n.html="<div id='"+this._id+"' class='semanticZoom'>"+Jx.getUI(this._zoomedIn).html+Jx.getUI(this._zoomedOut).html+"<\/div>"};n.ZoomHost.prototype.activateUI=function(){Jx.Component.prototype.activateUI.call(this);this._activateSemanticZoom()};n.ZoomHost.prototype.deactivateUI=function(){Jx.isFunction(this._zoomChangedHandler)&&(this._semanticZoomControl.element.removeEventListener("zoomchanged",this._zoomChangedHandler,false),this._zoomChangedHandler=null);Jx.isFunction(this._onZoomElementHandler)&&(this._semanticZoomControl.element.removeEventListener("zoomOnElement",this._onZoomElementHandler,false),this._onZoomElementHandler=null);Jx.Component.prototype.deactivateUI.call(this)};n.ZoomHost.prototype._activateSemanticZoom=function(){var n=document.getElementById(this._id),t,i;Jx.addClass(n,"sezo-"+this._orientation);t=this._semanticZoomControl=new WinJS.UI.SemanticZoom(n,{zoomedInItem:function(n){return{section:n.groupIndex,groupIndex:n.itemIndex,itemIndex:0}},zoomedOutItem:function(n){return{groupIndex:n.section,itemIndex:n.groupIndex}},initiallyZoomedOut:this._initiallyZoomedOut});t.element.addEventListener("zoomchanged",this._zoomChangedHandler=this._zoomChanged.bind(this),false);t.element.addEventListener("zoomOnElement",this._onZoomElementHandler=this._zoomOnElement.bind(this),false);i=n.querySelector(".win-semanticzoom-button");Jx.isHTMLElement(i)&&(i.type="button")};n.ZoomHost.prototype._zoomChanged=function(){this._host.zoomChanged(this.zoomedOut)};n.ZoomHost.prototype._zoomOnElement=function(t){var i=t.detail.originalEvent,r,u;if(Jx.isNullOrUndefined(i.key)||i.key!=="Spacebar"&&(i.key!=="Enter"||this._disableEnterKey)){if(i.key)return}else i.stopPropagation(),i.preventDefault();r=null;u=t.detail.zoomDirection;r=(u===n.ZoomableHeader.Direction.zoomIn?this._zoomedOut:this._zoomedIn).getTriggerZoom();r();Jx.log.info("ZoomHost._zoomOnElement: triggerZoom, "+u)};n.ZoomHost.prototype.getCollection=function(){var t=new n.ArrayCollection("SemanticZoom"),i=function(n){n.appendSemanticZoomCollection?n.appendSemanticZoomCollection(t):n.forEachChild(i,this)};return this.forEachChild(i,this),t.loadComplete(),t};n.ZoomHost.prototype.hydrateZoomedOutViewport=function(){return this._zoomedOutViewport.hydrate(null)};n.ZoomHost.create=function(t,i,r,u,f,e,o){var h=document.activeElement,s,c;return t.freeze(),o.removeChild(t.getElement()),s=new n.ZoomHost(t,i,r,u,f,e),c=Jx.getUI(s),o.innerHTML=c.html,s.activateUI(),Jx.isHTMLElement(h)&&document.activeElement!==h&&Jx.safeSetActive(h),t.thaw(),s.hydrateZoomedOutViewport(),s}})
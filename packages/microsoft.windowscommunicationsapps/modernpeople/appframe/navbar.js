Jx.delayDefine(People,"CpNavBar",function(){var n=window.People;n.CpNavBar=function(n,t){Jx.log.info("People.CpNavBar");this._name="People.CpNavBar";this.initComponent();this._jobSet=n;this._host=t;this._accountSync=null};Jx.augment(n.CpNavBar,Jx.Component);n.CpNavBar.prototype._winappbar=null;n.CpNavBar.prototype.deactivateUI=function(){Jx.dispose(this._accountSync);Jx.Component.prototype.deactivateUI.call(this)};n.CpNavBar.prototype._createAppBar=function(){var n,t;n=document.createElement("div");n.id="idNavBar";Jx.addClass(n,"win-ui-dark");document.body.appendChild(n);t=new WinJS.UI.AppBar(n,{commands:[],placement:"top",layout:"custom"});this._winappbar=t};n.CpNavBar.prototype.getUI=function(n){n.html=""};n.CpNavBar.prototype.initialize=function(){var u,i,r,t;Jx.log.info("People.CpNavBar.initialize");this._winappbar||this._createAppBar();u=this._accountSync=new n.Accounts.AccountSynchronization(this._host.getPlatform());i=u.areAccountsAvailable(this._showWhatsNew,this);i&&Jx.dispose(this._accountSync);r=[{id:"idNavHome",label:Jx.res.getString("/strings/homeButtonLabel"),section:"selection",icon:"",extraClass:"nav-command-container",onclick:this._onClick.bind(this,"idNavHome")},{id:"idNavMe",label:Jx.res.getString("/strings/abMe"),section:"selection",icon:"",extraClass:"nav-command-container",onclick:this._onClick.bind(this,"idNavMe")},{id:"idNavWhatsNew",label:Jx.res.getString("/strings/whatsNewHeader"),section:"selection",icon:"",extraClass:"nav-command-container",onclick:this._onClick.bind(this,"idNavWhatsNew"),hidden:!i},{id:"idNavAllContacts",label:Jx.res.getString("/strings/allContactsButtonLabel"),section:"selection",icon:"",extraClass:"nav-command-container",onclick:this._onClick.bind(this,"idNavAllContacts")}];t=this._winappbar;t.placement="top";t.commands=r;r.forEach(function(i){var r=t.getCommandById(i.id).element;r.innerHTML=n.CpNavBar.getNavCommandUI(i.icon,i.label);r.title=i.label;n.Animation.addTapAnimation(r)});this.updateShowHide()};n.CpNavBar.prototype.getWinappbar=function(){return this._winappbar};n.CpNavBar.prototype.hideNavBar=function(){this._winappbar&&this._winappbar.hide()};n.CpNavBar.prototype.hide=function(){this.hideNavBar();this._host.hideAppBar()};n.CpNavBar.prototype._onClick=function(t){this.hide();switch(t){case"idNavHome":this._host.goHome();break;case"idNavMe":this._host.navToPageOrScroll(n.Nav.Pages.viewme.id);break;case"idNavWhatsNew":this._host.navToPageOrScroll(n.Nav.Pages.whatsnew.id);break;case"idNavAllContacts":this._host.navToPageOrScroll(n.Nav.Pages.allcontacts.id)}};n.CpNavBar.getNavCommandUI=function(n,t){return"<div class='nav-command'><div class='nav-command-icon'>"+n+"<\/div><div class='nav-command-label'>"+Jx.escapeHtml(t)+"<\/div><\/div>"};n.CpNavBar.prototype.updateShowHide=function(){this._winappbar&&(this._winappbar.disabled=this._host.hasNavbar()?false:true)};n.CpNavBar.prototype._showWhatsNew=function(){this._winappbar&&this._winappbar.showCommands(["idNavWhatsNew"]);Jx.dispose(this._accountSync)}})
(function(){window.PhotoViewer={};PhotoViewer.Graphics={}})();(function(){PhotoViewer.Frame=function(a,c,e,d){if(!PhotoViewer.log){PhotoViewer.log=new Jx.Log;PhotoViewer.log.provider=new Microsoft.WindowsLive.Etw.Providers.PhotoViewerProvider}this._stylesheets=[];this._loadDependencies();this._coordinator=new PhotoViewer.Coordinator(this,a,c,e,d);var b=function(){this._removeStylesheets();Jx.EventManager.removeListener(a,PhotoViewer.Coordinator.Events.shutdown,b,this)};Jx.EventManager.addListener(a,PhotoViewer.Coordinator.Events.shutdown,b,this)};var b=PhotoViewer.Frame,a=b.prototype;b.viewerScriptRoot="/PhotoViewer/";b.viewerResourcesRoot=b.viewerScriptRoot+"resources/";a.getUI=function(c){var a=Jx.getUI(this._coordinator);for(var b in a)c[b]+=a[b]};a.initUI=function(a){this._coordinator.initUI(a)};a.shutdown=function(){this._coordinator.shutdown();this._removeStylesheets()};a.handlePlayTo=function(a){return this._coordinator.handlePlayTo(a)};a.initSettingsPane=function(a){return this._coordinator.initSettingsPane(a)};a.showAppSettingsPane=function(){this._coordinator.showAppSettingsPane()};a.handleSearch=function(a){return this._coordinator.handleSearch(a)};a.handleSearchPaneVisibilityChanged=function(a){return this._coordinator.handleSearchPaneVisibilityChanged(a)};a.handleShare=function(a){this._coordinator.handleShare(a)};a.handleAutoplayImport=function(a,b){Jx.log.info("Autoplay Import Activation handler in ViewerFrame");return this._coordinator.launchImport(a,b)};a.isImportViewActive=function(){return this._coordinator.mode===PhotoViewer.Coordinator.Mode.importView};a.handlePrint=function(a){this._coordinator.handlePrint(a)};a.openAsset=function(a,b){return this._coordinator.openAsset(a,b)};a.getCommandStateRegistrar=function(a){return this._coordinator.getCommandStateRegistrar(a)};a.doCommand=function(b,d,c,a){return this._coordinator.doCommand(b,d,c,a)};a.onOnlineIdConnectedStateChange=function(){this._coordinator.onOnlineIdConnectedStateChange()};a.onSuspend=function(){this._coordinator.onSuspend()};a.onResume=function(){this._coordinator.onResume()};a.onActivated=function(c,b){PhotoViewer.log.perf("evPhotoViewer_Frame_OnActivated_Start",{emptyValue:true});var a=this._coordinator.onActivated(c,b);PhotoViewer.log.perf("evPhotoViewer_Frame_OnActivated_End",{emptyValue:true});return a};a.addPostApplicationLaunchWorkItem=function(a){this._coordinator.addPostApplicationLaunchWorkItem(a)};a.loadScripts=function(e,g){var a,f,d,b;if(!g){d=this._getLoadedScripts();var h=document.head;for(a=0,f=e.length;a<f;a++){b=e[a];if(!d[b.toLowerCase()]){var c=document.createElement("script");c.type="text/javascript";c.src=b;h.appendChild(c)}}}};a.loadStyleSheets=function(h){var k=document.head,f=this._getRootUrl(),n=f.rootUrl,m=f.substrStart,g={},j=k.querySelectorAll("link"),a,d;for(a=0,d=j.length;a<d;a++){var b=j[a];if(Boolean(b.rel)&&b.rel==="stylesheet"&&Boolean(b.href)){var e;if(b.href.indexOf(n)===0)e=b.href.substr(m);else e=b.href;g[e.toLowerCase()]=true}}var l=this._stylesheets;for(a=0,d=h.length;a<d;a++){var i=h[a];if(!g[i.toLowerCase()]){var c=document.createElement("link");c.rel="stylesheet";c.href=i;k.appendChild(c);l.push(c)}}};a._getRootUrl=function(){if(!this._rootUrlObj){var a=document.createElement("a");a.href="/";var b=a.href,c=b.length-1;this._rootUrlObj={rootUrl:b,substrStart:c}}return this._rootUrlObj};a._getLoadedScripts=function(){for(var d={},f=document.head.querySelectorAll("script"),e=this._getRootUrl(),c=0,g=f.length;c<g;c++){var a=f[c];if(!a.type||a.type==="text/javascript"&&Boolean(a.src)){var b;if(a.src.indexOf(e.rootUrl)===0)b=a.src.substr(e.substrStart);else b=a.src;d[b.toLowerCase()]=true}}return d};var c=function(){var a=b.viewerScriptRoot;return["ms-appx://Microsoft.WinJS.1.0/js/base.js","ms-appx://Microsoft.WinJS.1.0/js/ui.js",a+"Components/ComponentsCommon/ComponentsCommon.js","/sendasmile/sasManager.js",a+"Components/AppBar/AppBar.js",a+"Components/Collections/Collections.js",a+"Components/Basket/Basket.js",a+"Components/OneUp/OneUp.js",a+"Components/BackButton/BackButton.js",a+"Components/Coordinator/Coordinator.js"]};a._loadDependencies=function(){PhotoViewer.log.perf("evPhotoViewer_Frame_LoadDependencies_Start",{emptyValue:true});var a=b.viewerResourcesRoot,d=["ms-appx://Microsoft.WinJS.1.0/css/ui-dark.css","/ModernShared/Resources/css/shared_styles.css",a+"css/Layouts.css",a+"css/AppBar.css",a+"css/Collections.css",a+"css/Basket.css",a+"css/OneUp.css",a+"css/BackButton.css",a+"css/VideoScrubber.css",a+"css/ViewerFrame.css"];this.loadStyleSheets(d);this.loadScripts(c(),PhotoViewer.Coordinator);PhotoViewer.log.perf("evPhotoViewer_Frame_LoadDependencies_End",{emptyValue:true})};a._removeStylesheets=function(){for(var b=this._stylesheets,a=0,e=b.length;a<e;a++){var d=b[a],c=d.parentNode;c&&c.removeChild(d)}this._stylesheets=[]};a._rootUrlObj=null})()